var Fl=i=>{throw TypeError(i)};var po=(i,t,e)=>t.has(i)||Fl("Cannot "+e);var xt=(i,t,e)=>(po(i,t,"read from private field"),e?e.call(i):t.get(i)),We=(i,t,e)=>t.has(i)?Fl("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(i):t.set(i,e),de=(i,t,e,s)=>(po(i,t,"write to private field"),s?s.call(i,e):t.set(i,e),e),ze=(i,t,e)=>(po(i,t,"access private method"),e);var $l=(i,t,e,s)=>({set _(n){de(i,t,n,e)},get _(){return xt(i,t,s)}});(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function e(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerPolicy&&(r.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?r.credentials="include":n.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(n){if(n.ep)return;n.ep=!0;const r=e(n);fetch(n.href,r)}})();/**
* @vue/shared v3.5.17
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function Na(i){const t=Object.create(null);for(const e of i.split(","))t[e]=1;return e=>e in t}const Ct={},Ei=[],Je=()=>{},Bf=()=>!1,Hr=i=>i.charCodeAt(0)===111&&i.charCodeAt(1)===110&&(i.charCodeAt(2)>122||i.charCodeAt(2)<97),Fa=i=>i.startsWith("onUpdate:"),ee=Object.assign,$a=(i,t)=>{const e=i.indexOf(t);e>-1&&i.splice(e,1)},Hf=Object.prototype.hasOwnProperty,vt=(i,t)=>Hf.call(i,t),nt=Array.isArray,Si=i=>kn(i)==="[object Map]",Dh=i=>kn(i)==="[object Set]",Vf=i=>kn(i)==="[object RegExp]",at=i=>typeof i=="function",Mt=i=>typeof i=="string",Ds=i=>typeof i=="symbol",Pt=i=>i!==null&&typeof i=="object",Nh=i=>(Pt(i)||at(i))&&at(i.then)&&at(i.catch),Fh=Object.prototype.toString,kn=i=>Fh.call(i),jf=i=>kn(i).slice(8,-1),$h=i=>kn(i)==="[object Object]",Ba=i=>Mt(i)&&i!=="NaN"&&i[0]!=="-"&&""+parseInt(i,10)===i,hn=Na(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Vr=i=>{const t=Object.create(null);return e=>t[e]||(t[e]=i(e))},Uf=/-(\w)/g,Me=Vr(i=>i.replace(Uf,(t,e)=>e?e.toUpperCase():"")),Wf=/\B([A-Z])/g,ii=Vr(i=>i.replace(Wf,"-$1").toLowerCase()),jr=Vr(i=>i.charAt(0).toUpperCase()+i.slice(1)),go=Vr(i=>i?`on${jr(i)}`:""),Rs=(i,t)=>!Object.is(i,t),un=(i,...t)=>{for(let e=0;e<i.length;e++)i[e](...t)},ta=(i,t,e,s=!1)=>{Object.defineProperty(i,t,{configurable:!0,enumerable:!1,writable:s,value:e})},zf=i=>{const t=parseFloat(i);return isNaN(t)?i:t};let Bl;const Ur=()=>Bl||(Bl=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Ha(i){if(nt(i)){const t={};for(let e=0;e<i.length;e++){const s=i[e],n=Mt(s)?Yf(s):Ha(s);if(n)for(const r in n)t[r]=n[r]}return t}else if(Mt(i)||Pt(i))return i}const Gf=/;(?![^(]*\))/g,Kf=/:([^]+)/,qf=/\/\*[^]*?\*\//g;function Yf(i){const t={};return i.replace(qf,"").split(Gf).forEach(e=>{if(e){const s=e.split(Kf);s.length>1&&(t[s[0].trim()]=s[1].trim())}}),t}function Oi(i){let t="";if(Mt(i))t=i;else if(nt(i))for(let e=0;e<i.length;e++){const s=Oi(i[e]);s&&(t+=s+" ")}else if(Pt(i))for(const e in i)i[e]&&(t+=e+" ");return t.trim()}const Xf="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Qf=Na(Xf);function Bh(i){return!!i||i===""}const Hh=i=>!!(i&&i.__v_isRef===!0),Ci=i=>Mt(i)?i:i==null?"":nt(i)||Pt(i)&&(i.toString===Fh||!at(i.toString))?Hh(i)?Ci(i.value):JSON.stringify(i,Vh,2):String(i),Vh=(i,t)=>Hh(t)?Vh(i,t.value):Si(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((e,[s,n],r)=>(e[mo(s,r)+" =>"]=n,e),{})}:Dh(t)?{[`Set(${t.size})`]:[...t.values()].map(e=>mo(e))}:Ds(t)?mo(t):Pt(t)&&!nt(t)&&!$h(t)?String(t):t,mo=(i,t="")=>{var e;return Ds(i)?`Symbol(${(e=i.description)!=null?e:t})`:i};/**
* @vue/reactivity v3.5.17
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let pe;class Jf{constructor(t=!1){this.detached=t,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=pe,!t&&pe&&(this.index=(pe.scopes||(pe.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,e;if(this.scopes)for(t=0,e=this.scopes.length;t<e;t++)this.scopes[t].pause();for(t=0,e=this.effects.length;t<e;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,e;if(this.scopes)for(t=0,e=this.scopes.length;t<e;t++)this.scopes[t].resume();for(t=0,e=this.effects.length;t<e;t++)this.effects[t].resume()}}run(t){if(this._active){const e=pe;try{return pe=this,t()}finally{pe=e}}}on(){++this._on===1&&(this.prevScope=pe,pe=this)}off(){this._on>0&&--this._on===0&&(pe=this.prevScope,this.prevScope=void 0)}stop(t){if(this._active){this._active=!1;let e,s;for(e=0,s=this.effects.length;e<s;e++)this.effects[e].stop();for(this.effects.length=0,e=0,s=this.cleanups.length;e<s;e++)this.cleanups[e]();if(this.cleanups.length=0,this.scopes){for(e=0,s=this.scopes.length;e<s;e++)this.scopes[e].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const n=this.parent.scopes.pop();n&&n!==this&&(this.parent.scopes[this.index]=n,n.index=this.index)}this.parent=void 0}}}function Zf(){return pe}let St;const _o=new WeakSet;class jh{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,pe&&pe.active&&pe.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,_o.has(this)&&(_o.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Wh(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Hl(this),zh(this);const t=St,e=Fe;St=this,Fe=!0;try{return this.fn()}finally{Gh(this),St=t,Fe=e,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)Ua(t);this.deps=this.depsTail=void 0,Hl(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?_o.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){ea(this)&&this.run()}get dirty(){return ea(this)}}let Uh=0,dn,fn;function Wh(i,t=!1){if(i.flags|=8,t){i.next=fn,fn=i;return}i.next=dn,dn=i}function Va(){Uh++}function ja(){if(--Uh>0)return;if(fn){let t=fn;for(fn=void 0;t;){const e=t.next;t.next=void 0,t.flags&=-9,t=e}}let i;for(;dn;){let t=dn;for(dn=void 0;t;){const e=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(s){i||(i=s)}t=e}}if(i)throw i}function zh(i){for(let t=i.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function Gh(i){let t,e=i.depsTail,s=e;for(;s;){const n=s.prevDep;s.version===-1?(s===e&&(e=n),Ua(s),tp(s)):t=s,s.dep.activeLink=s.prevActiveLink,s.prevActiveLink=void 0,s=n}i.deps=t,i.depsTail=e}function ea(i){for(let t=i.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(Kh(t.dep.computed)||t.dep.version!==t.version))return!0;return!!i._dirty}function Kh(i){if(i.flags&4&&!(i.flags&16)||(i.flags&=-17,i.globalVersion===wn)||(i.globalVersion=wn,!i.isSSR&&i.flags&128&&(!i.deps&&!i._dirty||!ea(i))))return;i.flags|=2;const t=i.dep,e=St,s=Fe;St=i,Fe=!0;try{zh(i);const n=i.fn(i._value);(t.version===0||Rs(n,i._value))&&(i.flags|=128,i._value=n,t.version++)}catch(n){throw t.version++,n}finally{St=e,Fe=s,Gh(i),i.flags&=-3}}function Ua(i,t=!1){const{dep:e,prevSub:s,nextSub:n}=i;if(s&&(s.nextSub=n,i.prevSub=void 0),n&&(n.prevSub=s,i.nextSub=void 0),e.subs===i&&(e.subs=s,!s&&e.computed)){e.computed.flags&=-5;for(let r=e.computed.deps;r;r=r.nextDep)Ua(r,!0)}!t&&!--e.sc&&e.map&&e.map.delete(e.key)}function tp(i){const{prevDep:t,nextDep:e}=i;t&&(t.nextDep=e,i.prevDep=void 0),e&&(e.prevDep=t,i.nextDep=void 0)}let Fe=!0;const qh=[];function ps(){qh.push(Fe),Fe=!1}function gs(){const i=qh.pop();Fe=i===void 0?!0:i}function Hl(i){const{cleanup:t}=i;if(i.cleanup=void 0,t){const e=St;St=void 0;try{t()}finally{St=e}}}let wn=0;class ep{constructor(t,e){this.sub=t,this.dep=e,this.version=e.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Wa{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(t){if(!St||!Fe||St===this.computed)return;let e=this.activeLink;if(e===void 0||e.sub!==St)e=this.activeLink=new ep(St,this),St.deps?(e.prevDep=St.depsTail,St.depsTail.nextDep=e,St.depsTail=e):St.deps=St.depsTail=e,Yh(e);else if(e.version===-1&&(e.version=this.version,e.nextDep)){const s=e.nextDep;s.prevDep=e.prevDep,e.prevDep&&(e.prevDep.nextDep=s),e.prevDep=St.depsTail,e.nextDep=void 0,St.depsTail.nextDep=e,St.depsTail=e,St.deps===e&&(St.deps=s)}return e}trigger(t){this.version++,wn++,this.notify(t)}notify(t){Va();try{for(let e=this.subs;e;e=e.prevSub)e.sub.notify()&&e.sub.dep.notify()}finally{ja()}}}function Yh(i){if(i.dep.sc++,i.sub.flags&4){const t=i.dep.computed;if(t&&!i.dep.subs){t.flags|=20;for(let s=t.deps;s;s=s.nextDep)Yh(s)}const e=i.dep.subs;e!==i&&(i.prevSub=e,e&&(e.nextSub=i)),i.dep.subs=i}}const sa=new WeakMap,qs=Symbol(""),ia=Symbol(""),En=Symbol("");function Jt(i,t,e){if(Fe&&St){let s=sa.get(i);s||sa.set(i,s=new Map);let n=s.get(e);n||(s.set(e,n=new Wa),n.map=s,n.key=e),n.track()}}function hs(i,t,e,s,n,r){const o=sa.get(i);if(!o){wn++;return}const a=l=>{l&&l.trigger()};if(Va(),t==="clear")o.forEach(a);else{const l=nt(i),h=l&&Ba(e);if(l&&e==="length"){const c=Number(s);o.forEach((u,d)=>{(d==="length"||d===En||!Ds(d)&&d>=c)&&a(u)})}else switch((e!==void 0||o.has(void 0))&&a(o.get(e)),h&&a(o.get(En)),t){case"add":l?h&&a(o.get("length")):(a(o.get(qs)),Si(i)&&a(o.get(ia)));break;case"delete":l||(a(o.get(qs)),Si(i)&&a(o.get(ia)));break;case"set":Si(i)&&a(o.get(qs));break}}ja()}function li(i){const t=bt(i);return t===i?t:(Jt(t,"iterate",En),Ie(i)?t:t.map(Kt))}function Wr(i){return Jt(i=bt(i),"iterate",En),i}const sp={__proto__:null,[Symbol.iterator](){return bo(this,Symbol.iterator,Kt)},concat(...i){return li(this).concat(...i.map(t=>nt(t)?li(t):t))},entries(){return bo(this,"entries",i=>(i[1]=Kt(i[1]),i))},every(i,t){return ns(this,"every",i,t,void 0,arguments)},filter(i,t){return ns(this,"filter",i,t,e=>e.map(Kt),arguments)},find(i,t){return ns(this,"find",i,t,Kt,arguments)},findIndex(i,t){return ns(this,"findIndex",i,t,void 0,arguments)},findLast(i,t){return ns(this,"findLast",i,t,Kt,arguments)},findLastIndex(i,t){return ns(this,"findLastIndex",i,t,void 0,arguments)},forEach(i,t){return ns(this,"forEach",i,t,void 0,arguments)},includes(...i){return vo(this,"includes",i)},indexOf(...i){return vo(this,"indexOf",i)},join(i){return li(this).join(i)},lastIndexOf(...i){return vo(this,"lastIndexOf",i)},map(i,t){return ns(this,"map",i,t,void 0,arguments)},pop(){return Xi(this,"pop")},push(...i){return Xi(this,"push",i)},reduce(i,...t){return Vl(this,"reduce",i,t)},reduceRight(i,...t){return Vl(this,"reduceRight",i,t)},shift(){return Xi(this,"shift")},some(i,t){return ns(this,"some",i,t,void 0,arguments)},splice(...i){return Xi(this,"splice",i)},toReversed(){return li(this).toReversed()},toSorted(i){return li(this).toSorted(i)},toSpliced(...i){return li(this).toSpliced(...i)},unshift(...i){return Xi(this,"unshift",i)},values(){return bo(this,"values",Kt)}};function bo(i,t,e){const s=Wr(i),n=s[t]();return s!==i&&!Ie(i)&&(n._next=n.next,n.next=()=>{const r=n._next();return r.value&&(r.value=e(r.value)),r}),n}const ip=Array.prototype;function ns(i,t,e,s,n,r){const o=Wr(i),a=o!==i&&!Ie(i),l=o[t];if(l!==ip[t]){const u=l.apply(i,r);return a?Kt(u):u}let h=e;o!==i&&(a?h=function(u,d){return e.call(this,Kt(u),d,i)}:e.length>2&&(h=function(u,d){return e.call(this,u,d,i)}));const c=l.call(o,h,s);return a&&n?n(c):c}function Vl(i,t,e,s){const n=Wr(i);let r=e;return n!==i&&(Ie(i)?e.length>3&&(r=function(o,a,l){return e.call(this,o,a,l,i)}):r=function(o,a,l){return e.call(this,o,Kt(a),l,i)}),n[t](r,...s)}function vo(i,t,e){const s=bt(i);Jt(s,"iterate",En);const n=s[t](...e);return(n===-1||n===!1)&&Ka(e[0])?(e[0]=bt(e[0]),s[t](...e)):n}function Xi(i,t,e=[]){ps(),Va();const s=bt(i)[t].apply(i,e);return ja(),gs(),s}const np=Na("__proto__,__v_isRef,__isVue"),Xh=new Set(Object.getOwnPropertyNames(Symbol).filter(i=>i!=="arguments"&&i!=="caller").map(i=>Symbol[i]).filter(Ds));function rp(i){Ds(i)||(i=String(i));const t=bt(this);return Jt(t,"has",i),t.hasOwnProperty(i)}class Qh{constructor(t=!1,e=!1){this._isReadonly=t,this._isShallow=e}get(t,e,s){if(e==="__v_skip")return t.__v_skip;const n=this._isReadonly,r=this._isShallow;if(e==="__v_isReactive")return!n;if(e==="__v_isReadonly")return n;if(e==="__v_isShallow")return r;if(e==="__v_raw")return s===(n?r?gp:eu:r?tu:Zh).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(s)?t:void 0;const o=nt(t);if(!n){let l;if(o&&(l=sp[e]))return l;if(e==="hasOwnProperty")return rp}const a=Reflect.get(t,e,te(t)?t:s);return(Ds(e)?Xh.has(e):np(e))||(n||Jt(t,"get",e),r)?a:te(a)?o&&Ba(e)?a:a.value:Pt(a)?n?iu(a):zr(a):a}}class Jh extends Qh{constructor(t=!1){super(!1,t)}set(t,e,s,n){let r=t[e];if(!this._isShallow){const l=Ps(r);if(!Ie(s)&&!Ps(s)&&(r=bt(r),s=bt(s)),!nt(t)&&te(r)&&!te(s))return l?!1:(r.value=s,!0)}const o=nt(t)&&Ba(e)?Number(e)<t.length:vt(t,e),a=Reflect.set(t,e,s,te(t)?t:n);return t===bt(n)&&(o?Rs(s,r)&&hs(t,"set",e,s):hs(t,"add",e,s)),a}deleteProperty(t,e){const s=vt(t,e);t[e];const n=Reflect.deleteProperty(t,e);return n&&s&&hs(t,"delete",e,void 0),n}has(t,e){const s=Reflect.has(t,e);return(!Ds(e)||!Xh.has(e))&&Jt(t,"has",e),s}ownKeys(t){return Jt(t,"iterate",nt(t)?"length":qs),Reflect.ownKeys(t)}}class op extends Qh{constructor(t=!1){super(!0,t)}set(t,e){return!0}deleteProperty(t,e){return!0}}const ap=new Jh,lp=new op,cp=new Jh(!0);const na=i=>i,Yn=i=>Reflect.getPrototypeOf(i);function hp(i,t,e){return function(...s){const n=this.__v_raw,r=bt(n),o=Si(r),a=i==="entries"||i===Symbol.iterator&&o,l=i==="keys"&&o,h=n[i](...s),c=e?na:t?Er:Kt;return!t&&Jt(r,"iterate",l?ia:qs),{next(){const{value:u,done:d}=h.next();return d?{value:u,done:d}:{value:a?[c(u[0]),c(u[1])]:c(u),done:d}},[Symbol.iterator](){return this}}}}function Xn(i){return function(...t){return i==="delete"?!1:i==="clear"?void 0:this}}function up(i,t){const e={get(n){const r=this.__v_raw,o=bt(r),a=bt(n);i||(Rs(n,a)&&Jt(o,"get",n),Jt(o,"get",a));const{has:l}=Yn(o),h=t?na:i?Er:Kt;if(l.call(o,n))return h(r.get(n));if(l.call(o,a))return h(r.get(a));r!==o&&r.get(n)},get size(){const n=this.__v_raw;return!i&&Jt(bt(n),"iterate",qs),Reflect.get(n,"size",n)},has(n){const r=this.__v_raw,o=bt(r),a=bt(n);return i||(Rs(n,a)&&Jt(o,"has",n),Jt(o,"has",a)),n===a?r.has(n):r.has(n)||r.has(a)},forEach(n,r){const o=this,a=o.__v_raw,l=bt(a),h=t?na:i?Er:Kt;return!i&&Jt(l,"iterate",qs),a.forEach((c,u)=>n.call(r,h(c),h(u),o))}};return ee(e,i?{add:Xn("add"),set:Xn("set"),delete:Xn("delete"),clear:Xn("clear")}:{add(n){!t&&!Ie(n)&&!Ps(n)&&(n=bt(n));const r=bt(this);return Yn(r).has.call(r,n)||(r.add(n),hs(r,"add",n,n)),this},set(n,r){!t&&!Ie(r)&&!Ps(r)&&(r=bt(r));const o=bt(this),{has:a,get:l}=Yn(o);let h=a.call(o,n);h||(n=bt(n),h=a.call(o,n));const c=l.call(o,n);return o.set(n,r),h?Rs(r,c)&&hs(o,"set",n,r):hs(o,"add",n,r),this},delete(n){const r=bt(this),{has:o,get:a}=Yn(r);let l=o.call(r,n);l||(n=bt(n),l=o.call(r,n)),a&&a.call(r,n);const h=r.delete(n);return l&&hs(r,"delete",n,void 0),h},clear(){const n=bt(this),r=n.size!==0,o=n.clear();return r&&hs(n,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(n=>{e[n]=hp(n,i,t)}),e}function za(i,t){const e=up(i,t);return(s,n,r)=>n==="__v_isReactive"?!i:n==="__v_isReadonly"?i:n==="__v_raw"?s:Reflect.get(vt(e,n)&&n in s?e:s,n,r)}const dp={get:za(!1,!1)},fp={get:za(!1,!0)},pp={get:za(!0,!1)};const Zh=new WeakMap,tu=new WeakMap,eu=new WeakMap,gp=new WeakMap;function mp(i){switch(i){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function _p(i){return i.__v_skip||!Object.isExtensible(i)?0:mp(jf(i))}function zr(i){return Ps(i)?i:Ga(i,!1,ap,dp,Zh)}function su(i){return Ga(i,!1,cp,fp,tu)}function iu(i){return Ga(i,!0,lp,pp,eu)}function Ga(i,t,e,s,n){if(!Pt(i)||i.__v_raw&&!(t&&i.__v_isReactive))return i;const r=_p(i);if(r===0)return i;const o=n.get(i);if(o)return o;const a=new Proxy(i,r===2?s:e);return n.set(i,a),a}function Ti(i){return Ps(i)?Ti(i.__v_raw):!!(i&&i.__v_isReactive)}function Ps(i){return!!(i&&i.__v_isReadonly)}function Ie(i){return!!(i&&i.__v_isShallow)}function Ka(i){return i?!!i.__v_raw:!1}function bt(i){const t=i&&i.__v_raw;return t?bt(t):i}function bp(i){return!vt(i,"__v_skip")&&Object.isExtensible(i)&&ta(i,"__v_skip",!0),i}const Kt=i=>Pt(i)?zr(i):i,Er=i=>Pt(i)?iu(i):i;function te(i){return i?i.__v_isRef===!0:!1}function Ys(i){return nu(i,!1)}function vp(i){return nu(i,!0)}function nu(i,t){return te(i)?i:new yp(i,t)}class yp{constructor(t,e){this.dep=new Wa,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=e?t:bt(t),this._value=e?t:Kt(t),this.__v_isShallow=e}get value(){return this.dep.track(),this._value}set value(t){const e=this._rawValue,s=this.__v_isShallow||Ie(t)||Ps(t);t=s?t:bt(t),Rs(t,e)&&(this._rawValue=t,this._value=s?t:Kt(t),this.dep.trigger())}}function Ut(i){return te(i)?i.value:i}const Ap={get:(i,t,e)=>t==="__v_raw"?i:Ut(Reflect.get(i,t,e)),set:(i,t,e,s)=>{const n=i[t];return te(n)&&!te(e)?(n.value=e,!0):Reflect.set(i,t,e,s)}};function ru(i){return Ti(i)?i:new Proxy(i,Ap)}class wp{constructor(t,e,s){this.fn=t,this.setter=e,this._value=void 0,this.dep=new Wa(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=wn-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!e,this.isSSR=s}notify(){if(this.flags|=16,!(this.flags&8)&&St!==this)return Wh(this,!0),!0}get value(){const t=this.dep.track();return Kh(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function Ep(i,t,e=!1){let s,n;return at(i)?s=i:(s=i.get,n=i.set),new wp(s,n,e)}const Qn={},Sr=new WeakMap;let Vs;function Sp(i,t=!1,e=Vs){if(e){let s=Sr.get(e);s||Sr.set(e,s=[]),s.push(i)}}function Cp(i,t,e=Ct){const{immediate:s,deep:n,once:r,scheduler:o,augmentJob:a,call:l}=e,h=b=>n?b:Ie(b)||n===!1||n===0?Cs(b,1):Cs(b);let c,u,d,f,g=!1,p=!1;if(te(i)?(u=()=>i.value,g=Ie(i)):Ti(i)?(u=()=>h(i),g=!0):nt(i)?(p=!0,g=i.some(b=>Ti(b)||Ie(b)),u=()=>i.map(b=>{if(te(b))return b.value;if(Ti(b))return h(b);if(at(b))return l?l(b,2):b()})):at(i)?t?u=l?()=>l(i,2):i:u=()=>{if(d){ps();try{d()}finally{gs()}}const b=Vs;Vs=c;try{return l?l(i,3,[f]):i(f)}finally{Vs=b}}:u=Je,t&&n){const b=u,E=n===!0?1/0:n;u=()=>Cs(b(),E)}const _=Zf(),m=()=>{c.stop(),_&&_.active&&$a(_.effects,c)};if(r&&t){const b=t;t=(...E)=>{b(...E),m()}}let y=p?new Array(i.length).fill(Qn):Qn;const v=b=>{if(!(!(c.flags&1)||!c.dirty&&!b))if(t){const E=c.run();if(n||g||(p?E.some((S,T)=>Rs(S,y[T])):Rs(E,y))){d&&d();const S=Vs;Vs=c;try{const T=[E,y===Qn?void 0:p&&y[0]===Qn?[]:y,f];y=E,l?l(t,3,T):t(...T)}finally{Vs=S}}}else c.run()};return a&&a(v),c=new jh(u),c.scheduler=o?()=>o(v,!1):v,f=b=>Sp(b,!1,c),d=c.onStop=()=>{const b=Sr.get(c);if(b){if(l)l(b,4);else for(const E of b)E();Sr.delete(c)}},t?s?v(!0):y=c.run():o?o(v.bind(null,!0),!0):c.run(),m.pause=c.pause.bind(c),m.resume=c.resume.bind(c),m.stop=m,m}function Cs(i,t=1/0,e){if(t<=0||!Pt(i)||i.__v_skip||(e=e||new Set,e.has(i)))return i;if(e.add(i),t--,te(i))Cs(i.value,t,e);else if(nt(i))for(let s=0;s<i.length;s++)Cs(i[s],t,e);else if(Dh(i)||Si(i))i.forEach(s=>{Cs(s,t,e)});else if($h(i)){for(const s in i)Cs(i[s],t,e);for(const s of Object.getOwnPropertySymbols(i))Object.prototype.propertyIsEnumerable.call(i,s)&&Cs(i[s],t,e)}return i}/**
* @vue/runtime-core v3.5.17
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function On(i,t,e,s){try{return s?i(...s):i()}catch(n){Gr(n,t,e)}}function es(i,t,e,s){if(at(i)){const n=On(i,t,e,s);return n&&Nh(n)&&n.catch(r=>{Gr(r,t,e)}),n}if(nt(i)){const n=[];for(let r=0;r<i.length;r++)n.push(es(i[r],t,e,s));return n}}function Gr(i,t,e,s=!0){const n=t?t.vnode:null,{errorHandler:r,throwUnhandledErrorInProduction:o}=t&&t.appContext.config||Ct;if(t){let a=t.parent;const l=t.proxy,h=`https://vuejs.org/error-reference/#runtime-${e}`;for(;a;){const c=a.ec;if(c){for(let u=0;u<c.length;u++)if(c[u](i,l,h)===!1)return}a=a.parent}if(r){ps(),On(r,null,10,[i,l,h]),gs();return}}Tp(i,e,n,s,o)}function Tp(i,t,e,s=!0,n=!1){if(n)throw i;console.error(i)}const oe=[];let qe=-1;const xi=[];let ws=null,ui=0;const ou=Promise.resolve();let Cr=null;function au(i){const t=Cr||ou;return i?t.then(this?i.bind(this):i):t}function xp(i){let t=qe+1,e=oe.length;for(;t<e;){const s=t+e>>>1,n=oe[s],r=Sn(n);r<i||r===i&&n.flags&2?t=s+1:e=s}return t}function qa(i){if(!(i.flags&1)){const t=Sn(i),e=oe[oe.length-1];!e||!(i.flags&2)&&t>=Sn(e)?oe.push(i):oe.splice(xp(t),0,i),i.flags|=1,lu()}}function lu(){Cr||(Cr=ou.then(hu))}function Rp(i){nt(i)?xi.push(...i):ws&&i.id===-1?ws.splice(ui+1,0,i):i.flags&1||(xi.push(i),i.flags|=1),lu()}function jl(i,t,e=qe+1){for(;e<oe.length;e++){const s=oe[e];if(s&&s.flags&2){if(i&&s.id!==i.uid)continue;oe.splice(e,1),e--,s.flags&4&&(s.flags&=-2),s(),s.flags&4||(s.flags&=-2)}}}function cu(i){if(xi.length){const t=[...new Set(xi)].sort((e,s)=>Sn(e)-Sn(s));if(xi.length=0,ws){ws.push(...t);return}for(ws=t,ui=0;ui<ws.length;ui++){const e=ws[ui];e.flags&4&&(e.flags&=-2),e.flags&8||e(),e.flags&=-2}ws=null,ui=0}}const Sn=i=>i.id==null?i.flags&2?-1:1/0:i.id;function hu(i){try{for(qe=0;qe<oe.length;qe++){const t=oe[qe];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),On(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;qe<oe.length;qe++){const t=oe[qe];t&&(t.flags&=-2)}qe=-1,oe.length=0,cu(),Cr=null,(oe.length||xi.length)&&hu()}}let Pe=null,uu=null;function Tr(i){const t=Pe;return Pe=i,uu=i&&i.type.__scopeId||null,t}function ra(i,t=Pe,e){if(!t||i._n)return i;const s=(...n)=>{s._d&&Jl(-1);const r=Tr(t);let o;try{o=i(...n)}finally{Tr(r),s._d&&Jl(1)}return o};return s._n=!0,s._c=!0,s._d=!0,s}function Bs(i,t,e,s){const n=i.dirs,r=t&&t.dirs;for(let o=0;o<n.length;o++){const a=n[o];r&&(a.oldValue=r[o].value);let l=a.dir[s];l&&(ps(),es(l,e,8,[i.el,a,i,t]),gs())}}const Pp=Symbol("_vte"),Ip=i=>i.__isTeleport;function Kr(i,t){i.shapeFlag&6&&i.component?(i.transition=t,Kr(i.component.subTree,t)):i.shapeFlag&128?(i.ssContent.transition=t.clone(i.ssContent),i.ssFallback.transition=t.clone(i.ssFallback)):i.transition=t}/*! #__NO_SIDE_EFFECTS__ */function Dn(i,t){return at(i)?ee({name:i.name},t,{setup:i}):i}function du(i){i.ids=[i.ids[0]+i.ids[2]+++"-",0,0]}function pn(i,t,e,s,n=!1){if(nt(i)){i.forEach((g,p)=>pn(g,t&&(nt(t)?t[p]:t),e,s,n));return}if(Ri(s)&&!n){s.shapeFlag&512&&s.type.__asyncResolved&&s.component.subTree.component&&pn(i,t,e,s.component.subTree);return}const r=s.shapeFlag&4?Ja(s.component):s.el,o=n?null:r,{i:a,r:l}=i,h=t&&t.r,c=a.refs===Ct?a.refs={}:a.refs,u=a.setupState,d=bt(u),f=u===Ct?()=>!1:g=>vt(d,g);if(h!=null&&h!==l&&(Mt(h)?(c[h]=null,f(h)&&(u[h]=null)):te(h)&&(h.value=null)),at(l))On(l,a,12,[o,c]);else{const g=Mt(l),p=te(l);if(g||p){const _=()=>{if(i.f){const m=g?f(l)?u[l]:c[l]:l.value;n?nt(m)&&$a(m,r):nt(m)?m.includes(r)||m.push(r):g?(c[l]=[r],f(l)&&(u[l]=c[l])):(l.value=[r],i.k&&(c[i.k]=l.value))}else g?(c[l]=o,f(l)&&(u[l]=o)):p&&(l.value=o,i.k&&(c[i.k]=o))};o?(_.id=-1,zt(_,e)):_()}}}Ur().requestIdleCallback;Ur().cancelIdleCallback;const Ri=i=>!!i.type.__asyncLoader,fu=i=>i.type.__isKeepAlive,Lp={name:"KeepAlive",__isKeepAlive:!0,props:{include:[String,RegExp,Array],exclude:[String,RegExp,Array],max:[String,Number]},setup(i,{slots:t}){const e=Sg(),s=e.ctx;if(!s.renderer)return()=>{const y=t.default&&t.default();return y&&y.length===1?y[0]:y};const n=new Map,r=new Set;let o=null;const a=e.suspense,{renderer:{p:l,m:h,um:c,o:{createElement:u}}}=s,d=u("div");s.activate=(y,v,b,E,S)=>{const T=y.component;h(y,v,b,0,a),l(T.vnode,y,v,b,T,a,E,y.slotScopeIds,S),zt(()=>{T.isDeactivated=!1,T.a&&un(T.a);const I=y.props&&y.props.onVnodeMounted;I&&xe(I,T.parent,y)},a)},s.deactivate=y=>{const v=y.component;Rr(v.m),Rr(v.a),h(y,d,null,1,a),zt(()=>{v.da&&un(v.da);const b=y.props&&y.props.onVnodeUnmounted;b&&xe(b,v.parent,y),v.isDeactivated=!0},a)};function f(y){yo(y),c(y,e,a,!0)}function g(y){n.forEach((v,b)=>{const E=fa(v.type);E&&!y(E)&&p(b)})}function p(y){const v=n.get(y);v&&(!o||!di(v,o))?f(v):o&&yo(o),n.delete(y),r.delete(y)}Ii(()=>[i.include,i.exclude],([y,v])=>{y&&g(b=>rn(y,b)),v&&g(b=>!rn(v,b))},{flush:"post",deep:!0});let _=null;const m=()=>{_!=null&&(Pr(e.subTree.type)?zt(()=>{n.set(_,Jn(e.subTree))},e.subTree.suspense):n.set(_,Jn(e.subTree)))};return Nn(m),gu(m),mu(()=>{n.forEach(y=>{const{subTree:v,suspense:b}=e,E=Jn(v);if(y.type===E.type&&y.key===E.key){yo(E);const S=E.component.da;S&&zt(S,b);return}f(y)})}),()=>{if(_=null,!t.default)return o=null;const y=t.default(),v=y[0];if(y.length>1)return o=null,y;if(!Tn(v)||!(v.shapeFlag&4)&&!(v.shapeFlag&128))return o=null,v;let b=Jn(v);if(b.type===ms)return o=null,b;const E=b.type,S=fa(Ri(b)?b.type.__asyncResolved||{}:E),{include:T,exclude:I,max:k}=i;if(T&&(!S||!rn(T,S))||I&&S&&rn(I,S))return b.shapeFlag&=-257,o=b,v;const $=b.key==null?E:b.key,B=n.get($);return b.el&&(b=Js(b),v.shapeFlag&128&&(v.ssContent=b)),_=$,B?(b.el=B.el,b.component=B.component,b.transition&&Kr(b,b.transition),b.shapeFlag|=512,r.delete($),r.add($)):(r.add($),k&&r.size>parseInt(k,10)&&p(r.values().next().value)),b.shapeFlag|=256,o=b,Pr(v.type)?v:b}}},Mp=Lp;function rn(i,t){return nt(i)?i.some(e=>rn(e,t)):Mt(i)?i.split(",").includes(t):Vf(i)?(i.lastIndex=0,i.test(t)):!1}function kp(i,t){pu(i,"a",t)}function Op(i,t){pu(i,"da",t)}function pu(i,t,e=qt){const s=i.__wdc||(i.__wdc=()=>{let n=e;for(;n;){if(n.isDeactivated)return;n=n.parent}return i()});if(qr(t,s,e),e){let n=e.parent;for(;n&&n.parent;)fu(n.parent.vnode)&&Dp(s,t,e,n),n=n.parent}}function Dp(i,t,e,s){const n=qr(t,i,s,!0);_u(()=>{$a(s[t],n)},e)}function yo(i){i.shapeFlag&=-257,i.shapeFlag&=-513}function Jn(i){return i.shapeFlag&128?i.ssContent:i}function qr(i,t,e=qt,s=!1){if(e){const n=e[i]||(e[i]=[]),r=t.__weh||(t.__weh=(...o)=>{ps();const a=Fn(e),l=es(t,e,i,o);return a(),gs(),l});return s?n.unshift(r):n.push(r),r}}const bs=i=>(t,e=qt)=>{(!xn||i==="sp")&&qr(i,(...s)=>t(...s),e)},Np=bs("bm"),Nn=bs("m"),Fp=bs("bu"),gu=bs("u"),mu=bs("bum"),_u=bs("um"),$p=bs("sp"),Bp=bs("rtg"),Hp=bs("rtc");function Vp(i,t=qt){qr("ec",i,t)}const bu="components";function Ul(i,t){return yu(bu,i,!0,t)||i}const vu=Symbol.for("v-ndc");function jp(i){return Mt(i)?yu(bu,i,!1)||i:i||vu}function yu(i,t,e=!0,s=!1){const n=Pe||qt;if(n){const r=n.type;{const a=fa(r,!1);if(a&&(a===t||a===Me(t)||a===jr(Me(t))))return r}const o=Wl(n[i]||r[i],t)||Wl(n.appContext[i],t);return!o&&s?r:o}}function Wl(i,t){return i&&(i[t]||i[Me(t)]||i[jr(Me(t))])}function Ao(i,t,e,s){let n;const r=e,o=nt(i);if(o||Mt(i)){const a=o&&Ti(i);let l=!1,h=!1;a&&(l=!Ie(i),h=Ps(i),i=Wr(i)),n=new Array(i.length);for(let c=0,u=i.length;c<u;c++)n[c]=t(l?h?Er(Kt(i[c])):Kt(i[c]):i[c],c,void 0,r)}else if(typeof i=="number"){n=new Array(i);for(let a=0;a<i;a++)n[a]=t(a+1,a,void 0,r)}else if(Pt(i))if(i[Symbol.iterator])n=Array.from(i,(a,l)=>t(a,l,void 0,r));else{const a=Object.keys(i);n=new Array(a.length);for(let l=0,h=a.length;l<h;l++){const c=a[l];n[l]=t(i[c],c,l,r)}}else n=[];return n}const oa=i=>i?Bu(i)?Ja(i):oa(i.parent):null,gn=ee(Object.create(null),{$:i=>i,$el:i=>i.vnode.el,$data:i=>i.data,$props:i=>i.props,$attrs:i=>i.attrs,$slots:i=>i.slots,$refs:i=>i.refs,$parent:i=>oa(i.parent),$root:i=>oa(i.root),$host:i=>i.ce,$emit:i=>i.emit,$options:i=>wu(i),$forceUpdate:i=>i.f||(i.f=()=>{qa(i.update)}),$nextTick:i=>i.n||(i.n=au.bind(i.proxy)),$watch:i=>cg.bind(i)}),wo=(i,t)=>i!==Ct&&!i.__isScriptSetup&&vt(i,t),Up={get({_:i},t){if(t==="__v_skip")return!0;const{ctx:e,setupState:s,data:n,props:r,accessCache:o,type:a,appContext:l}=i;let h;if(t[0]!=="$"){const f=o[t];if(f!==void 0)switch(f){case 1:return s[t];case 2:return n[t];case 4:return e[t];case 3:return r[t]}else{if(wo(s,t))return o[t]=1,s[t];if(n!==Ct&&vt(n,t))return o[t]=2,n[t];if((h=i.propsOptions[0])&&vt(h,t))return o[t]=3,r[t];if(e!==Ct&&vt(e,t))return o[t]=4,e[t];aa&&(o[t]=0)}}const c=gn[t];let u,d;if(c)return t==="$attrs"&&Jt(i.attrs,"get",""),c(i);if((u=a.__cssModules)&&(u=u[t]))return u;if(e!==Ct&&vt(e,t))return o[t]=4,e[t];if(d=l.config.globalProperties,vt(d,t))return d[t]},set({_:i},t,e){const{data:s,setupState:n,ctx:r}=i;return wo(n,t)?(n[t]=e,!0):s!==Ct&&vt(s,t)?(s[t]=e,!0):vt(i.props,t)||t[0]==="$"&&t.slice(1)in i?!1:(r[t]=e,!0)},has({_:{data:i,setupState:t,accessCache:e,ctx:s,appContext:n,propsOptions:r}},o){let a;return!!e[o]||i!==Ct&&vt(i,o)||wo(t,o)||(a=r[0])&&vt(a,o)||vt(s,o)||vt(gn,o)||vt(n.config.globalProperties,o)},defineProperty(i,t,e){return e.get!=null?i._.accessCache[t]=0:vt(e,"value")&&this.set(i,t,e.value,null),Reflect.defineProperty(i,t,e)}};function zl(i){return nt(i)?i.reduce((t,e)=>(t[e]=null,t),{}):i}let aa=!0;function Wp(i){const t=wu(i),e=i.proxy,s=i.ctx;aa=!1,t.beforeCreate&&Gl(t.beforeCreate,i,"bc");const{data:n,computed:r,methods:o,watch:a,provide:l,inject:h,created:c,beforeMount:u,mounted:d,beforeUpdate:f,updated:g,activated:p,deactivated:_,beforeDestroy:m,beforeUnmount:y,destroyed:v,unmounted:b,render:E,renderTracked:S,renderTriggered:T,errorCaptured:I,serverPrefetch:k,expose:$,inheritAttrs:B,components:Z,directives:X,filters:it}=t;if(h&&zp(h,s,null),o)for(const O in o){const et=o[O];at(et)&&(s[O]=et.bind(e))}if(n){const O=n.call(e,e);Pt(O)&&(i.data=zr(O))}if(aa=!0,r)for(const O in r){const et=r[O],wt=at(et)?et.bind(e,e):at(et.get)?et.get.bind(e,e):Je,kt=!at(et)&&at(et.set)?et.set.bind(e):Je,Tt=_e({get:wt,set:kt});Object.defineProperty(s,O,{enumerable:!0,configurable:!0,get:()=>Tt.value,set:ct=>Tt.value=ct})}if(a)for(const O in a)Au(a[O],s,e,O);if(l){const O=at(l)?l.call(e):l;Reflect.ownKeys(O).forEach(et=>{pr(et,O[et])})}c&&Gl(c,i,"c");function N(O,et){nt(et)?et.forEach(wt=>O(wt.bind(e))):et&&O(et.bind(e))}if(N(Np,u),N(Nn,d),N(Fp,f),N(gu,g),N(kp,p),N(Op,_),N(Vp,I),N(Hp,S),N(Bp,T),N(mu,y),N(_u,b),N($p,k),nt($))if($.length){const O=i.exposed||(i.exposed={});$.forEach(et=>{Object.defineProperty(O,et,{get:()=>e[et],set:wt=>e[et]=wt})})}else i.exposed||(i.exposed={});E&&i.render===Je&&(i.render=E),B!=null&&(i.inheritAttrs=B),Z&&(i.components=Z),X&&(i.directives=X),k&&du(i)}function zp(i,t,e=Je){nt(i)&&(i=la(i));for(const s in i){const n=i[s];let r;Pt(n)?"default"in n?r=us(n.from||s,n.default,!0):r=us(n.from||s):r=us(n),te(r)?Object.defineProperty(t,s,{enumerable:!0,configurable:!0,get:()=>r.value,set:o=>r.value=o}):t[s]=r}}function Gl(i,t,e){es(nt(i)?i.map(s=>s.bind(t.proxy)):i.bind(t.proxy),t,e)}function Au(i,t,e,s){let n=s.includes(".")?Du(e,s):()=>e[s];if(Mt(i)){const r=t[i];at(r)&&Ii(n,r)}else if(at(i))Ii(n,i.bind(e));else if(Pt(i))if(nt(i))i.forEach(r=>Au(r,t,e,s));else{const r=at(i.handler)?i.handler.bind(e):t[i.handler];at(r)&&Ii(n,r,i)}}function wu(i){const t=i.type,{mixins:e,extends:s}=t,{mixins:n,optionsCache:r,config:{optionMergeStrategies:o}}=i.appContext,a=r.get(t);let l;return a?l=a:!n.length&&!e&&!s?l=t:(l={},n.length&&n.forEach(h=>xr(l,h,o,!0)),xr(l,t,o)),Pt(t)&&r.set(t,l),l}function xr(i,t,e,s=!1){const{mixins:n,extends:r}=t;r&&xr(i,r,e,!0),n&&n.forEach(o=>xr(i,o,e,!0));for(const o in t)if(!(s&&o==="expose")){const a=Gp[o]||e&&e[o];i[o]=a?a(i[o],t[o]):t[o]}return i}const Gp={data:Kl,props:ql,emits:ql,methods:on,computed:on,beforeCreate:se,created:se,beforeMount:se,mounted:se,beforeUpdate:se,updated:se,beforeDestroy:se,beforeUnmount:se,destroyed:se,unmounted:se,activated:se,deactivated:se,errorCaptured:se,serverPrefetch:se,components:on,directives:on,watch:qp,provide:Kl,inject:Kp};function Kl(i,t){return t?i?function(){return ee(at(i)?i.call(this,this):i,at(t)?t.call(this,this):t)}:t:i}function Kp(i,t){return on(la(i),la(t))}function la(i){if(nt(i)){const t={};for(let e=0;e<i.length;e++)t[i[e]]=i[e];return t}return i}function se(i,t){return i?[...new Set([].concat(i,t))]:t}function on(i,t){return i?ee(Object.create(null),i,t):t}function ql(i,t){return i?nt(i)&&nt(t)?[...new Set([...i,...t])]:ee(Object.create(null),zl(i),zl(t??{})):t}function qp(i,t){if(!i)return t;if(!t)return i;const e=ee(Object.create(null),i);for(const s in t)e[s]=se(i[s],t[s]);return e}function Eu(){return{app:null,config:{isNativeTag:Bf,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Yp=0;function Xp(i,t){return function(s,n=null){at(s)||(s=ee({},s)),n!=null&&!Pt(n)&&(n=null);const r=Eu(),o=new WeakSet,a=[];let l=!1;const h=r.app={_uid:Yp++,_component:s,_props:n,_container:null,_context:r,_instance:null,version:Ig,get config(){return r.config},set config(c){},use(c,...u){return o.has(c)||(c&&at(c.install)?(o.add(c),c.install(h,...u)):at(c)&&(o.add(c),c(h,...u))),h},mixin(c){return r.mixins.includes(c)||r.mixins.push(c),h},component(c,u){return u?(r.components[c]=u,h):r.components[c]},directive(c,u){return u?(r.directives[c]=u,h):r.directives[c]},mount(c,u,d){if(!l){const f=h._ceVNode||Zt(s,n);return f.appContext=r,d===!0?d="svg":d===!1&&(d=void 0),i(f,c,d),l=!0,h._container=c,c.__vue_app__=h,Ja(f.component)}},onUnmount(c){a.push(c)},unmount(){l&&(es(a,h._instance,16),i(null,h._container),delete h._container.__vue_app__)},provide(c,u){return r.provides[c]=u,h},runWithContext(c){const u=Pi;Pi=h;try{return c()}finally{Pi=u}}};return h}}let Pi=null;function pr(i,t){if(qt){let e=qt.provides;const s=qt.parent&&qt.parent.provides;s===e&&(e=qt.provides=Object.create(s)),e[i]=t}}function us(i,t,e=!1){const s=qt||Pe;if(s||Pi){let n=Pi?Pi._context.provides:s?s.parent==null||s.ce?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides:void 0;if(n&&i in n)return n[i];if(arguments.length>1)return e&&at(t)?t.call(s&&s.proxy):t}}const Su={},Cu=()=>Object.create(Su),Tu=i=>Object.getPrototypeOf(i)===Su;function Qp(i,t,e,s=!1){const n={},r=Cu();i.propsDefaults=Object.create(null),xu(i,t,n,r);for(const o in i.propsOptions[0])o in n||(n[o]=void 0);e?i.props=s?n:su(n):i.type.props?i.props=n:i.props=r,i.attrs=r}function Jp(i,t,e,s){const{props:n,attrs:r,vnode:{patchFlag:o}}=i,a=bt(n),[l]=i.propsOptions;let h=!1;if((s||o>0)&&!(o&16)){if(o&8){const c=i.vnode.dynamicProps;for(let u=0;u<c.length;u++){let d=c[u];if(Yr(i.emitsOptions,d))continue;const f=t[d];if(l)if(vt(r,d))f!==r[d]&&(r[d]=f,h=!0);else{const g=Me(d);n[g]=ca(l,a,g,f,i,!1)}else f!==r[d]&&(r[d]=f,h=!0)}}}else{xu(i,t,n,r)&&(h=!0);let c;for(const u in a)(!t||!vt(t,u)&&((c=ii(u))===u||!vt(t,c)))&&(l?e&&(e[u]!==void 0||e[c]!==void 0)&&(n[u]=ca(l,a,u,void 0,i,!0)):delete n[u]);if(r!==a)for(const u in r)(!t||!vt(t,u))&&(delete r[u],h=!0)}h&&hs(i.attrs,"set","")}function xu(i,t,e,s){const[n,r]=i.propsOptions;let o=!1,a;if(t)for(let l in t){if(hn(l))continue;const h=t[l];let c;n&&vt(n,c=Me(l))?!r||!r.includes(c)?e[c]=h:(a||(a={}))[c]=h:Yr(i.emitsOptions,l)||(!(l in s)||h!==s[l])&&(s[l]=h,o=!0)}if(r){const l=bt(e),h=a||Ct;for(let c=0;c<r.length;c++){const u=r[c];e[u]=ca(n,l,u,h[u],i,!vt(h,u))}}return o}function ca(i,t,e,s,n,r){const o=i[e];if(o!=null){const a=vt(o,"default");if(a&&s===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&at(l)){const{propsDefaults:h}=n;if(e in h)s=h[e];else{const c=Fn(n);s=h[e]=l.call(null,t),c()}}else s=l;n.ce&&n.ce._setProp(e,s)}o[0]&&(r&&!a?s=!1:o[1]&&(s===""||s===ii(e))&&(s=!0))}return s}const Zp=new WeakMap;function Ru(i,t,e=!1){const s=e?Zp:t.propsCache,n=s.get(i);if(n)return n;const r=i.props,o={},a=[];let l=!1;if(!at(i)){const c=u=>{l=!0;const[d,f]=Ru(u,t,!0);ee(o,d),f&&a.push(...f)};!e&&t.mixins.length&&t.mixins.forEach(c),i.extends&&c(i.extends),i.mixins&&i.mixins.forEach(c)}if(!r&&!l)return Pt(i)&&s.set(i,Ei),Ei;if(nt(r))for(let c=0;c<r.length;c++){const u=Me(r[c]);Yl(u)&&(o[u]=Ct)}else if(r)for(const c in r){const u=Me(c);if(Yl(u)){const d=r[c],f=o[u]=nt(d)||at(d)?{type:d}:ee({},d),g=f.type;let p=!1,_=!0;if(nt(g))for(let m=0;m<g.length;++m){const y=g[m],v=at(y)&&y.name;if(v==="Boolean"){p=!0;break}else v==="String"&&(_=!1)}else p=at(g)&&g.name==="Boolean";f[0]=p,f[1]=_,(p||vt(f,"default"))&&a.push(u)}}const h=[o,a];return Pt(i)&&s.set(i,h),h}function Yl(i){return i[0]!=="$"&&!hn(i)}const Ya=i=>i[0]==="_"||i==="$stable",Xa=i=>nt(i)?i.map(Qe):[Qe(i)],tg=(i,t,e)=>{if(t._n)return t;const s=ra((...n)=>Xa(t(...n)),e);return s._c=!1,s},Pu=(i,t,e)=>{const s=i._ctx;for(const n in i){if(Ya(n))continue;const r=i[n];if(at(r))t[n]=tg(n,r,s);else if(r!=null){const o=Xa(r);t[n]=()=>o}}},Iu=(i,t)=>{const e=Xa(t);i.slots.default=()=>e},Lu=(i,t,e)=>{for(const s in t)(e||!Ya(s))&&(i[s]=t[s])},eg=(i,t,e)=>{const s=i.slots=Cu();if(i.vnode.shapeFlag&32){const n=t.__;n&&ta(s,"__",n,!0);const r=t._;r?(Lu(s,t,e),e&&ta(s,"_",r,!0)):Pu(t,s)}else t&&Iu(i,t)},sg=(i,t,e)=>{const{vnode:s,slots:n}=i;let r=!0,o=Ct;if(s.shapeFlag&32){const a=t._;a?e&&a===1?r=!1:Lu(n,t,e):(r=!t.$stable,Pu(t,n)),o=t}else t&&(Iu(i,t),o={default:1});if(r)for(const a in n)!Ya(a)&&o[a]==null&&delete n[a]},zt=mg;function ig(i){return ng(i)}function ng(i,t){const e=Ur();e.__VUE__=!0;const{insert:s,remove:n,patchProp:r,createElement:o,createText:a,createComment:l,setText:h,setElementText:c,parentNode:u,nextSibling:d,setScopeId:f=Je,insertStaticContent:g}=i,p=(A,w,C,R=null,L=null,P=null,U=void 0,V=null,F=!!w.dynamicChildren)=>{if(A===w)return;A&&!di(A,w)&&(R=x(A),ct(A,L,P,!0),A=null),w.patchFlag===-2&&(F=!1,w.dynamicChildren=null);const{type:D,ref:q,shapeFlag:W}=w;switch(D){case Xr:_(A,w,C,R);break;case ms:m(A,w,C,R);break;case So:A==null&&y(w,C,R,U);break;case me:Z(A,w,C,R,L,P,U,V,F);break;default:W&1?E(A,w,C,R,L,P,U,V,F):W&6?X(A,w,C,R,L,P,U,V,F):(W&64||W&128)&&D.process(A,w,C,R,L,P,U,V,F,G)}q!=null&&L?pn(q,A&&A.ref,P,w||A,!w):q==null&&A&&A.ref!=null&&pn(A.ref,null,P,A,!0)},_=(A,w,C,R)=>{if(A==null)s(w.el=a(w.children),C,R);else{const L=w.el=A.el;w.children!==A.children&&h(L,w.children)}},m=(A,w,C,R)=>{A==null?s(w.el=l(w.children||""),C,R):w.el=A.el},y=(A,w,C,R)=>{[A.el,A.anchor]=g(A.children,w,C,R,A.el,A.anchor)},v=({el:A,anchor:w},C,R)=>{let L;for(;A&&A!==w;)L=d(A),s(A,C,R),A=L;s(w,C,R)},b=({el:A,anchor:w})=>{let C;for(;A&&A!==w;)C=d(A),n(A),A=C;n(w)},E=(A,w,C,R,L,P,U,V,F)=>{w.type==="svg"?U="svg":w.type==="math"&&(U="mathml"),A==null?S(w,C,R,L,P,U,V,F):k(A,w,L,P,U,V,F)},S=(A,w,C,R,L,P,U,V)=>{let F,D;const{props:q,shapeFlag:W,transition:K,dirs:st}=A;if(F=A.el=o(A.type,P,q&&q.is,q),W&8?c(F,A.children):W&16&&I(A.children,F,null,R,L,Eo(A,P),U,V),st&&Bs(A,null,R,"created"),T(F,A,A.scopeId,U,R),q){for(const yt in q)yt!=="value"&&!hn(yt)&&r(F,yt,null,q[yt],P,R);"value"in q&&r(F,"value",null,q.value,P),(D=q.onVnodeBeforeMount)&&xe(D,R,A)}st&&Bs(A,null,R,"beforeMount");const ht=rg(L,K);ht&&K.beforeEnter(F),s(F,w,C),((D=q&&q.onVnodeMounted)||ht||st)&&zt(()=>{D&&xe(D,R,A),ht&&K.enter(F),st&&Bs(A,null,R,"mounted")},L)},T=(A,w,C,R,L)=>{if(C&&f(A,C),R)for(let P=0;P<R.length;P++)f(A,R[P]);if(L){let P=L.subTree;if(w===P||Pr(P.type)&&(P.ssContent===w||P.ssFallback===w)){const U=L.vnode;T(A,U,U.scopeId,U.slotScopeIds,L.parent)}}},I=(A,w,C,R,L,P,U,V,F=0)=>{for(let D=F;D<A.length;D++){const q=A[D]=V?Es(A[D]):Qe(A[D]);p(null,q,w,C,R,L,P,U,V)}},k=(A,w,C,R,L,P,U)=>{const V=w.el=A.el;let{patchFlag:F,dynamicChildren:D,dirs:q}=w;F|=A.patchFlag&16;const W=A.props||Ct,K=w.props||Ct;let st;if(C&&Hs(C,!1),(st=K.onVnodeBeforeUpdate)&&xe(st,C,w,A),q&&Bs(w,A,C,"beforeUpdate"),C&&Hs(C,!0),(W.innerHTML&&K.innerHTML==null||W.textContent&&K.textContent==null)&&c(V,""),D?$(A.dynamicChildren,D,V,C,R,Eo(w,L),P):U||et(A,w,V,null,C,R,Eo(w,L),P,!1),F>0){if(F&16)B(V,W,K,C,L);else if(F&2&&W.class!==K.class&&r(V,"class",null,K.class,L),F&4&&r(V,"style",W.style,K.style,L),F&8){const ht=w.dynamicProps;for(let yt=0;yt<ht.length;yt++){const gt=ht[yt],he=W[gt],ue=K[gt];(ue!==he||gt==="value")&&r(V,gt,he,ue,L,C)}}F&1&&A.children!==w.children&&c(V,w.children)}else!U&&D==null&&B(V,W,K,C,L);((st=K.onVnodeUpdated)||q)&&zt(()=>{st&&xe(st,C,w,A),q&&Bs(w,A,C,"updated")},R)},$=(A,w,C,R,L,P,U)=>{for(let V=0;V<w.length;V++){const F=A[V],D=w[V],q=F.el&&(F.type===me||!di(F,D)||F.shapeFlag&198)?u(F.el):C;p(F,D,q,null,R,L,P,U,!0)}},B=(A,w,C,R,L)=>{if(w!==C){if(w!==Ct)for(const P in w)!hn(P)&&!(P in C)&&r(A,P,w[P],null,L,R);for(const P in C){if(hn(P))continue;const U=C[P],V=w[P];U!==V&&P!=="value"&&r(A,P,V,U,L,R)}"value"in C&&r(A,"value",w.value,C.value,L)}},Z=(A,w,C,R,L,P,U,V,F)=>{const D=w.el=A?A.el:a(""),q=w.anchor=A?A.anchor:a("");let{patchFlag:W,dynamicChildren:K,slotScopeIds:st}=w;st&&(V=V?V.concat(st):st),A==null?(s(D,C,R),s(q,C,R),I(w.children||[],C,q,L,P,U,V,F)):W>0&&W&64&&K&&A.dynamicChildren?($(A.dynamicChildren,K,C,L,P,U,V),(w.key!=null||L&&w===L.subTree)&&Mu(A,w,!0)):et(A,w,C,q,L,P,U,V,F)},X=(A,w,C,R,L,P,U,V,F)=>{w.slotScopeIds=V,A==null?w.shapeFlag&512?L.ctx.activate(w,C,R,U,F):it(w,C,R,L,P,U,F):mt(A,w,F)},it=(A,w,C,R,L,P,U)=>{const V=A.component=Eg(A,R,L);if(fu(A)&&(V.ctx.renderer=G),Cg(V,!1,U),V.asyncDep){if(L&&L.registerDep(V,N,U),!A.el){const F=V.subTree=Zt(ms);m(null,F,w,C)}}else N(V,A,w,C,L,P,U)},mt=(A,w,C)=>{const R=w.component=A.component;if(pg(A,w,C))if(R.asyncDep&&!R.asyncResolved){O(R,w,C);return}else R.next=w,R.update();else w.el=A.el,R.vnode=w},N=(A,w,C,R,L,P,U)=>{const V=()=>{if(A.isMounted){let{next:W,bu:K,u:st,parent:ht,vnode:yt}=A;{const je=ku(A);if(je){W&&(W.el=yt.el,O(A,W,U)),je.asyncDep.then(()=>{A.isUnmounted||V()});return}}let gt=W,he;Hs(A,!1),W?(W.el=yt.el,O(A,W,U)):W=yt,K&&un(K),(he=W.props&&W.props.onVnodeBeforeUpdate)&&xe(he,ht,W,yt),Hs(A,!0);const ue=Xl(A),Ve=A.subTree;A.subTree=ue,p(Ve,ue,u(Ve.el),x(Ve),A,L,P),W.el=ue.el,gt===null&&gg(A,ue.el),st&&zt(st,L),(he=W.props&&W.props.onVnodeUpdated)&&zt(()=>xe(he,ht,W,yt),L)}else{let W;const{el:K,props:st}=w,{bm:ht,m:yt,parent:gt,root:he,type:ue}=A,Ve=Ri(w);Hs(A,!1),ht&&un(ht),!Ve&&(W=st&&st.onVnodeBeforeMount)&&xe(W,gt,w),Hs(A,!0);{he.ce&&he.ce._def.shadowRoot!==!1&&he.ce._injectChildStyle(ue);const je=A.subTree=Xl(A);p(null,je,C,R,A,L,P),w.el=je.el}if(yt&&zt(yt,L),!Ve&&(W=st&&st.onVnodeMounted)){const je=w;zt(()=>xe(W,gt,je),L)}(w.shapeFlag&256||gt&&Ri(gt.vnode)&&gt.vnode.shapeFlag&256)&&A.a&&zt(A.a,L),A.isMounted=!0,w=C=R=null}};A.scope.on();const F=A.effect=new jh(V);A.scope.off();const D=A.update=F.run.bind(F),q=A.job=F.runIfDirty.bind(F);q.i=A,q.id=A.uid,F.scheduler=()=>qa(q),Hs(A,!0),D()},O=(A,w,C)=>{w.component=A;const R=A.vnode.props;A.vnode=w,A.next=null,Jp(A,w.props,R,C),sg(A,w.children,C),ps(),jl(A),gs()},et=(A,w,C,R,L,P,U,V,F=!1)=>{const D=A&&A.children,q=A?A.shapeFlag:0,W=w.children,{patchFlag:K,shapeFlag:st}=w;if(K>0){if(K&128){kt(D,W,C,R,L,P,U,V,F);return}else if(K&256){wt(D,W,C,R,L,P,U,V,F);return}}st&8?(q&16&&Et(D,L,P),W!==D&&c(C,W)):q&16?st&16?kt(D,W,C,R,L,P,U,V,F):Et(D,L,P,!0):(q&8&&c(C,""),st&16&&I(W,C,R,L,P,U,V,F))},wt=(A,w,C,R,L,P,U,V,F)=>{A=A||Ei,w=w||Ei;const D=A.length,q=w.length,W=Math.min(D,q);let K;for(K=0;K<W;K++){const st=w[K]=F?Es(w[K]):Qe(w[K]);p(A[K],st,C,null,L,P,U,V,F)}D>q?Et(A,L,P,!0,!1,W):I(w,C,R,L,P,U,V,F,W)},kt=(A,w,C,R,L,P,U,V,F)=>{let D=0;const q=w.length;let W=A.length-1,K=q-1;for(;D<=W&&D<=K;){const st=A[D],ht=w[D]=F?Es(w[D]):Qe(w[D]);if(di(st,ht))p(st,ht,C,null,L,P,U,V,F);else break;D++}for(;D<=W&&D<=K;){const st=A[W],ht=w[K]=F?Es(w[K]):Qe(w[K]);if(di(st,ht))p(st,ht,C,null,L,P,U,V,F);else break;W--,K--}if(D>W){if(D<=K){const st=K+1,ht=st<q?w[st].el:R;for(;D<=K;)p(null,w[D]=F?Es(w[D]):Qe(w[D]),C,ht,L,P,U,V,F),D++}}else if(D>K)for(;D<=W;)ct(A[D],L,P,!0),D++;else{const st=D,ht=D,yt=new Map;for(D=ht;D<=K;D++){const ve=w[D]=F?Es(w[D]):Qe(w[D]);ve.key!=null&&yt.set(ve.key,D)}let gt,he=0;const ue=K-ht+1;let Ve=!1,je=0;const Yi=new Array(ue);for(D=0;D<ue;D++)Yi[D]=0;for(D=st;D<=W;D++){const ve=A[D];if(he>=ue){ct(ve,L,P,!0);continue}let Ue;if(ve.key!=null)Ue=yt.get(ve.key);else for(gt=ht;gt<=K;gt++)if(Yi[gt-ht]===0&&di(ve,w[gt])){Ue=gt;break}Ue===void 0?ct(ve,L,P,!0):(Yi[Ue-ht]=D+1,Ue>=je?je=Ue:Ve=!0,p(ve,w[Ue],C,null,L,P,U,V,F),he++)}const Dl=Ve?og(Yi):Ei;for(gt=Dl.length-1,D=ue-1;D>=0;D--){const ve=ht+D,Ue=w[ve],Nl=ve+1<q?w[ve+1].el:R;Yi[D]===0?p(null,Ue,C,Nl,L,P,U,V,F):Ve&&(gt<0||D!==Dl[gt]?Tt(Ue,C,Nl,2):gt--)}}},Tt=(A,w,C,R,L=null)=>{const{el:P,type:U,transition:V,children:F,shapeFlag:D}=A;if(D&6){Tt(A.component.subTree,w,C,R);return}if(D&128){A.suspense.move(w,C,R);return}if(D&64){U.move(A,w,C,G);return}if(U===me){s(P,w,C);for(let W=0;W<F.length;W++)Tt(F[W],w,C,R);s(A.anchor,w,C);return}if(U===So){v(A,w,C);return}if(R!==2&&D&1&&V)if(R===0)V.beforeEnter(P),s(P,w,C),zt(()=>V.enter(P),L);else{const{leave:W,delayLeave:K,afterLeave:st}=V,ht=()=>{A.ctx.isUnmounted?n(P):s(P,w,C)},yt=()=>{W(P,()=>{ht(),st&&st()})};K?K(P,ht,yt):yt()}else s(P,w,C)},ct=(A,w,C,R=!1,L=!1)=>{const{type:P,props:U,ref:V,children:F,dynamicChildren:D,shapeFlag:q,patchFlag:W,dirs:K,cacheIndex:st}=A;if(W===-2&&(L=!1),V!=null&&(ps(),pn(V,null,C,A,!0),gs()),st!=null&&(w.renderCache[st]=void 0),q&256){w.ctx.deactivate(A);return}const ht=q&1&&K,yt=!Ri(A);let gt;if(yt&&(gt=U&&U.onVnodeBeforeUnmount)&&xe(gt,w,A),q&6)Lt(A.component,C,R);else{if(q&128){A.suspense.unmount(C,R);return}ht&&Bs(A,null,w,"beforeUnmount"),q&64?A.type.remove(A,w,C,G,R):D&&!D.hasOnce&&(P!==me||W>0&&W&64)?Et(D,w,C,!1,!0):(P===me&&W&384||!L&&q&16)&&Et(F,w,C),R&&pt(A)}(yt&&(gt=U&&U.onVnodeUnmounted)||ht)&&zt(()=>{gt&&xe(gt,w,A),ht&&Bs(A,null,w,"unmounted")},C)},pt=A=>{const{type:w,el:C,anchor:R,transition:L}=A;if(w===me){Nt(C,R);return}if(w===So){b(A);return}const P=()=>{n(C),L&&!L.persisted&&L.afterLeave&&L.afterLeave()};if(A.shapeFlag&1&&L&&!L.persisted){const{leave:U,delayLeave:V}=L,F=()=>U(C,P);V?V(A.el,P,F):F()}else P()},Nt=(A,w)=>{let C;for(;A!==w;)C=d(A),n(A),A=C;n(w)},Lt=(A,w,C)=>{const{bum:R,scope:L,job:P,subTree:U,um:V,m:F,a:D,parent:q,slots:{__:W}}=A;Rr(F),Rr(D),R&&un(R),q&&nt(W)&&W.forEach(K=>{q.renderCache[K]=void 0}),L.stop(),P&&(P.flags|=8,ct(U,A,w,C)),V&&zt(V,w),zt(()=>{A.isUnmounted=!0},w),w&&w.pendingBranch&&!w.isUnmounted&&A.asyncDep&&!A.asyncResolved&&A.suspenseId===w.pendingId&&(w.deps--,w.deps===0&&w.resolve())},Et=(A,w,C,R=!1,L=!1,P=0)=>{for(let U=P;U<A.length;U++)ct(A[U],w,C,R,L)},x=A=>{if(A.shapeFlag&6)return x(A.component.subTree);if(A.shapeFlag&128)return A.suspense.next();const w=d(A.anchor||A.el),C=w&&w[Pp];return C?d(C):w};let H=!1;const j=(A,w,C)=>{A==null?w._vnode&&ct(w._vnode,null,null,!0):p(w._vnode||null,A,w,null,null,null,C),w._vnode=A,H||(H=!0,jl(),cu(),H=!1)},G={p,um:ct,m:Tt,r:pt,mt:it,mc:I,pc:et,pbc:$,n:x,o:i};return{render:j,hydrate:void 0,createApp:Xp(j)}}function Eo({type:i,props:t},e){return e==="svg"&&i==="foreignObject"||e==="mathml"&&i==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:e}function Hs({effect:i,job:t},e){e?(i.flags|=32,t.flags|=4):(i.flags&=-33,t.flags&=-5)}function rg(i,t){return(!i||i&&!i.pendingBranch)&&t&&!t.persisted}function Mu(i,t,e=!1){const s=i.children,n=t.children;if(nt(s)&&nt(n))for(let r=0;r<s.length;r++){const o=s[r];let a=n[r];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=n[r]=Es(n[r]),a.el=o.el),!e&&a.patchFlag!==-2&&Mu(o,a)),a.type===Xr&&(a.el=o.el),a.type===ms&&!a.el&&(a.el=o.el)}}function og(i){const t=i.slice(),e=[0];let s,n,r,o,a;const l=i.length;for(s=0;s<l;s++){const h=i[s];if(h!==0){if(n=e[e.length-1],i[n]<h){t[s]=n,e.push(s);continue}for(r=0,o=e.length-1;r<o;)a=r+o>>1,i[e[a]]<h?r=a+1:o=a;h<i[e[r]]&&(r>0&&(t[s]=e[r-1]),e[r]=s)}}for(r=e.length,o=e[r-1];r-- >0;)e[r]=o,o=t[o];return e}function ku(i){const t=i.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:ku(t)}function Rr(i){if(i)for(let t=0;t<i.length;t++)i[t].flags|=8}const ag=Symbol.for("v-scx"),lg=()=>us(ag);function Ii(i,t,e){return Ou(i,t,e)}function Ou(i,t,e=Ct){const{immediate:s,deep:n,flush:r,once:o}=e,a=ee({},e),l=t&&s||!t&&r!=="post";let h;if(xn){if(r==="sync"){const f=lg();h=f.__watcherHandles||(f.__watcherHandles=[])}else if(!l){const f=()=>{};return f.stop=Je,f.resume=Je,f.pause=Je,f}}const c=qt;a.call=(f,g,p)=>es(f,c,g,p);let u=!1;r==="post"?a.scheduler=f=>{zt(f,c&&c.suspense)}:r!=="sync"&&(u=!0,a.scheduler=(f,g)=>{g?f():qa(f)}),a.augmentJob=f=>{t&&(f.flags|=4),u&&(f.flags|=2,c&&(f.id=c.uid,f.i=c))};const d=Cp(i,t,a);return xn&&(h?h.push(d):l&&d()),d}function cg(i,t,e){const s=this.proxy,n=Mt(i)?i.includes(".")?Du(s,i):()=>s[i]:i.bind(s,s);let r;at(t)?r=t:(r=t.handler,e=t);const o=Fn(this),a=Ou(n,r.bind(s),e);return o(),a}function Du(i,t){const e=t.split(".");return()=>{let s=i;for(let n=0;n<e.length&&s;n++)s=s[e[n]];return s}}const hg=(i,t)=>t==="modelValue"||t==="model-value"?i.modelModifiers:i[`${t}Modifiers`]||i[`${Me(t)}Modifiers`]||i[`${ii(t)}Modifiers`];function ug(i,t,...e){if(i.isUnmounted)return;const s=i.vnode.props||Ct;let n=e;const r=t.startsWith("update:"),o=r&&hg(s,t.slice(7));o&&(o.trim&&(n=e.map(c=>Mt(c)?c.trim():c)),o.number&&(n=e.map(zf)));let a,l=s[a=go(t)]||s[a=go(Me(t))];!l&&r&&(l=s[a=go(ii(t))]),l&&es(l,i,6,n);const h=s[a+"Once"];if(h){if(!i.emitted)i.emitted={};else if(i.emitted[a])return;i.emitted[a]=!0,es(h,i,6,n)}}function Nu(i,t,e=!1){const s=t.emitsCache,n=s.get(i);if(n!==void 0)return n;const r=i.emits;let o={},a=!1;if(!at(i)){const l=h=>{const c=Nu(h,t,!0);c&&(a=!0,ee(o,c))};!e&&t.mixins.length&&t.mixins.forEach(l),i.extends&&l(i.extends),i.mixins&&i.mixins.forEach(l)}return!r&&!a?(Pt(i)&&s.set(i,null),null):(nt(r)?r.forEach(l=>o[l]=null):ee(o,r),Pt(i)&&s.set(i,o),o)}function Yr(i,t){return!i||!Hr(t)?!1:(t=t.slice(2).replace(/Once$/,""),vt(i,t[0].toLowerCase()+t.slice(1))||vt(i,ii(t))||vt(i,t))}function Xl(i){const{type:t,vnode:e,proxy:s,withProxy:n,propsOptions:[r],slots:o,attrs:a,emit:l,render:h,renderCache:c,props:u,data:d,setupState:f,ctx:g,inheritAttrs:p}=i,_=Tr(i);let m,y;try{if(e.shapeFlag&4){const b=n||s,E=b;m=Qe(h.call(E,b,c,u,f,d,g)),y=a}else{const b=t;m=Qe(b.length>1?b(u,{attrs:a,slots:o,emit:l}):b(u,null)),y=t.props?a:dg(a)}}catch(b){mn.length=0,Gr(b,i,1),m=Zt(ms)}let v=m;if(y&&p!==!1){const b=Object.keys(y),{shapeFlag:E}=v;b.length&&E&7&&(r&&b.some(Fa)&&(y=fg(y,r)),v=Js(v,y,!1,!0))}return e.dirs&&(v=Js(v,null,!1,!0),v.dirs=v.dirs?v.dirs.concat(e.dirs):e.dirs),e.transition&&Kr(v,e.transition),m=v,Tr(_),m}const dg=i=>{let t;for(const e in i)(e==="class"||e==="style"||Hr(e))&&((t||(t={}))[e]=i[e]);return t},fg=(i,t)=>{const e={};for(const s in i)(!Fa(s)||!(s.slice(9)in t))&&(e[s]=i[s]);return e};function pg(i,t,e){const{props:s,children:n,component:r}=i,{props:o,children:a,patchFlag:l}=t,h=r.emitsOptions;if(t.dirs||t.transition)return!0;if(e&&l>=0){if(l&1024)return!0;if(l&16)return s?Ql(s,o,h):!!o;if(l&8){const c=t.dynamicProps;for(let u=0;u<c.length;u++){const d=c[u];if(o[d]!==s[d]&&!Yr(h,d))return!0}}}else return(n||a)&&(!a||!a.$stable)?!0:s===o?!1:s?o?Ql(s,o,h):!0:!!o;return!1}function Ql(i,t,e){const s=Object.keys(t);if(s.length!==Object.keys(i).length)return!0;for(let n=0;n<s.length;n++){const r=s[n];if(t[r]!==i[r]&&!Yr(e,r))return!0}return!1}function gg({vnode:i,parent:t},e){for(;t;){const s=t.subTree;if(s.suspense&&s.suspense.activeBranch===i&&(s.el=i.el),s===i)(i=t.vnode).el=e,t=t.parent;else break}}const Pr=i=>i.__isSuspense;function mg(i,t){t&&t.pendingBranch?nt(i)?t.effects.push(...i):t.effects.push(i):Rp(i)}const me=Symbol.for("v-fgt"),Xr=Symbol.for("v-txt"),ms=Symbol.for("v-cmt"),So=Symbol.for("v-stc"),mn=[];let we=null;function jt(i=!1){mn.push(we=i?null:[])}function _g(){mn.pop(),we=mn[mn.length-1]||null}let Cn=1;function Jl(i,t=!1){Cn+=i,i<0&&we&&t&&(we.hasOnce=!0)}function Fu(i){return i.dynamicChildren=Cn>0?we||Ei:null,_g(),Cn>0&&we&&we.push(i),i}function Qt(i,t,e,s,n,r){return Fu(lt(i,t,e,s,n,r,!0))}function ha(i,t,e,s,n){return Fu(Zt(i,t,e,s,n,!0))}function Tn(i){return i?i.__v_isVNode===!0:!1}function di(i,t){return i.type===t.type&&i.key===t.key}const $u=({key:i})=>i??null,gr=({ref:i,ref_key:t,ref_for:e})=>(typeof i=="number"&&(i=""+i),i!=null?Mt(i)||te(i)||at(i)?{i:Pe,r:i,k:t,f:!!e}:i:null);function lt(i,t=null,e=null,s=0,n=null,r=i===me?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:i,props:t,key:t&&$u(t),ref:t&&gr(t),scopeId:uu,slotScopeIds:null,children:e,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:r,patchFlag:s,dynamicProps:n,dynamicChildren:null,appContext:null,ctx:Pe};return a?(Qa(l,e),r&128&&i.normalize(l)):e&&(l.shapeFlag|=Mt(e)?8:16),Cn>0&&!o&&we&&(l.patchFlag>0||r&6)&&l.patchFlag!==32&&we.push(l),l}const Zt=bg;function bg(i,t=null,e=null,s=0,n=null,r=!1){if((!i||i===vu)&&(i=ms),Tn(i)){const a=Js(i,t,!0);return e&&Qa(a,e),Cn>0&&!r&&we&&(a.shapeFlag&6?we[we.indexOf(i)]=a:we.push(a)),a.patchFlag=-2,a}if(Pg(i)&&(i=i.__vccOpts),t){t=vg(t);let{class:a,style:l}=t;a&&!Mt(a)&&(t.class=Oi(a)),Pt(l)&&(Ka(l)&&!nt(l)&&(l=ee({},l)),t.style=Ha(l))}const o=Mt(i)?1:Pr(i)?128:Ip(i)?64:Pt(i)?4:at(i)?2:0;return lt(i,t,e,s,n,o,r,!0)}function vg(i){return i?Ka(i)||Tu(i)?ee({},i):i:null}function Js(i,t,e=!1,s=!1){const{props:n,ref:r,patchFlag:o,children:a,transition:l}=i,h=t?yg(n||{},t):n,c={__v_isVNode:!0,__v_skip:!0,type:i.type,props:h,key:h&&$u(h),ref:t&&t.ref?e&&r?nt(r)?r.concat(gr(t)):[r,gr(t)]:gr(t):r,scopeId:i.scopeId,slotScopeIds:i.slotScopeIds,children:a,target:i.target,targetStart:i.targetStart,targetAnchor:i.targetAnchor,staticCount:i.staticCount,shapeFlag:i.shapeFlag,patchFlag:t&&i.type!==me?o===-1?16:o|16:o,dynamicProps:i.dynamicProps,dynamicChildren:i.dynamicChildren,appContext:i.appContext,dirs:i.dirs,transition:l,component:i.component,suspense:i.suspense,ssContent:i.ssContent&&Js(i.ssContent),ssFallback:i.ssFallback&&Js(i.ssFallback),el:i.el,anchor:i.anchor,ctx:i.ctx,ce:i.ce};return l&&s&&Kr(c,l.clone(c)),c}function ua(i=" ",t=0){return Zt(Xr,null,i,t)}function Zl(i="",t=!1){return t?(jt(),ha(ms,null,i)):Zt(ms,null,i)}function Qe(i){return i==null||typeof i=="boolean"?Zt(ms):nt(i)?Zt(me,null,i.slice()):Tn(i)?Es(i):Zt(Xr,null,String(i))}function Es(i){return i.el===null&&i.patchFlag!==-1||i.memo?i:Js(i)}function Qa(i,t){let e=0;const{shapeFlag:s}=i;if(t==null)t=null;else if(nt(t))e=16;else if(typeof t=="object")if(s&65){const n=t.default;n&&(n._c&&(n._d=!1),Qa(i,n()),n._c&&(n._d=!0));return}else{e=32;const n=t._;!n&&!Tu(t)?t._ctx=Pe:n===3&&Pe&&(Pe.slots._===1?t._=1:(t._=2,i.patchFlag|=1024))}else at(t)?(t={default:t,_ctx:Pe},e=32):(t=String(t),s&64?(e=16,t=[ua(t)]):e=8);i.children=t,i.shapeFlag|=e}function yg(...i){const t={};for(let e=0;e<i.length;e++){const s=i[e];for(const n in s)if(n==="class")t.class!==s.class&&(t.class=Oi([t.class,s.class]));else if(n==="style")t.style=Ha([t.style,s.style]);else if(Hr(n)){const r=t[n],o=s[n];o&&r!==o&&!(nt(r)&&r.includes(o))&&(t[n]=r?[].concat(r,o):o)}else n!==""&&(t[n]=s[n])}return t}function xe(i,t,e,s=null){es(i,t,7,[e,s])}const Ag=Eu();let wg=0;function Eg(i,t,e){const s=i.type,n=(t?t.appContext:i.appContext)||Ag,r={uid:wg++,vnode:i,type:s,parent:t,appContext:n,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Jf(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(n.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Ru(s,n),emitsOptions:Nu(s,n),emit:null,emitted:null,propsDefaults:Ct,inheritAttrs:s.inheritAttrs,ctx:Ct,data:Ct,props:Ct,attrs:Ct,slots:Ct,refs:Ct,setupState:Ct,setupContext:null,suspense:e,suspenseId:e?e.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return r.ctx={_:r},r.root=t?t.root:r,r.emit=ug.bind(null,r),i.ce&&i.ce(r),r}let qt=null;const Sg=()=>qt||Pe;let Ir,da;{const i=Ur(),t=(e,s)=>{let n;return(n=i[e])||(n=i[e]=[]),n.push(s),r=>{n.length>1?n.forEach(o=>o(r)):n[0](r)}};Ir=t("__VUE_INSTANCE_SETTERS__",e=>qt=e),da=t("__VUE_SSR_SETTERS__",e=>xn=e)}const Fn=i=>{const t=qt;return Ir(i),i.scope.on(),()=>{i.scope.off(),Ir(t)}},tc=()=>{qt&&qt.scope.off(),Ir(null)};function Bu(i){return i.vnode.shapeFlag&4}let xn=!1;function Cg(i,t=!1,e=!1){t&&da(t);const{props:s,children:n}=i.vnode,r=Bu(i);Qp(i,s,r,t),eg(i,n,e||t);const o=r?Tg(i,t):void 0;return t&&da(!1),o}function Tg(i,t){const e=i.type;i.accessCache=Object.create(null),i.proxy=new Proxy(i.ctx,Up);const{setup:s}=e;if(s){ps();const n=i.setupContext=s.length>1?Rg(i):null,r=Fn(i),o=On(s,i,0,[i.props,n]),a=Nh(o);if(gs(),r(),(a||i.sp)&&!Ri(i)&&du(i),a){if(o.then(tc,tc),t)return o.then(l=>{ec(i,l)}).catch(l=>{Gr(l,i,0)});i.asyncDep=o}else ec(i,o)}else Hu(i)}function ec(i,t,e){at(t)?i.type.__ssrInlineRender?i.ssrRender=t:i.render=t:Pt(t)&&(i.setupState=ru(t)),Hu(i)}function Hu(i,t,e){const s=i.type;i.render||(i.render=s.render||Je);{const n=Fn(i);ps();try{Wp(i)}finally{gs(),n()}}}const xg={get(i,t){return Jt(i,"get",""),i[t]}};function Rg(i){const t=e=>{i.exposed=e||{}};return{attrs:new Proxy(i.attrs,xg),slots:i.slots,emit:i.emit,expose:t}}function Ja(i){return i.exposed?i.exposeProxy||(i.exposeProxy=new Proxy(ru(bp(i.exposed)),{get(t,e){if(e in t)return t[e];if(e in gn)return gn[e](i)},has(t,e){return e in t||e in gn}})):i.proxy}function fa(i,t=!0){return at(i)?i.displayName||i.name:i.name||t&&i.__name}function Pg(i){return at(i)&&"__vccOpts"in i}const _e=(i,t)=>Ep(i,t,xn);function Vu(i,t,e){const s=arguments.length;return s===2?Pt(t)&&!nt(t)?Tn(t)?Zt(i,null,[t]):Zt(i,t):Zt(i,null,t):(s>3?e=Array.prototype.slice.call(arguments,2):s===3&&Tn(e)&&(e=[e]),Zt(i,t,e))}const Ig="3.5.17";/**
* @vue/runtime-dom v3.5.17
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let pa;const sc=typeof window<"u"&&window.trustedTypes;if(sc)try{pa=sc.createPolicy("vue",{createHTML:i=>i})}catch{}const ju=pa?i=>pa.createHTML(i):i=>i,Lg="http://www.w3.org/2000/svg",Mg="http://www.w3.org/1998/Math/MathML",as=typeof document<"u"?document:null,ic=as&&as.createElement("template"),kg={insert:(i,t,e)=>{t.insertBefore(i,e||null)},remove:i=>{const t=i.parentNode;t&&t.removeChild(i)},createElement:(i,t,e,s)=>{const n=t==="svg"?as.createElementNS(Lg,i):t==="mathml"?as.createElementNS(Mg,i):e?as.createElement(i,{is:e}):as.createElement(i);return i==="select"&&s&&s.multiple!=null&&n.setAttribute("multiple",s.multiple),n},createText:i=>as.createTextNode(i),createComment:i=>as.createComment(i),setText:(i,t)=>{i.nodeValue=t},setElementText:(i,t)=>{i.textContent=t},parentNode:i=>i.parentNode,nextSibling:i=>i.nextSibling,querySelector:i=>as.querySelector(i),setScopeId(i,t){i.setAttribute(t,"")},insertStaticContent(i,t,e,s,n,r){const o=e?e.previousSibling:t.lastChild;if(n&&(n===r||n.nextSibling))for(;t.insertBefore(n.cloneNode(!0),e),!(n===r||!(n=n.nextSibling)););else{ic.innerHTML=ju(s==="svg"?`<svg>${i}</svg>`:s==="mathml"?`<math>${i}</math>`:i);const a=ic.content;if(s==="svg"||s==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}t.insertBefore(a,e)}return[o?o.nextSibling:t.firstChild,e?e.previousSibling:t.lastChild]}},Og=Symbol("_vtc");function Dg(i,t,e){const s=i[Og];s&&(t=(t?[t,...s]:[...s]).join(" ")),t==null?i.removeAttribute("class"):e?i.setAttribute("class",t):i.className=t}const nc=Symbol("_vod"),Ng=Symbol("_vsh"),Fg=Symbol(""),$g=/(^|;)\s*display\s*:/;function Bg(i,t,e){const s=i.style,n=Mt(e);let r=!1;if(e&&!n){if(t)if(Mt(t))for(const o of t.split(";")){const a=o.slice(0,o.indexOf(":")).trim();e[a]==null&&mr(s,a,"")}else for(const o in t)e[o]==null&&mr(s,o,"");for(const o in e)o==="display"&&(r=!0),mr(s,o,e[o])}else if(n){if(t!==e){const o=s[Fg];o&&(e+=";"+o),s.cssText=e,r=$g.test(e)}}else t&&i.removeAttribute("style");nc in i&&(i[nc]=r?s.display:"",i[Ng]&&(s.display="none"))}const rc=/\s*!important$/;function mr(i,t,e){if(nt(e))e.forEach(s=>mr(i,t,s));else if(e==null&&(e=""),t.startsWith("--"))i.setProperty(t,e);else{const s=Hg(i,t);rc.test(e)?i.setProperty(ii(s),e.replace(rc,""),"important"):i[s]=e}}const oc=["Webkit","Moz","ms"],Co={};function Hg(i,t){const e=Co[t];if(e)return e;let s=Me(t);if(s!=="filter"&&s in i)return Co[t]=s;s=jr(s);for(let n=0;n<oc.length;n++){const r=oc[n]+s;if(r in i)return Co[t]=r}return t}const ac="http://www.w3.org/1999/xlink";function lc(i,t,e,s,n,r=Qf(t)){s&&t.startsWith("xlink:")?e==null?i.removeAttributeNS(ac,t.slice(6,t.length)):i.setAttributeNS(ac,t,e):e==null||r&&!Bh(e)?i.removeAttribute(t):i.setAttribute(t,r?"":Ds(e)?String(e):e)}function cc(i,t,e,s,n){if(t==="innerHTML"||t==="textContent"){e!=null&&(i[t]=t==="innerHTML"?ju(e):e);return}const r=i.tagName;if(t==="value"&&r!=="PROGRESS"&&!r.includes("-")){const a=r==="OPTION"?i.getAttribute("value")||"":i.value,l=e==null?i.type==="checkbox"?"on":"":String(e);(a!==l||!("_value"in i))&&(i.value=l),e==null&&i.removeAttribute(t),i._value=e;return}let o=!1;if(e===""||e==null){const a=typeof i[t];a==="boolean"?e=Bh(e):e==null&&a==="string"?(e="",o=!0):a==="number"&&(e=0,o=!0)}try{i[t]=e}catch{}o&&i.removeAttribute(n||t)}function Vg(i,t,e,s){i.addEventListener(t,e,s)}function jg(i,t,e,s){i.removeEventListener(t,e,s)}const hc=Symbol("_vei");function Ug(i,t,e,s,n=null){const r=i[hc]||(i[hc]={}),o=r[t];if(s&&o)o.value=s;else{const[a,l]=Wg(t);if(s){const h=r[t]=Kg(s,n);Vg(i,a,h,l)}else o&&(jg(i,a,o,l),r[t]=void 0)}}const uc=/(?:Once|Passive|Capture)$/;function Wg(i){let t;if(uc.test(i)){t={};let s;for(;s=i.match(uc);)i=i.slice(0,i.length-s[0].length),t[s[0].toLowerCase()]=!0}return[i[2]===":"?i.slice(3):ii(i.slice(2)),t]}let To=0;const zg=Promise.resolve(),Gg=()=>To||(zg.then(()=>To=0),To=Date.now());function Kg(i,t){const e=s=>{if(!s._vts)s._vts=Date.now();else if(s._vts<=e.attached)return;es(qg(s,e.value),t,5,[s])};return e.value=i,e.attached=Gg(),e}function qg(i,t){if(nt(t)){const e=i.stopImmediatePropagation;return i.stopImmediatePropagation=()=>{e.call(i),i._stopped=!0},t.map(s=>n=>!n._stopped&&s&&s(n))}else return t}const dc=i=>i.charCodeAt(0)===111&&i.charCodeAt(1)===110&&i.charCodeAt(2)>96&&i.charCodeAt(2)<123,Yg=(i,t,e,s,n,r)=>{const o=n==="svg";t==="class"?Dg(i,s,o):t==="style"?Bg(i,e,s):Hr(t)?Fa(t)||Ug(i,t,e,s,r):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):Xg(i,t,s,o))?(cc(i,t,s),!i.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&lc(i,t,s,o,r,t!=="value")):i._isVueCE&&(/[A-Z]/.test(t)||!Mt(s))?cc(i,Me(t),s,r,t):(t==="true-value"?i._trueValue=s:t==="false-value"&&(i._falseValue=s),lc(i,t,s,o))};function Xg(i,t,e,s){if(s)return!!(t==="innerHTML"||t==="textContent"||t in i&&dc(t)&&at(e));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="autocorrect"||t==="form"||t==="list"&&i.tagName==="INPUT"||t==="type"&&i.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const n=i.tagName;if(n==="IMG"||n==="VIDEO"||n==="CANVAS"||n==="SOURCE")return!1}return dc(t)&&Mt(e)?!1:t in i}const Qg=["ctrl","shift","alt","meta"],Jg={stop:i=>i.stopPropagation(),prevent:i=>i.preventDefault(),self:i=>i.target!==i.currentTarget,ctrl:i=>!i.ctrlKey,shift:i=>!i.shiftKey,alt:i=>!i.altKey,meta:i=>!i.metaKey,left:i=>"button"in i&&i.button!==0,middle:i=>"button"in i&&i.button!==1,right:i=>"button"in i&&i.button!==2,exact:(i,t)=>Qg.some(e=>i[`${e}Key`]&&!t.includes(e))},fc=(i,t)=>{const e=i._withMods||(i._withMods={}),s=t.join(".");return e[s]||(e[s]=(n,...r)=>{for(let o=0;o<t.length;o++){const a=Jg[t[o]];if(a&&a(n,t))return}return i(n,...r)})},Zg=ee({patchProp:Yg},kg);let pc;function tm(){return pc||(pc=ig(Zg))}const em=(...i)=>{const t=tm().createApp(...i),{mount:e}=t;return t.mount=s=>{const n=im(s);if(!n)return;const r=t._component;!at(r)&&!r.render&&!r.template&&(r.template=n.innerHTML),n.nodeType===1&&(n.textContent="");const o=e(n,!1,sm(n));return n instanceof Element&&(n.removeAttribute("v-cloak"),n.setAttribute("data-v-app","")),o},t};function sm(i){if(i instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&i instanceof MathMLElement)return"mathml"}function im(i){return Mt(i)?document.querySelector(i):i}const Xs=Ys(!1);function nm(){localStorage.getItem("theme")==="dark"&&(document.body.classList.add("dark"),Xs.value=!0)}function Lr(){Xs.value=!Xs.value,Xs.value?(document.body.classList.add("dark"),localStorage.setItem("theme","dark")):(document.body.classList.remove("dark"),localStorage.setItem("theme","light"))}const Uu=Ys("text-normal");function rm(){const i=localStorage.getItem("fontSize");i?(Uu.value=i,ga(i)):ga("text-normal")}function Zn(i){Uu.value=i,localStorage.setItem("fontSize",i),ga(i)}function ga(i){document.body.classList.remove("text-normal","text-large","text-x-large","text-xx-large"),document.body.classList.add(i)}const om={class:"navigation"},am={class:"navbar navbar-expand-lg bg-jessa-top"},lm={class:"container-fluid"},cm={key:0},hm={key:1},um={class:"dropdown ms-2"},dm={class:"dropdown-menu"},fm={class:"container-fluid"},pm={class:"row flex-nowrap"},gm={class:"col py-3"},mm={class:"footer mt-auto py-3 bg-light"},_m={class:"container text-center"},bm="v1.2.0",vm=Dn({__name:"App",setup(i){Nn(()=>{nm(),rm()});const t=(()=>{const e=new Date().getFullYear();return e===2025?"2025":`2025 - ${e}`})();return(e,s)=>{const n=Ul("router-link"),r=Ul("router-view");return jt(),Qt(me,null,[lt("header",null,[lt("div",om,[lt("nav",am,[lt("div",lm,[Zt(n,{class:"navbar-brand",to:"/"},{default:ra(()=>s[5]||(s[5]=[ua("SORA")])),_:1,__:[5]}),lt("div",null,[lt("button",{class:"btn btn-light",onClick:s[0]||(s[0]=(...o)=>Ut(Lr)&&Ut(Lr)(...o))},[Ut(Xs)?(jt(),Qt("span",cm,"Lichte modus")):(jt(),Qt("span",hm,"Donkere modus"))])]),lt("div",um,[s[6]||(s[6]=lt("button",{class:"btn btn-light dropdown-toggle",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"}," Lettergrootte ",-1)),lt("ul",dm,[lt("li",null,[lt("a",{class:"dropdown-item",onClick:s[1]||(s[1]=o=>Ut(Zn)("text-normal"))},"Normaal")]),lt("li",null,[lt("a",{class:"dropdown-item",onClick:s[2]||(s[2]=o=>Ut(Zn)("text-large"))},"Groot")]),lt("li",null,[lt("a",{class:"dropdown-item",onClick:s[3]||(s[3]=o=>Ut(Zn)("text-x-large"))},"Extra groot")]),lt("li",null,[lt("a",{class:"dropdown-item",onClick:s[4]||(s[4]=o=>Ut(Zn)("text-xx-large"))},"Zeer groot")])])])])])])]),lt("div",fm,[lt("div",pm,[lt("div",gm,[Zt(r,null,{default:ra(({Component:o})=>[(jt(),ha(Mp,null,[(jt(),ha(jp(o)))],1024))]),_:1})])])]),lt("footer",mm,[lt("div",_m,[s[7]||(s[7]=lt("b",null,"SORA",-1)),ua(" |  Jessa Ziekenhuis "+Ci(Ut(t))+" | "+Ci(bm),1)])])],64)}}});/*!
  * vue-router v4.5.1
  * (c) 2025 Eduardo San Martin Morote
  * @license MIT
  */const fi=typeof document<"u";function Wu(i){return typeof i=="object"||"displayName"in i||"props"in i||"__vccOpts"in i}function ym(i){return i.__esModule||i[Symbol.toStringTag]==="Module"||i.default&&Wu(i.default)}const _t=Object.assign;function xo(i,t){const e={};for(const s in t){const n=t[s];e[s]=$e(n)?n.map(i):i(n)}return e}const _n=()=>{},$e=Array.isArray,zu=/#/g,Am=/&/g,wm=/\//g,Em=/=/g,Sm=/\?/g,Gu=/\+/g,Cm=/%5B/g,Tm=/%5D/g,Ku=/%5E/g,xm=/%60/g,qu=/%7B/g,Rm=/%7C/g,Yu=/%7D/g,Pm=/%20/g;function Za(i){return encodeURI(""+i).replace(Rm,"|").replace(Cm,"[").replace(Tm,"]")}function Im(i){return Za(i).replace(qu,"{").replace(Yu,"}").replace(Ku,"^")}function ma(i){return Za(i).replace(Gu,"%2B").replace(Pm,"+").replace(zu,"%23").replace(Am,"%26").replace(xm,"`").replace(qu,"{").replace(Yu,"}").replace(Ku,"^")}function Lm(i){return ma(i).replace(Em,"%3D")}function Mm(i){return Za(i).replace(zu,"%23").replace(Sm,"%3F")}function km(i){return i==null?"":Mm(i).replace(wm,"%2F")}function Rn(i){try{return decodeURIComponent(""+i)}catch{}return""+i}const Om=/\/$/,Dm=i=>i.replace(Om,"");function Ro(i,t,e="/"){let s,n={},r="",o="";const a=t.indexOf("#");let l=t.indexOf("?");return a<l&&a>=0&&(l=-1),l>-1&&(s=t.slice(0,l),r=t.slice(l+1,a>-1?a:t.length),n=i(r)),a>-1&&(s=s||t.slice(0,a),o=t.slice(a,t.length)),s=Bm(s??t,e),{fullPath:s+(r&&"?")+r+o,path:s,query:n,hash:Rn(o)}}function Nm(i,t){const e=t.query?i(t.query):"";return t.path+(e&&"?")+e+(t.hash||"")}function gc(i,t){return!t||!i.toLowerCase().startsWith(t.toLowerCase())?i:i.slice(t.length)||"/"}function Fm(i,t,e){const s=t.matched.length-1,n=e.matched.length-1;return s>-1&&s===n&&Di(t.matched[s],e.matched[n])&&Xu(t.params,e.params)&&i(t.query)===i(e.query)&&t.hash===e.hash}function Di(i,t){return(i.aliasOf||i)===(t.aliasOf||t)}function Xu(i,t){if(Object.keys(i).length!==Object.keys(t).length)return!1;for(const e in i)if(!$m(i[e],t[e]))return!1;return!0}function $m(i,t){return $e(i)?mc(i,t):$e(t)?mc(t,i):i===t}function mc(i,t){return $e(t)?i.length===t.length&&i.every((e,s)=>e===t[s]):i.length===1&&i[0]===t}function Bm(i,t){if(i.startsWith("/"))return i;if(!i)return t;const e=t.split("/"),s=i.split("/"),n=s[s.length-1];(n===".."||n===".")&&s.push("");let r=e.length-1,o,a;for(o=0;o<s.length;o++)if(a=s[o],a!==".")if(a==="..")r>1&&r--;else break;return e.slice(0,r).join("/")+"/"+s.slice(o).join("/")}const ys={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var Pn;(function(i){i.pop="pop",i.push="push"})(Pn||(Pn={}));var bn;(function(i){i.back="back",i.forward="forward",i.unknown=""})(bn||(bn={}));function Hm(i){if(!i)if(fi){const t=document.querySelector("base");i=t&&t.getAttribute("href")||"/",i=i.replace(/^\w+:\/\/[^\/]+/,"")}else i="/";return i[0]!=="/"&&i[0]!=="#"&&(i="/"+i),Dm(i)}const Vm=/^[^#]+#/;function jm(i,t){return i.replace(Vm,"#")+t}function Um(i,t){const e=document.documentElement.getBoundingClientRect(),s=i.getBoundingClientRect();return{behavior:t.behavior,left:s.left-e.left-(t.left||0),top:s.top-e.top-(t.top||0)}}const Qr=()=>({left:window.scrollX,top:window.scrollY});function Wm(i){let t;if("el"in i){const e=i.el,s=typeof e=="string"&&e.startsWith("#"),n=typeof e=="string"?s?document.getElementById(e.slice(1)):document.querySelector(e):e;if(!n)return;t=Um(n,i)}else t=i;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.scrollX,t.top!=null?t.top:window.scrollY)}function _c(i,t){return(history.state?history.state.position-t:-1)+i}const _a=new Map;function zm(i,t){_a.set(i,t)}function Gm(i){const t=_a.get(i);return _a.delete(i),t}let Km=()=>location.protocol+"//"+location.host;function Qu(i,t){const{pathname:e,search:s,hash:n}=t,r=i.indexOf("#");if(r>-1){let a=n.includes(i.slice(r))?i.slice(r).length:1,l=n.slice(a);return l[0]!=="/"&&(l="/"+l),gc(l,"")}return gc(e,i)+s+n}function qm(i,t,e,s){let n=[],r=[],o=null;const a=({state:d})=>{const f=Qu(i,location),g=e.value,p=t.value;let _=0;if(d){if(e.value=f,t.value=d,o&&o===g){o=null;return}_=p?d.position-p.position:0}else s(f);n.forEach(m=>{m(e.value,g,{delta:_,type:Pn.pop,direction:_?_>0?bn.forward:bn.back:bn.unknown})})};function l(){o=e.value}function h(d){n.push(d);const f=()=>{const g=n.indexOf(d);g>-1&&n.splice(g,1)};return r.push(f),f}function c(){const{history:d}=window;d.state&&d.replaceState(_t({},d.state,{scroll:Qr()}),"")}function u(){for(const d of r)d();r=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",c)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",c,{passive:!0}),{pauseListeners:l,listen:h,destroy:u}}function bc(i,t,e,s=!1,n=!1){return{back:i,current:t,forward:e,replaced:s,position:window.history.length,scroll:n?Qr():null}}function Ym(i){const{history:t,location:e}=window,s={value:Qu(i,e)},n={value:t.state};n.value||r(s.value,{back:null,current:s.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function r(l,h,c){const u=i.indexOf("#"),d=u>-1?(e.host&&document.querySelector("base")?i:i.slice(u))+l:Km()+i+l;try{t[c?"replaceState":"pushState"](h,"",d),n.value=h}catch(f){console.error(f),e[c?"replace":"assign"](d)}}function o(l,h){const c=_t({},t.state,bc(n.value.back,l,n.value.forward,!0),h,{position:n.value.position});r(l,c,!0),s.value=l}function a(l,h){const c=_t({},n.value,t.state,{forward:l,scroll:Qr()});r(c.current,c,!0);const u=_t({},bc(s.value,l,null),{position:c.position+1},h);r(l,u,!1),s.value=l}return{location:s,state:n,push:a,replace:o}}function Xm(i){i=Hm(i);const t=Ym(i),e=qm(i,t.state,t.location,t.replace);function s(r,o=!0){o||e.pauseListeners(),history.go(r)}const n=_t({location:"",base:i,go:s,createHref:jm.bind(null,i)},t,e);return Object.defineProperty(n,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(n,"state",{enumerable:!0,get:()=>t.state.value}),n}function Qm(i){return typeof i=="string"||i&&typeof i=="object"}function Ju(i){return typeof i=="string"||typeof i=="symbol"}const Zu=Symbol("");var vc;(function(i){i[i.aborted=4]="aborted",i[i.cancelled=8]="cancelled",i[i.duplicated=16]="duplicated"})(vc||(vc={}));function Ni(i,t){return _t(new Error,{type:i,[Zu]:!0},t)}function rs(i,t){return i instanceof Error&&Zu in i&&(t==null||!!(i.type&t))}const yc="[^/]+?",Jm={sensitive:!1,strict:!1,start:!0,end:!0},Zm=/[.+*?^${}()[\]/\\]/g;function t_(i,t){const e=_t({},Jm,t),s=[];let n=e.start?"^":"";const r=[];for(const h of i){const c=h.length?[]:[90];e.strict&&!h.length&&(n+="/");for(let u=0;u<h.length;u++){const d=h[u];let f=40+(e.sensitive?.25:0);if(d.type===0)u||(n+="/"),n+=d.value.replace(Zm,"\\$&"),f+=40;else if(d.type===1){const{value:g,repeatable:p,optional:_,regexp:m}=d;r.push({name:g,repeatable:p,optional:_});const y=m||yc;if(y!==yc){f+=10;try{new RegExp(`(${y})`)}catch(b){throw new Error(`Invalid custom RegExp for param "${g}" (${y}): `+b.message)}}let v=p?`((?:${y})(?:/(?:${y}))*)`:`(${y})`;u||(v=_&&h.length<2?`(?:/${v})`:"/"+v),_&&(v+="?"),n+=v,f+=20,_&&(f+=-8),p&&(f+=-20),y===".*"&&(f+=-50)}c.push(f)}s.push(c)}if(e.strict&&e.end){const h=s.length-1;s[h][s[h].length-1]+=.7000000000000001}e.strict||(n+="/?"),e.end?n+="$":e.strict&&!n.endsWith("/")&&(n+="(?:/|$)");const o=new RegExp(n,e.sensitive?"":"i");function a(h){const c=h.match(o),u={};if(!c)return null;for(let d=1;d<c.length;d++){const f=c[d]||"",g=r[d-1];u[g.name]=f&&g.repeatable?f.split("/"):f}return u}function l(h){let c="",u=!1;for(const d of i){(!u||!c.endsWith("/"))&&(c+="/"),u=!1;for(const f of d)if(f.type===0)c+=f.value;else if(f.type===1){const{value:g,repeatable:p,optional:_}=f,m=g in h?h[g]:"";if($e(m)&&!p)throw new Error(`Provided param "${g}" is an array but it is not repeatable (* or + modifiers)`);const y=$e(m)?m.join("/"):m;if(!y)if(_)d.length<2&&(c.endsWith("/")?c=c.slice(0,-1):u=!0);else throw new Error(`Missing required param "${g}"`);c+=y}}return c||"/"}return{re:o,score:s,keys:r,parse:a,stringify:l}}function e_(i,t){let e=0;for(;e<i.length&&e<t.length;){const s=t[e]-i[e];if(s)return s;e++}return i.length<t.length?i.length===1&&i[0]===80?-1:1:i.length>t.length?t.length===1&&t[0]===80?1:-1:0}function td(i,t){let e=0;const s=i.score,n=t.score;for(;e<s.length&&e<n.length;){const r=e_(s[e],n[e]);if(r)return r;e++}if(Math.abs(n.length-s.length)===1){if(Ac(s))return 1;if(Ac(n))return-1}return n.length-s.length}function Ac(i){const t=i[i.length-1];return i.length>0&&t[t.length-1]<0}const s_={type:0,value:""},i_=/[a-zA-Z0-9_]/;function n_(i){if(!i)return[[]];if(i==="/")return[[s_]];if(!i.startsWith("/"))throw new Error(`Invalid path "${i}"`);function t(f){throw new Error(`ERR (${e})/"${h}": ${f}`)}let e=0,s=e;const n=[];let r;function o(){r&&n.push(r),r=[]}let a=0,l,h="",c="";function u(){h&&(e===0?r.push({type:0,value:h}):e===1||e===2||e===3?(r.length>1&&(l==="*"||l==="+")&&t(`A repeatable param (${h}) must be alone in its segment. eg: '/:ids+.`),r.push({type:1,value:h,regexp:c,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):t("Invalid state to consume buffer"),h="")}function d(){h+=l}for(;a<i.length;){if(l=i[a++],l==="\\"&&e!==2){s=e,e=4;continue}switch(e){case 0:l==="/"?(h&&u(),o()):l===":"?(u(),e=1):d();break;case 4:d(),e=s;break;case 1:l==="("?e=2:i_.test(l)?d():(u(),e=0,l!=="*"&&l!=="?"&&l!=="+"&&a--);break;case 2:l===")"?c[c.length-1]=="\\"?c=c.slice(0,-1)+l:e=3:c+=l;break;case 3:u(),e=0,l!=="*"&&l!=="?"&&l!=="+"&&a--,c="";break;default:t("Unknown state");break}}return e===2&&t(`Unfinished custom RegExp for param "${h}"`),u(),o(),n}function r_(i,t,e){const s=t_(n_(i.path),e),n=_t(s,{record:i,parent:t,children:[],alias:[]});return t&&!n.record.aliasOf==!t.record.aliasOf&&t.children.push(n),n}function o_(i,t){const e=[],s=new Map;t=Cc({strict:!1,end:!0,sensitive:!1},t);function n(u){return s.get(u)}function r(u,d,f){const g=!f,p=Ec(u);p.aliasOf=f&&f.record;const _=Cc(t,u),m=[p];if("alias"in u){const b=typeof u.alias=="string"?[u.alias]:u.alias;for(const E of b)m.push(Ec(_t({},p,{components:f?f.record.components:p.components,path:E,aliasOf:f?f.record:p})))}let y,v;for(const b of m){const{path:E}=b;if(d&&E[0]!=="/"){const S=d.record.path,T=S[S.length-1]==="/"?"":"/";b.path=d.record.path+(E&&T+E)}if(y=r_(b,d,_),f?f.alias.push(y):(v=v||y,v!==y&&v.alias.push(y),g&&u.name&&!Sc(y)&&o(u.name)),ed(y)&&l(y),p.children){const S=p.children;for(let T=0;T<S.length;T++)r(S[T],y,f&&f.children[T])}f=f||y}return v?()=>{o(v)}:_n}function o(u){if(Ju(u)){const d=s.get(u);d&&(s.delete(u),e.splice(e.indexOf(d),1),d.children.forEach(o),d.alias.forEach(o))}else{const d=e.indexOf(u);d>-1&&(e.splice(d,1),u.record.name&&s.delete(u.record.name),u.children.forEach(o),u.alias.forEach(o))}}function a(){return e}function l(u){const d=c_(u,e);e.splice(d,0,u),u.record.name&&!Sc(u)&&s.set(u.record.name,u)}function h(u,d){let f,g={},p,_;if("name"in u&&u.name){if(f=s.get(u.name),!f)throw Ni(1,{location:u});_=f.record.name,g=_t(wc(d.params,f.keys.filter(v=>!v.optional).concat(f.parent?f.parent.keys.filter(v=>v.optional):[]).map(v=>v.name)),u.params&&wc(u.params,f.keys.map(v=>v.name))),p=f.stringify(g)}else if(u.path!=null)p=u.path,f=e.find(v=>v.re.test(p)),f&&(g=f.parse(p),_=f.record.name);else{if(f=d.name?s.get(d.name):e.find(v=>v.re.test(d.path)),!f)throw Ni(1,{location:u,currentLocation:d});_=f.record.name,g=_t({},d.params,u.params),p=f.stringify(g)}const m=[];let y=f;for(;y;)m.unshift(y.record),y=y.parent;return{name:_,path:p,params:g,matched:m,meta:l_(m)}}i.forEach(u=>r(u));function c(){e.length=0,s.clear()}return{addRoute:r,resolve:h,removeRoute:o,clearRoutes:c,getRoutes:a,getRecordMatcher:n}}function wc(i,t){const e={};for(const s of t)s in i&&(e[s]=i[s]);return e}function Ec(i){const t={path:i.path,redirect:i.redirect,name:i.name,meta:i.meta||{},aliasOf:i.aliasOf,beforeEnter:i.beforeEnter,props:a_(i),children:i.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in i?i.components||null:i.component&&{default:i.component}};return Object.defineProperty(t,"mods",{value:{}}),t}function a_(i){const t={},e=i.props||!1;if("component"in i)t.default=e;else for(const s in i.components)t[s]=typeof e=="object"?e[s]:e;return t}function Sc(i){for(;i;){if(i.record.aliasOf)return!0;i=i.parent}return!1}function l_(i){return i.reduce((t,e)=>_t(t,e.meta),{})}function Cc(i,t){const e={};for(const s in i)e[s]=s in t?t[s]:i[s];return e}function c_(i,t){let e=0,s=t.length;for(;e!==s;){const r=e+s>>1;td(i,t[r])<0?s=r:e=r+1}const n=h_(i);return n&&(s=t.lastIndexOf(n,s-1)),s}function h_(i){let t=i;for(;t=t.parent;)if(ed(t)&&td(i,t)===0)return t}function ed({record:i}){return!!(i.name||i.components&&Object.keys(i.components).length||i.redirect)}function u_(i){const t={};if(i===""||i==="?")return t;const s=(i[0]==="?"?i.slice(1):i).split("&");for(let n=0;n<s.length;++n){const r=s[n].replace(Gu," "),o=r.indexOf("="),a=Rn(o<0?r:r.slice(0,o)),l=o<0?null:Rn(r.slice(o+1));if(a in t){let h=t[a];$e(h)||(h=t[a]=[h]),h.push(l)}else t[a]=l}return t}function Tc(i){let t="";for(let e in i){const s=i[e];if(e=Lm(e),s==null){s!==void 0&&(t+=(t.length?"&":"")+e);continue}($e(s)?s.map(r=>r&&ma(r)):[s&&ma(s)]).forEach(r=>{r!==void 0&&(t+=(t.length?"&":"")+e,r!=null&&(t+="="+r))})}return t}function d_(i){const t={};for(const e in i){const s=i[e];s!==void 0&&(t[e]=$e(s)?s.map(n=>n==null?null:""+n):s==null?s:""+s)}return t}const f_=Symbol(""),xc=Symbol(""),tl=Symbol(""),sd=Symbol(""),ba=Symbol("");function Qi(){let i=[];function t(s){return i.push(s),()=>{const n=i.indexOf(s);n>-1&&i.splice(n,1)}}function e(){i=[]}return{add:t,list:()=>i.slice(),reset:e}}function Ss(i,t,e,s,n,r=o=>o()){const o=s&&(s.enterCallbacks[n]=s.enterCallbacks[n]||[]);return()=>new Promise((a,l)=>{const h=d=>{d===!1?l(Ni(4,{from:e,to:t})):d instanceof Error?l(d):Qm(d)?l(Ni(2,{from:t,to:d})):(o&&s.enterCallbacks[n]===o&&typeof d=="function"&&o.push(d),a())},c=r(()=>i.call(s&&s.instances[n],t,e,h));let u=Promise.resolve(c);i.length<3&&(u=u.then(h)),u.catch(d=>l(d))})}function Po(i,t,e,s,n=r=>r()){const r=[];for(const o of i)for(const a in o.components){let l=o.components[a];if(!(t!=="beforeRouteEnter"&&!o.instances[a]))if(Wu(l)){const c=(l.__vccOpts||l)[t];c&&r.push(Ss(c,e,s,o,a,n))}else{let h=l();r.push(()=>h.then(c=>{if(!c)throw new Error(`Couldn't resolve component "${a}" at "${o.path}"`);const u=ym(c)?c.default:c;o.mods[a]=c,o.components[a]=u;const f=(u.__vccOpts||u)[t];return f&&Ss(f,e,s,o,a,n)()}))}}return r}function Rc(i){const t=us(tl),e=us(sd),s=_e(()=>{const l=Ut(i.to);return t.resolve(l)}),n=_e(()=>{const{matched:l}=s.value,{length:h}=l,c=l[h-1],u=e.matched;if(!c||!u.length)return-1;const d=u.findIndex(Di.bind(null,c));if(d>-1)return d;const f=Pc(l[h-2]);return h>1&&Pc(c)===f&&u[u.length-1].path!==f?u.findIndex(Di.bind(null,l[h-2])):d}),r=_e(()=>n.value>-1&&b_(e.params,s.value.params)),o=_e(()=>n.value>-1&&n.value===e.matched.length-1&&Xu(e.params,s.value.params));function a(l={}){if(__(l)){const h=t[Ut(i.replace)?"replace":"push"](Ut(i.to)).catch(_n);return i.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>h),h}return Promise.resolve()}return{route:s,href:_e(()=>s.value.href),isActive:r,isExactActive:o,navigate:a}}function p_(i){return i.length===1?i[0]:i}const g_=Dn({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:Rc,setup(i,{slots:t}){const e=zr(Rc(i)),{options:s}=us(tl),n=_e(()=>({[Ic(i.activeClass,s.linkActiveClass,"router-link-active")]:e.isActive,[Ic(i.exactActiveClass,s.linkExactActiveClass,"router-link-exact-active")]:e.isExactActive}));return()=>{const r=t.default&&p_(t.default(e));return i.custom?r:Vu("a",{"aria-current":e.isExactActive?i.ariaCurrentValue:null,href:e.href,onClick:e.navigate,class:n.value},r)}}}),m_=g_;function __(i){if(!(i.metaKey||i.altKey||i.ctrlKey||i.shiftKey)&&!i.defaultPrevented&&!(i.button!==void 0&&i.button!==0)){if(i.currentTarget&&i.currentTarget.getAttribute){const t=i.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return i.preventDefault&&i.preventDefault(),!0}}function b_(i,t){for(const e in t){const s=t[e],n=i[e];if(typeof s=="string"){if(s!==n)return!1}else if(!$e(n)||n.length!==s.length||s.some((r,o)=>r!==n[o]))return!1}return!0}function Pc(i){return i?i.aliasOf?i.aliasOf.path:i.path:""}const Ic=(i,t,e)=>i??t??e,v_=Dn({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(i,{attrs:t,slots:e}){const s=us(ba),n=_e(()=>i.route||s.value),r=us(xc,0),o=_e(()=>{let h=Ut(r);const{matched:c}=n.value;let u;for(;(u=c[h])&&!u.components;)h++;return h}),a=_e(()=>n.value.matched[o.value]);pr(xc,_e(()=>o.value+1)),pr(f_,a),pr(ba,n);const l=Ys();return Ii(()=>[l.value,a.value,i.name],([h,c,u],[d,f,g])=>{c&&(c.instances[u]=h,f&&f!==c&&h&&h===d&&(c.leaveGuards.size||(c.leaveGuards=f.leaveGuards),c.updateGuards.size||(c.updateGuards=f.updateGuards))),h&&c&&(!f||!Di(c,f)||!d)&&(c.enterCallbacks[u]||[]).forEach(p=>p(h))},{flush:"post"}),()=>{const h=n.value,c=i.name,u=a.value,d=u&&u.components[c];if(!d)return Lc(e.default,{Component:d,route:h});const f=u.props[c],g=f?f===!0?h.params:typeof f=="function"?f(h):f:null,_=Vu(d,_t({},g,t,{onVnodeUnmounted:m=>{m.component.isUnmounted&&(u.instances[c]=null)},ref:l}));return Lc(e.default,{Component:_,route:h})||_}}});function Lc(i,t){if(!i)return null;const e=i(t);return e.length===1?e[0]:e}const y_=v_;function A_(i){const t=o_(i.routes,i),e=i.parseQuery||u_,s=i.stringifyQuery||Tc,n=i.history,r=Qi(),o=Qi(),a=Qi(),l=vp(ys);let h=ys;fi&&i.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const c=xo.bind(null,x=>""+x),u=xo.bind(null,km),d=xo.bind(null,Rn);function f(x,H){let j,G;return Ju(x)?(j=t.getRecordMatcher(x),G=H):G=x,t.addRoute(G,j)}function g(x){const H=t.getRecordMatcher(x);H&&t.removeRoute(H)}function p(){return t.getRoutes().map(x=>x.record)}function _(x){return!!t.getRecordMatcher(x)}function m(x,H){if(H=_t({},H||l.value),typeof x=="string"){const C=Ro(e,x,H.path),R=t.resolve({path:C.path},H),L=n.createHref(C.fullPath);return _t(C,R,{params:d(R.params),hash:Rn(C.hash),redirectedFrom:void 0,href:L})}let j;if(x.path!=null)j=_t({},x,{path:Ro(e,x.path,H.path).path});else{const C=_t({},x.params);for(const R in C)C[R]==null&&delete C[R];j=_t({},x,{params:u(C)}),H.params=u(H.params)}const G=t.resolve(j,H),dt=x.hash||"";G.params=c(d(G.params));const A=Nm(s,_t({},x,{hash:Im(dt),path:G.path})),w=n.createHref(A);return _t({fullPath:A,hash:dt,query:s===Tc?d_(x.query):x.query||{}},G,{redirectedFrom:void 0,href:w})}function y(x){return typeof x=="string"?Ro(e,x,l.value.path):_t({},x)}function v(x,H){if(h!==x)return Ni(8,{from:H,to:x})}function b(x){return T(x)}function E(x){return b(_t(y(x),{replace:!0}))}function S(x){const H=x.matched[x.matched.length-1];if(H&&H.redirect){const{redirect:j}=H;let G=typeof j=="function"?j(x):j;return typeof G=="string"&&(G=G.includes("?")||G.includes("#")?G=y(G):{path:G},G.params={}),_t({query:x.query,hash:x.hash,params:G.path!=null?{}:x.params},G)}}function T(x,H){const j=h=m(x),G=l.value,dt=x.state,A=x.force,w=x.replace===!0,C=S(j);if(C)return T(_t(y(C),{state:typeof C=="object"?_t({},dt,C.state):dt,force:A,replace:w}),H||j);const R=j;R.redirectedFrom=H;let L;return!A&&Fm(s,G,j)&&(L=Ni(16,{to:R,from:G}),Tt(G,G,!0,!1)),(L?Promise.resolve(L):$(R,G)).catch(P=>rs(P)?rs(P,2)?P:kt(P):et(P,R,G)).then(P=>{if(P){if(rs(P,2))return T(_t({replace:w},y(P.to),{state:typeof P.to=="object"?_t({},dt,P.to.state):dt,force:A}),H||R)}else P=Z(R,G,!0,w,dt);return B(R,G,P),P})}function I(x,H){const j=v(x,H);return j?Promise.reject(j):Promise.resolve()}function k(x){const H=Nt.values().next().value;return H&&typeof H.runWithContext=="function"?H.runWithContext(x):x()}function $(x,H){let j;const[G,dt,A]=w_(x,H);j=Po(G.reverse(),"beforeRouteLeave",x,H);for(const C of G)C.leaveGuards.forEach(R=>{j.push(Ss(R,x,H))});const w=I.bind(null,x,H);return j.push(w),Et(j).then(()=>{j=[];for(const C of r.list())j.push(Ss(C,x,H));return j.push(w),Et(j)}).then(()=>{j=Po(dt,"beforeRouteUpdate",x,H);for(const C of dt)C.updateGuards.forEach(R=>{j.push(Ss(R,x,H))});return j.push(w),Et(j)}).then(()=>{j=[];for(const C of A)if(C.beforeEnter)if($e(C.beforeEnter))for(const R of C.beforeEnter)j.push(Ss(R,x,H));else j.push(Ss(C.beforeEnter,x,H));return j.push(w),Et(j)}).then(()=>(x.matched.forEach(C=>C.enterCallbacks={}),j=Po(A,"beforeRouteEnter",x,H,k),j.push(w),Et(j))).then(()=>{j=[];for(const C of o.list())j.push(Ss(C,x,H));return j.push(w),Et(j)}).catch(C=>rs(C,8)?C:Promise.reject(C))}function B(x,H,j){a.list().forEach(G=>k(()=>G(x,H,j)))}function Z(x,H,j,G,dt){const A=v(x,H);if(A)return A;const w=H===ys,C=fi?history.state:{};j&&(G||w?n.replace(x.fullPath,_t({scroll:w&&C&&C.scroll},dt)):n.push(x.fullPath,dt)),l.value=x,Tt(x,H,j,w),kt()}let X;function it(){X||(X=n.listen((x,H,j)=>{if(!Lt.listening)return;const G=m(x),dt=S(G);if(dt){T(_t(dt,{replace:!0,force:!0}),G).catch(_n);return}h=G;const A=l.value;fi&&zm(_c(A.fullPath,j.delta),Qr()),$(G,A).catch(w=>rs(w,12)?w:rs(w,2)?(T(_t(y(w.to),{force:!0}),G).then(C=>{rs(C,20)&&!j.delta&&j.type===Pn.pop&&n.go(-1,!1)}).catch(_n),Promise.reject()):(j.delta&&n.go(-j.delta,!1),et(w,G,A))).then(w=>{w=w||Z(G,A,!1),w&&(j.delta&&!rs(w,8)?n.go(-j.delta,!1):j.type===Pn.pop&&rs(w,20)&&n.go(-1,!1)),B(G,A,w)}).catch(_n)}))}let mt=Qi(),N=Qi(),O;function et(x,H,j){kt(x);const G=N.list();return G.length?G.forEach(dt=>dt(x,H,j)):console.error(x),Promise.reject(x)}function wt(){return O&&l.value!==ys?Promise.resolve():new Promise((x,H)=>{mt.add([x,H])})}function kt(x){return O||(O=!x,it(),mt.list().forEach(([H,j])=>x?j(x):H()),mt.reset()),x}function Tt(x,H,j,G){const{scrollBehavior:dt}=i;if(!fi||!dt)return Promise.resolve();const A=!j&&Gm(_c(x.fullPath,0))||(G||!j)&&history.state&&history.state.scroll||null;return au().then(()=>dt(x,H,A)).then(w=>w&&Wm(w)).catch(w=>et(w,x,H))}const ct=x=>n.go(x);let pt;const Nt=new Set,Lt={currentRoute:l,listening:!0,addRoute:f,removeRoute:g,clearRoutes:t.clearRoutes,hasRoute:_,getRoutes:p,resolve:m,options:i,push:b,replace:E,go:ct,back:()=>ct(-1),forward:()=>ct(1),beforeEach:r.add,beforeResolve:o.add,afterEach:a.add,onError:N.add,isReady:wt,install(x){const H=this;x.component("RouterLink",m_),x.component("RouterView",y_),x.config.globalProperties.$router=H,Object.defineProperty(x.config.globalProperties,"$route",{enumerable:!0,get:()=>Ut(l)}),fi&&!pt&&l.value===ys&&(pt=!0,b(n.location).catch(dt=>{}));const j={};for(const dt in ys)Object.defineProperty(j,dt,{get:()=>l.value[dt],enumerable:!0});x.provide(tl,H),x.provide(sd,su(j)),x.provide(ba,l);const G=x.unmount;Nt.add(x),x.unmount=function(){Nt.delete(x),Nt.size<1&&(h=ys,X&&X(),X=null,l.value=ys,pt=!1,O=!1),G()}}};function Et(x){return x.reduce((H,j)=>H.then(()=>k(j)),Promise.resolve())}return Lt}function w_(i,t){const e=[],s=[],n=[],r=Math.max(t.matched.length,i.matched.length);for(let o=0;o<r;o++){const a=t.matched[o];a&&(i.matched.find(h=>Di(h,a))?s.push(a):e.push(a));const l=i.matched[o];l&&(t.matched.find(h=>Di(h,l))||n.push(l))}return[e,s,n]}const E_=[{naam:"0. Overzicht PIT staand orders",url:"/pdfs/0_Overzicht_PIT_staand_orders.pdf",keywords:[]},{naam:"101. Bevalling",url:"/pdfs/101. Bevalling.pdf",keywords:[]},{naam:"102. Traumatische pijn kinderen en volwassenen",url:"/pdfs/102. Traumatische pijn kinderen en volwassenen.pdf",keywords:["Pijnstilling"]},{naam:"103. Pijnstilling bij niet traumatische aandoeningen",url:"/pdfs/103 Pijnstilling bij niet traumatische aandoeningen.pdf",keywords:["Pijnstilling"]},{naam:"104. Brandwonden",url:"/pdfs/104 Brandwonden.pdf",keywords:["Trauma"]},{naam:"105. Hypovolemische shock",url:"/pdfs/105 Hypovolemische shock.pdf",keywords:["Shock"]},{naam:"106. Convulsies volwassene",url:"/pdfs/106 Convulsies volwassene.pdf",keywords:["Neuro"]},{naam:"107. Convulsies kinderen",url:"/pdfs/107. Convulsies kinderen.pdf",keywords:["Neuro"]},{naam:"108. Electrocutie",url:"/pdfs/108. Electrocutie.pdf",keywords:["Trauma"]},{naam:"109. Agitatie bij volwassenen en adolescenten",url:"/pdfs/109. Agitatie bij volwassenen en adolescenten.pdf",keywords:["Neuro"]},{naam:"110. Hyperthermie",url:"/pdfs/110. Hyperthermie.pdf",keywords:["Speciale omstandigheden"]},{naam:"111. Hypoglycemie",url:"/pdfs/111. Hypoglycemie.pdf",keywords:["Neuro"]},{naam:"112. Hypothermie",url:"/pdfs/112. Hypothermie.pdf",keywords:["Speciale omstandigheden"]},{naam:"113. Veranderingen bewustzijn",url:"/pdfs/113. Veranderingen bewustzijn.pdf",keywords:[]},{naam:"114. Acute respiratoire insufficintie bij volwassenen",url:"/pdfs/114. Acute respiratoire insufficintie bij volwassenen.pdf",keywords:["Pneumo"]},{naam:"115. Acute respiratoire insufficintie bij kinderen",url:"/pdfs/115. Acute respiratoire insufficintie bij kinderen.pdf",keywords:["Pneumo"]},{naam:"116. Intoxicatie CO en verbrandingsgassen",url:"/pdfs/116. Intoxicatie CO en verbrandingsgassen.pdf",keywords:["Speciale omstandigheden"]},{naam:"117. Verdrinking",url:"/pdfs/117. Verdrinking.pdf",keywords:["Speciale omstandigheden"]},{naam:"118. Zwaar ongeval",url:"/pdfs/118. Zwaar ongeval.pdf",keywords:["MIP"]},{naam:"119. Quincke oedeem en anafylactische shock",url:"/pdfs/119. Quincke oedeem en anafylactische shock.pdf",keywords:["Shock"]},{naam:"120. CPR asystolie PEA volwassenen",url:"/pdfs/120  CPR asystolie PEA volwassenen.pdf",keywords:["Reanimatie"]},{naam:"121. CPR asystolie PEA kinderen",url:"/pdfs/121  CPR asystolie PEA kinderen.pdf",keywords:["Reanimatie"]},{naam:"122. CPR VF VT volwassenen",url:"/pdfs/122 CPR VF VT  volwassenen.pdf",keywords:["Reanimatie"]},{naam:"123. CPR VF VT pediatrie",url:"/pdfs/123 CPR VF VT pediatrie.pdf",keywords:["Reanimatie"]},{naam:"124. Thoracale pijn en coronair syndroom",url:"/pdfs/124 Thoracale pijn en coronair syndroom.pdf",keywords:["Cardio"]},{naam:"125. Opvang van een zwaar trauma en cranieel trauma",url:"/pdfs/125 Opvang van een zwaar trauma en cranieel trauma.pdf",keywords:["Trauma"]},{naam:"126. Amputatie vermorzeling",url:"/pdfs/126 Amputatie vermorzeling.pdf",keywords:["Trauma"]},{naam:"127. Open fractuur",url:"/pdfs/127 Open fractuur.pdf",keywords:["Trauma"]},{naam:"128. Ritmestoornissen",url:"/pdfs/128 Ritmestoornissen.pdf",keywords:["Cardio"]},{naam:"129. Cerebro vasculair accident",url:"/pdfs/129 Cerebro vasculair accident.pdf",keywords:["Neuro"]},{naam:"130. Hyperventilatie",url:"/pdfs/130 Hyperventilatie.pdf",keywords:["Pneumo"]},{naam:"131. Interhospitaal transport",url:"/pdfs/131 Interhospitaal transport.pdf",keywords:["Interhospitaal transport"]},{naam:"132. Weigering transport",url:"/pdfs/132 Weigering transport.pdf",keywords:["Weigering transport"]}],ne=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),va=[.001,0,0,.001,0,0],Io=1.35,ye={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},Ts={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},id="pdfjs_internal_editor_",rt={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,SIGNATURE:101},ft={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35,DRAW_STEP:41},S_={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},Xt={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},_r={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},$t={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},pi={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},Jr={ERRORS:0,WARNINGS:1,INFOS:5},Mr={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},tr={moveTo:0,lineTo:1,curveTo:2,closePath:3},C_={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let Zr=Jr.WARNINGS;function T_(i){Number.isInteger(i)&&(Zr=i)}function x_(){return Zr}function to(i){Zr>=Jr.INFOS&&console.log(`Info: ${i}`)}function ot(i){Zr>=Jr.WARNINGS&&console.log(`Warning: ${i}`)}function At(i){throw new Error(i)}function Ht(i,t){i||At(t)}function R_(i){switch(i?.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function nd(i,t=null,e=null){if(!i)return null;if(e&&typeof i=="string"&&(e.addDefaultProtocol&&i.startsWith("www.")&&i.match(/\./g)?.length>=2&&(i=`http://${i}`),e.tryConvertEncoding))try{i=k_(i)}catch{}const s=t?URL.parse(i,t):URL.parse(i);return R_(s)?s:null}function rd(i,t,e=!1){const s=URL.parse(i);return s?(s.hash=t,s.href):e&&nd(i,"http://example.com")?i.split("#",1)[0]+`${t?`#${t}`:""}`:""}function ut(i,t,e,s=!1){return Object.defineProperty(i,t,{value:e,enumerable:!s,configurable:!0,writable:!1}),e}const ni=function(){function t(e,s){this.message=e,this.name=s}return t.prototype=new Error,t.constructor=t,t}();class Mc extends ni{constructor(t,e){super(t,"PasswordException"),this.code=e}}class Lo extends ni{constructor(t,e){super(t,"UnknownErrorException"),this.details=e}}class ya extends ni{constructor(t){super(t,"InvalidPDFException")}}class kr extends ni{constructor(t,e,s){super(t,"ResponseException"),this.status=e,this.missing=s}}class P_ extends ni{constructor(t){super(t,"FormatError")}}class Is extends ni{constructor(t){super(t,"AbortException")}}function od(i){(typeof i!="object"||i?.length===void 0)&&At("Invalid argument for bytesToString");const t=i.length,e=8192;if(t<e)return String.fromCharCode.apply(null,i);const s=[];for(let n=0;n<t;n+=e){const r=Math.min(n+e,t),o=i.subarray(n,r);s.push(String.fromCharCode.apply(null,o))}return s.join("")}function $n(i){typeof i!="string"&&At("Invalid argument for stringToBytes");const t=i.length,e=new Uint8Array(t);for(let s=0;s<t;++s)e[s]=i.charCodeAt(s)&255;return e}function I_(i){return String.fromCharCode(i>>24&255,i>>16&255,i>>8&255,i&255)}function L_(){const i=new Uint8Array(4);return i[0]=1,new Uint32Array(i.buffer,0,1)[0]===1}function M_(){try{return new Function(""),!0}catch{return!1}}class Yt{static get isLittleEndian(){return ut(this,"isLittleEndian",L_())}static get isEvalSupported(){return ut(this,"isEvalSupported",M_())}static get isOffscreenCanvasSupported(){return ut(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return ut(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get platform(){const{platform:t,userAgent:e}=navigator;return ut(this,"platform",{isAndroid:e.includes("Android"),isLinux:t.includes("Linux"),isMac:t.includes("Mac"),isWindows:t.includes("Win"),isFirefox:e.includes("Firefox")})}static get isCSSRoundSupported(){return ut(this,"isCSSRoundSupported",globalThis.CSS?.supports?.("width: round(1.5px, 1px)"))}}const Mo=Array.from(Array(256).keys(),i=>i.toString(16).padStart(2,"0"));class Y{static makeHexColor(t,e,s){return`#${Mo[t]}${Mo[e]}${Mo[s]}`}static scaleMinMax(t,e){let s;t[0]?(t[0]<0&&(s=e[0],e[0]=e[2],e[2]=s),e[0]*=t[0],e[2]*=t[0],t[3]<0&&(s=e[1],e[1]=e[3],e[3]=s),e[1]*=t[3],e[3]*=t[3]):(s=e[0],e[0]=e[1],e[1]=s,s=e[2],e[2]=e[3],e[3]=s,t[1]<0&&(s=e[1],e[1]=e[3],e[3]=s),e[1]*=t[1],e[3]*=t[1],t[2]<0&&(s=e[0],e[0]=e[2],e[2]=s),e[0]*=t[2],e[2]*=t[2]),e[0]+=t[4],e[1]+=t[5],e[2]+=t[4],e[3]+=t[5]}static transform(t,e){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],t[0]*e[4]+t[2]*e[5]+t[4],t[1]*e[4]+t[3]*e[5]+t[5]]}static applyTransform(t,e,s=0){const n=t[s],r=t[s+1];t[s]=n*e[0]+r*e[2]+e[4],t[s+1]=n*e[1]+r*e[3]+e[5]}static applyTransformToBezier(t,e,s=0){const n=e[0],r=e[1],o=e[2],a=e[3],l=e[4],h=e[5];for(let c=0;c<6;c+=2){const u=t[s+c],d=t[s+c+1];t[s+c]=u*n+d*o+l,t[s+c+1]=u*r+d*a+h}}static applyInverseTransform(t,e){const s=t[0],n=t[1],r=e[0]*e[3]-e[1]*e[2];t[0]=(s*e[3]-n*e[2]+e[2]*e[5]-e[4]*e[3])/r,t[1]=(-s*e[1]+n*e[0]+e[4]*e[1]-e[5]*e[0])/r}static axialAlignedBoundingBox(t,e,s){const n=e[0],r=e[1],o=e[2],a=e[3],l=e[4],h=e[5],c=t[0],u=t[1],d=t[2],f=t[3];let g=n*c+l,p=g,_=n*d+l,m=_,y=a*u+h,v=y,b=a*f+h,E=b;if(r!==0||o!==0){const S=r*c,T=r*d,I=o*u,k=o*f;g+=I,m+=I,_+=k,p+=k,y+=S,E+=S,b+=T,v+=T}s[0]=Math.min(s[0],g,_,p,m),s[1]=Math.min(s[1],y,b,v,E),s[2]=Math.max(s[2],g,_,p,m),s[3]=Math.max(s[3],y,b,v,E)}static inverseTransform(t){const e=t[0]*t[3]-t[1]*t[2];return[t[3]/e,-t[1]/e,-t[2]/e,t[0]/e,(t[2]*t[5]-t[4]*t[3])/e,(t[4]*t[1]-t[5]*t[0])/e]}static singularValueDecompose2dScale(t,e){const s=t[0],n=t[1],r=t[2],o=t[3],a=s**2+n**2,l=s*r+n*o,h=r**2+o**2,c=(a+h)/2,u=Math.sqrt(c**2-(a*h-l**2));e[0]=Math.sqrt(c+u||1),e[1]=Math.sqrt(c-u||1)}static normalizeRect(t){const e=t.slice(0);return t[0]>t[2]&&(e[0]=t[2],e[2]=t[0]),t[1]>t[3]&&(e[1]=t[3],e[3]=t[1]),e}static intersect(t,e){const s=Math.max(Math.min(t[0],t[2]),Math.min(e[0],e[2])),n=Math.min(Math.max(t[0],t[2]),Math.max(e[0],e[2]));if(s>n)return null;const r=Math.max(Math.min(t[1],t[3]),Math.min(e[1],e[3])),o=Math.min(Math.max(t[1],t[3]),Math.max(e[1],e[3]));return r>o?null:[s,r,n,o]}static pointBoundingBox(t,e,s){s[0]=Math.min(s[0],t),s[1]=Math.min(s[1],e),s[2]=Math.max(s[2],t),s[3]=Math.max(s[3],e)}static rectBoundingBox(t,e,s,n,r){r[0]=Math.min(r[0],t,s),r[1]=Math.min(r[1],e,n),r[2]=Math.max(r[2],t,s),r[3]=Math.max(r[3],e,n)}static#t(t,e,s,n,r,o,a,l,h,c){if(h<=0||h>=1)return;const u=1-h,d=h*h,f=d*h,g=u*(u*(u*t+3*h*e)+3*d*s)+f*n,p=u*(u*(u*r+3*h*o)+3*d*a)+f*l;c[0]=Math.min(c[0],g),c[1]=Math.min(c[1],p),c[2]=Math.max(c[2],g),c[3]=Math.max(c[3],p)}static#e(t,e,s,n,r,o,a,l,h,c,u,d){if(Math.abs(h)<1e-12){Math.abs(c)>=1e-12&&this.#t(t,e,s,n,r,o,a,l,-u/c,d);return}const f=c**2-4*u*h;if(f<0)return;const g=Math.sqrt(f),p=2*h;this.#t(t,e,s,n,r,o,a,l,(-c+g)/p,d),this.#t(t,e,s,n,r,o,a,l,(-c-g)/p,d)}static bezierBoundingBox(t,e,s,n,r,o,a,l,h){h[0]=Math.min(h[0],t,a),h[1]=Math.min(h[1],e,l),h[2]=Math.max(h[2],t,a),h[3]=Math.max(h[3],e,l),this.#e(t,s,r,a,e,n,o,l,3*(-t+3*(s-r)+a),6*(t-2*s+r),3*(s-t),h),this.#e(t,s,r,a,e,n,o,l,3*(-e+3*(n-o)+l),6*(e-2*n+o),3*(n-e),h)}}function k_(i){return decodeURIComponent(escape(i))}let ko=null,kc=null;function O_(i){return ko||(ko=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,kc=new Map([["","t"]])),i.replaceAll(ko,(t,e,s)=>e?e.normalize("NFKC"):kc.get(s))}function ad(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const i=new Uint8Array(32);return crypto.getRandomValues(i),od(i)}const el="pdfjs_internal_id_";function D_(i,t,e){if(!Array.isArray(e)||e.length<2)return!1;const[s,n,...r]=e;if(!i(s)&&!Number.isInteger(s)||!t(n))return!1;const o=r.length;let a=!0;switch(n.name){case"XYZ":if(o<2||o>3)return!1;break;case"Fit":case"FitB":return o===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(o>1)return!1;break;case"FitR":if(o!==4)return!1;a=!1;break;default:return!1}for(const l of r)if(!(typeof l=="number"||a&&l===null))return!1;return!0}function re(i,t,e){return Math.min(Math.max(i,t),e)}function ld(i){return Uint8Array.prototype.toBase64?i.toBase64():btoa(od(i))}function N_(i){return Uint8Array.fromBase64?Uint8Array.fromBase64(i):$n(atob(i))}typeof Promise.try!="function"&&(Promise.try=function(i,...t){return new Promise(e=>{e(i(...t))})});typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(i){return i.reduce((t,e)=>t+e,0)});const os="http://www.w3.org/2000/svg";class Fi{static CSS=96;static PDF=72;static PDF_TO_CSS_UNITS=this.CSS/this.PDF}async function Bn(i,t="text"){if(an(i,document.baseURI)){const e=await fetch(i);if(!e.ok)throw new Error(e.statusText);switch(t){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"json":return e.json()}return e.text()}return new Promise((e,s)=>{const n=new XMLHttpRequest;n.open("GET",i,!0),n.responseType=t,n.onreadystatechange=()=>{if(n.readyState===XMLHttpRequest.DONE){if(n.status===200||n.status===0){switch(t){case"arraybuffer":case"blob":case"json":e(n.response);return}e(n.responseText);return}s(new Error(n.statusText))}},n.send(null)})}class Hn{constructor({viewBox:t,userUnit:e,scale:s,rotation:n,offsetX:r=0,offsetY:o=0,dontFlip:a=!1}){this.viewBox=t,this.userUnit=e,this.scale=s,this.rotation=n,this.offsetX=r,this.offsetY=o,s*=e;const l=(t[2]+t[0])/2,h=(t[3]+t[1])/2;let c,u,d,f;switch(n%=360,n<0&&(n+=360),n){case 180:c=-1,u=0,d=0,f=1;break;case 90:c=0,u=1,d=1,f=0;break;case 270:c=0,u=-1,d=-1,f=0;break;case 0:c=1,u=0,d=0,f=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}a&&(d=-d,f=-f);let g,p,_,m;c===0?(g=Math.abs(h-t[1])*s+r,p=Math.abs(l-t[0])*s+o,_=(t[3]-t[1])*s,m=(t[2]-t[0])*s):(g=Math.abs(l-t[0])*s+r,p=Math.abs(h-t[1])*s+o,_=(t[2]-t[0])*s,m=(t[3]-t[1])*s),this.transform=[c*s,u*s,d*s,f*s,g-c*s*l-d*s*h,p-u*s*l-f*s*h],this.width=_,this.height=m}get rawDims(){const t=this.viewBox;return ut(this,"rawDims",{pageWidth:t[2]-t[0],pageHeight:t[3]-t[1],pageX:t[0],pageY:t[1]})}clone({scale:t=this.scale,rotation:e=this.rotation,offsetX:s=this.offsetX,offsetY:n=this.offsetY,dontFlip:r=!1}={}){return new Hn({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:t,rotation:e,offsetX:s,offsetY:n,dontFlip:r})}convertToViewportPoint(t,e){const s=[t,e];return Y.applyTransform(s,this.transform),s}convertToViewportRectangle(t){const e=[t[0],t[1]];Y.applyTransform(e,this.transform);const s=[t[2],t[3]];return Y.applyTransform(s,this.transform),[e[0],e[1],s[0],s[1]]}convertToPdfPoint(t,e){const s=[t,e];return Y.applyInverseTransform(s,this.transform),s}}class sl extends ni{constructor(t,e=0){super(t,"RenderingCancelledException"),this.extraDelay=e}}function eo(i){const t=i.length;let e=0;for(;e<t&&i[e].trim()==="";)e++;return i.substring(e,e+5).toLowerCase()==="data:"}function il(i){return typeof i=="string"&&/\.pdf$/i.test(i)}function F_(i){return[i]=i.split(/[#?]/,1),i.substring(i.lastIndexOf("/")+1)}function $_(i,t="document.pdf"){if(typeof i!="string")return t;if(eo(i))return ot('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),t;const s=(a=>{try{return new URL(a)}catch{try{return new URL(decodeURIComponent(a))}catch{try{return new URL(a,"https://foo.bar")}catch{try{return new URL(decodeURIComponent(a),"https://foo.bar")}catch{return null}}}}})(i);if(!s)return t;const n=a=>{try{let l=decodeURIComponent(a);return l.includes("/")?(l=l.split("/").at(-1),l.test(/^\.pdf$/i)?l:a):l}catch{return a}},r=/\.pdf$/i,o=s.pathname.split("/").at(-1);if(r.test(o))return n(o);if(s.searchParams.size>0){const a=Array.from(s.searchParams.values()).reverse();for(const h of a)if(r.test(h))return n(h);const l=Array.from(s.searchParams.keys()).reverse();for(const h of l)if(r.test(h))return n(h)}if(s.hash){const l=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(s.hash);if(l)return n(l[0])}return t}class Oc{started=Object.create(null);times=[];time(t){t in this.started&&ot(`Timer is already running for ${t}`),this.started[t]=Date.now()}timeEnd(t){t in this.started||ot(`Timer has not been started for ${t}`),this.times.push({name:t,start:this.started[t],end:Date.now()}),delete this.started[t]}toString(){const t=[];let e=0;for(const{name:s}of this.times)e=Math.max(s.length,e);for(const{name:s,start:n,end:r}of this.times)t.push(`${s.padEnd(e)} ${r-n}ms
`);return t.join("")}}function an(i,t){const e=t?URL.parse(i,t):URL.parse(i);return e?.protocol==="http:"||e?.protocol==="https:"}function Be(i){i.preventDefault()}function Bt(i){i.preventDefault(),i.stopPropagation()}function B_(i){console.log("Deprecated API usage: "+i)}class cd{static#t;static toDateObject(t){if(!t||typeof t!="string")return null;this.#t||=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?");const e=this.#t.exec(t);if(!e)return null;const s=parseInt(e[1],10);let n=parseInt(e[2],10);n=n>=1&&n<=12?n-1:0;let r=parseInt(e[3],10);r=r>=1&&r<=31?r:1;let o=parseInt(e[4],10);o=o>=0&&o<=23?o:0;let a=parseInt(e[5],10);a=a>=0&&a<=59?a:0;let l=parseInt(e[6],10);l=l>=0&&l<=59?l:0;const h=e[7]||"Z";let c=parseInt(e[8],10);c=c>=0&&c<=23?c:0;let u=parseInt(e[9],10)||0;return u=u>=0&&u<=59?u:0,h==="-"?(o+=c,a+=u):h==="+"&&(o-=c,a-=u),new Date(Date.UTC(s,n,r,o,a,l))}}function H_(i,{scale:t=1,rotation:e=0}){const{width:s,height:n}=i.attributes.style,r=[0,0,parseInt(s),parseInt(n)];return new Hn({viewBox:r,userUnit:1,scale:t,rotation:e})}function nl(i){if(i.startsWith("#")){const t=parseInt(i.slice(1),16);return[(t&16711680)>>16,(t&65280)>>8,t&255]}return i.startsWith("rgb(")?i.slice(4,-1).split(",").map(t=>parseInt(t)):i.startsWith("rgba(")?i.slice(5,-1).split(",").map(t=>parseInt(t)).slice(0,3):(ot(`Not a valid color format: "${i}"`),[0,0,0])}function V_(i){const t=document.createElement("span");t.style.visibility="hidden",t.style.colorScheme="only light",document.body.append(t);for(const e of i.keys()){t.style.color=e;const s=window.getComputedStyle(t).color;i.set(e,nl(s))}t.remove()}function It(i){const{a:t,b:e,c:s,d:n,e:r,f:o}=i.getTransform();return[t,e,s,n,r,o]}function Ge(i){const{a:t,b:e,c:s,d:n,e:r,f:o}=i.getTransform().invertSelf();return[t,e,s,n,r,o]}function Zs(i,t,e=!1,s=!0){if(t instanceof Hn){const{pageWidth:n,pageHeight:r}=t.rawDims,{style:o}=i,a=Yt.isCSSRoundSupported,l=`var(--total-scale-factor) * ${n}px`,h=`var(--total-scale-factor) * ${r}px`,c=a?`round(down, ${l}, var(--scale-round-x))`:`calc(${l})`,u=a?`round(down, ${h}, var(--scale-round-y))`:`calc(${h})`;!e||t.rotation%180===0?(o.width=c,o.height=u):(o.width=u,o.height=c)}s&&i.setAttribute("data-main-rotation",t.rotation)}class ss{constructor(){const{pixelRatio:t}=ss;this.sx=t,this.sy=t}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(t,e,s,n,r=-1){let o=1/0,a=1/0,l=1/0;s=ss.capPixels(s,r),s>0&&(o=Math.sqrt(s/(t*e))),n!==-1&&(a=n/t,l=n/e);const h=Math.min(o,a,l);return this.sx>h||this.sy>h?(this.sx=h,this.sy=h,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(t,e){if(e>=0){const s=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+e/100));return t>0?Math.min(t,s):s}return t}}const Aa=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];class vn{#t=null;#e=null;#s;#i=null;#r=null;#n=null;static#a=null;constructor(t){this.#s=t,vn.#a||=Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"})}render(){const t=this.#t=document.createElement("div");t.classList.add("editToolbar","hidden"),t.setAttribute("role","toolbar");const e=this.#s._uiManager._signal;t.addEventListener("contextmenu",Be,{signal:e}),t.addEventListener("pointerdown",vn.#o,{signal:e});const s=this.#i=document.createElement("div");s.className="buttons",t.append(s);const n=this.#s.toolbarPosition;if(n){const{style:r}=t,o=this.#s._uiManager.direction==="ltr"?1-n[0]:n[0];r.insetInlineEnd=`${100*o}%`,r.top=`calc(${100*n[1]}% + var(--editor-toolbar-vert-offset))`}return t}get div(){return this.#t}static#o(t){t.stopPropagation()}#u(t){this.#s._focusEventsAllowed=!1,Bt(t)}#l(t){this.#s._focusEventsAllowed=!0,Bt(t)}#d(t){const e=this.#s._uiManager._signal;t.addEventListener("focusin",this.#u.bind(this),{capture:!0,signal:e}),t.addEventListener("focusout",this.#l.bind(this),{capture:!0,signal:e}),t.addEventListener("contextmenu",Be,{signal:e})}hide(){this.#t.classList.add("hidden"),this.#e?.hideDropdown()}show(){this.#t.classList.remove("hidden"),this.#r?.shown()}addDeleteButton(){const{editorType:t,_uiManager:e}=this.#s,s=document.createElement("button");s.className="delete",s.tabIndex=0,s.setAttribute("data-l10n-id",vn.#a[t]),this.#d(s),s.addEventListener("click",n=>{e.delete()},{signal:e._signal}),this.#i.append(s)}get#h(){const t=document.createElement("div");return t.className="divider",t}async addAltText(t){const e=await t.render();this.#d(e),this.#i.append(e,this.#h),this.#r=t}addColorPicker(t){this.#e=t;const e=t.renderButton();this.#d(e),this.#i.append(e,this.#h)}async addEditSignatureButton(t){const e=this.#n=await t.renderEditButton(this.#s);this.#d(e),this.#i.append(e,this.#h)}async addButton(t,e){switch(t){case"colorPicker":this.addColorPicker(e);break;case"altText":await this.addAltText(e);break;case"editSignature":await this.addEditSignatureButton(e);break;case"delete":this.addDeleteButton();break}}updateEditSignatureButton(t){this.#n&&(this.#n.title=t)}remove(){this.#t.remove(),this.#e?.destroy(),this.#e=null}}class j_{#t=null;#e=null;#s;constructor(t){this.#s=t}#i(){const t=this.#e=document.createElement("div");t.className="editToolbar",t.setAttribute("role","toolbar"),t.addEventListener("contextmenu",Be,{signal:this.#s._signal});const e=this.#t=document.createElement("div");return e.className="buttons",t.append(e),this.#n(),t}#r(t,e){let s=0,n=0;for(const r of t){const o=r.y+r.height;if(o<s)continue;const a=r.x+(e?r.width:0);if(o>s){n=a,s=o;continue}e?a>n&&(n=a):a<n&&(n=a)}return[e?1-n:n,s]}show(t,e,s){const[n,r]=this.#r(e,s),{style:o}=this.#e||=this.#i();t.append(this.#e),o.insetInlineEnd=`${100*n}%`,o.top=`calc(${100*r}% + var(--editor-toolbar-vert-offset))`}hide(){this.#e.remove()}#n(){const t=document.createElement("button");t.className="highlightButton",t.tabIndex=0,t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const e=document.createElement("span");t.append(e),e.className="visuallyHidden",e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");const s=this.#s._signal;t.addEventListener("contextmenu",Be,{signal:s}),t.addEventListener("click",()=>{this.#s.highlightSelection("floating_button")},{signal:s}),this.#t.append(t)}}function hd(i,t,e){for(const s of e)t.addEventListener(s,i[s].bind(i))}class U_{#t=0;get id(){return`${id}${this.#t++}`}}class rl{#t=ad();#e=0;#s=null;static get _isSVGFittingCanvas(){const t='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',s=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),n=new Image;n.src=t;const r=n.decode().then(()=>(s.drawImage(n,0,0,1,1,0,0,1,3),new Uint32Array(s.getImageData(0,0,1,1).data.buffer)[0]===0));return ut(this,"_isSVGFittingCanvas",r)}async#i(t,e){this.#s||=new Map;let s=this.#s.get(t);if(s===null)return null;if(s?.bitmap)return s.refCounter+=1,s;try{s||={bitmap:null,id:`image_${this.#t}_${this.#e++}`,refCounter:0,isSvg:!1};let n;if(typeof e=="string"?(s.url=e,n=await Bn(e,"blob")):e instanceof File?n=s.file=e:e instanceof Blob&&(n=e),n.type==="image/svg+xml"){const r=rl._isSVGFittingCanvas,o=new FileReader,a=new Image,l=new Promise((h,c)=>{a.onload=()=>{s.bitmap=a,s.isSvg=!0,h()},o.onload=async()=>{const u=s.svgUrl=o.result;a.src=await r?`${u}#svgView(preserveAspectRatio(none))`:u},a.onerror=o.onerror=c});o.readAsDataURL(n),await l}else s.bitmap=await createImageBitmap(n);s.refCounter=1}catch(n){ot(n),s=null}return this.#s.set(t,s),s&&this.#s.set(s.id,s),s}async getFromFile(t){const{lastModified:e,name:s,size:n,type:r}=t;return this.#i(`${e}_${s}_${n}_${r}`,t)}async getFromUrl(t){return this.#i(t,t)}async getFromBlob(t,e){const s=await e;return this.#i(t,s)}async getFromId(t){this.#s||=new Map;const e=this.#s.get(t);if(!e)return null;if(e.bitmap)return e.refCounter+=1,e;if(e.file)return this.getFromFile(e.file);if(e.blobPromise){const{blobPromise:s}=e;return delete e.blobPromise,this.getFromBlob(e.id,s)}return this.getFromUrl(e.url)}getFromCanvas(t,e){this.#s||=new Map;let s=this.#s.get(t);if(s?.bitmap)return s.refCounter+=1,s;const n=new OffscreenCanvas(e.width,e.height);return n.getContext("2d").drawImage(e,0,0),s={bitmap:n.transferToImageBitmap(),id:`image_${this.#t}_${this.#e++}`,refCounter:1,isSvg:!1},this.#s.set(t,s),this.#s.set(s.id,s),s}getSvgUrl(t){const e=this.#s.get(t);return e?.isSvg?e.svgUrl:null}deleteId(t){this.#s||=new Map;const e=this.#s.get(t);if(!e||(e.refCounter-=1,e.refCounter!==0))return;const{bitmap:s}=e;if(!e.url&&!e.file){const n=new OffscreenCanvas(s.width,s.height);n.getContext("bitmaprenderer").transferFromImageBitmap(s),e.blobPromise=n.convertToBlob()}s.close?.(),e.bitmap=null}isValidId(t){return t.startsWith(`image_${this.#t}_`)}}class W_{#t=[];#e=!1;#s;#i=-1;constructor(t=128){this.#s=t}add({cmd:t,undo:e,post:s,mustExec:n,type:r=NaN,overwriteIfSameType:o=!1,keepUndo:a=!1}){if(n&&t(),this.#e)return;const l={cmd:t,undo:e,post:s,type:r};if(this.#i===-1){this.#t.length>0&&(this.#t.length=0),this.#i=0,this.#t.push(l);return}if(o&&this.#t[this.#i].type===r){a&&(l.undo=this.#t[this.#i].undo),this.#t[this.#i]=l;return}const h=this.#i+1;h===this.#s?this.#t.splice(0,1):(this.#i=h,h<this.#t.length&&this.#t.splice(h)),this.#t.push(l)}undo(){if(this.#i===-1)return;this.#e=!0;const{undo:t,post:e}=this.#t[this.#i];t(),e?.(),this.#e=!1,this.#i-=1}redo(){if(this.#i<this.#t.length-1){this.#i+=1,this.#e=!0;const{cmd:t,post:e}=this.#t[this.#i];t(),e?.(),this.#e=!1}}hasSomethingToUndo(){return this.#i!==-1}hasSomethingToRedo(){return this.#i<this.#t.length-1}cleanType(t){if(this.#i!==-1){for(let e=this.#i;e>=0;e--)if(this.#t[e].type!==t){this.#t.splice(e+1,this.#i-e),this.#i=e;return}this.#t.length=0,this.#i=-1}}destroy(){this.#t=null}}class Vn{constructor(t){this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:e}=Yt.platform;for(const[s,n,r={}]of t)for(const o of s){const a=o.startsWith("mac+");e&&a?(this.callbacks.set(o.slice(4),{callback:n,options:r}),this.allKeys.add(o.split("+").at(-1))):!e&&!a&&(this.callbacks.set(o,{callback:n,options:r}),this.allKeys.add(o.split("+").at(-1)))}}#t(t){t.altKey&&this.buffer.push("alt"),t.ctrlKey&&this.buffer.push("ctrl"),t.metaKey&&this.buffer.push("meta"),t.shiftKey&&this.buffer.push("shift"),this.buffer.push(t.key);const e=this.buffer.join("+");return this.buffer.length=0,e}exec(t,e){if(!this.allKeys.has(e.key))return;const s=this.callbacks.get(this.#t(e));if(!s)return;const{callback:n,options:{bubbles:r=!1,args:o=[],checker:a=null}}=s;a&&!a(t,e)||(n.bind(t,...o,e)(),r||Bt(e))}}class ol{static _colorsMapping=new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]);get _colors(){const t=new Map([["CanvasText",null],["Canvas",null]]);return V_(t),ut(this,"_colors",t)}convert(t){const e=nl(t);if(!window.matchMedia("(forced-colors: active)").matches)return e;for(const[s,n]of this._colors)if(n.every((r,o)=>r===e[o]))return ol._colorsMapping.get(s);return e}getHexCode(t){const e=this._colors.get(t);return e?Y.makeHexColor(...e):t}}class Ls{#t=new AbortController;#e=null;#s=new Map;#i=new Map;#r=null;#n=null;#a=null;#o=new W_;#u=null;#l=null;#d=0;#h=new Set;#f=null;#p=null;#g=new Set;_editorUndoBar=null;#c=!1;#m=!1;#_=!1;#b=null;#y=null;#A=null;#w=null;#C=!1;#x=null;#P=new U_;#E=!1;#R=!1;#T=null;#L=null;#M=null;#k=null;#H=null;#S=rt.NONE;#v=new Set;#F=null;#$=null;#U=null;#W=null;#z={isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1};#V=[0,0];#O=null;#D=null;#j=null;#Y=null;#N=null;static TRANSLATE_SMALL=1;static TRANSLATE_BIG=10;static get _keyboardManager(){const t=Ls.prototype,e=o=>o.#D.contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&o.hasSomethingToControl(),s=(o,{target:a})=>{if(a instanceof HTMLInputElement){const{type:l}=a;return l!=="text"&&l!=="number"}return!0},n=this.TRANSLATE_SMALL,r=this.TRANSLATE_BIG;return ut(this,"_keyboardManager",new Vn([[["ctrl+a","mac+meta+a"],t.selectAll,{checker:s}],[["ctrl+z","mac+meta+z"],t.undo,{checker:s}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],t.redo,{checker:s}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],t.delete,{checker:s}],[["Enter","mac+Enter"],t.addNewEditorFromKeyboard,{checker:(o,{target:a})=>!(a instanceof HTMLButtonElement)&&o.#D.contains(a)&&!o.isEnterHandled}],[[" ","mac+ "],t.addNewEditorFromKeyboard,{checker:(o,{target:a})=>!(a instanceof HTMLButtonElement)&&o.#D.contains(document.activeElement)}],[["Escape","mac+Escape"],t.unselectAll],[["ArrowLeft","mac+ArrowLeft"],t.translateSelectedEditors,{args:[-n,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t.translateSelectedEditors,{args:[-r,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t.translateSelectedEditors,{args:[n,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t.translateSelectedEditors,{args:[r,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t.translateSelectedEditors,{args:[0,-n],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t.translateSelectedEditors,{args:[0,-r],checker:e}],[["ArrowDown","mac+ArrowDown"],t.translateSelectedEditors,{args:[0,n],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t.translateSelectedEditors,{args:[0,r],checker:e}]]))}constructor(t,e,s,n,r,o,a,l,h,c,u,d,f,g,p){const _=this._signal=this.#t.signal;this.#D=t,this.#j=e,this.#Y=s,this.#r=n,this.#$=r,this._eventBus=o,o._on("editingaction",this.onEditingAction.bind(this),{signal:_}),o._on("pagechanging",this.onPageChanging.bind(this),{signal:_}),o._on("scalechanging",this.onScaleChanging.bind(this),{signal:_}),o._on("rotationchanging",this.onRotationChanging.bind(this),{signal:_}),o._on("setpreference",this.onSetPreference.bind(this),{signal:_}),o._on("switchannotationeditorparams",m=>this.updateParams(m.type,m.value),{signal:_}),this.#nt(),this.#lt(),this.#Q(),this.#n=a.annotationStorage,this.#b=a.filterFactory,this.#U=l,this.#w=h||null,this.#c=c,this.#m=u,this.#_=d,this.#H=f||null,this.viewParameters={realScale:Fi.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=g||null,this._supportsPinchToZoom=p!==!1}destroy(){this.#N?.resolve(),this.#N=null,this.#t?.abort(),this.#t=null,this._signal=null;for(const t of this.#i.values())t.destroy();this.#i.clear(),this.#s.clear(),this.#g.clear(),this.#k?.clear(),this.#e=null,this.#v.clear(),this.#o.destroy(),this.#r?.destroy(),this.#$?.destroy(),this.#x?.hide(),this.#x=null,this.#M?.destroy(),this.#M=null,this.#y&&(clearTimeout(this.#y),this.#y=null),this.#O&&(clearTimeout(this.#O),this.#O=null),this._editorUndoBar?.destroy()}combinedSignal(t){return AbortSignal.any([this._signal,t.signal])}get mlManager(){return this.#H}get useNewAltTextFlow(){return this.#m}get useNewAltTextWhenAddingImage(){return this.#_}get hcmFilter(){return ut(this,"hcmFilter",this.#U?this.#b.addHCMFilter(this.#U.foreground,this.#U.background):"none")}get direction(){return ut(this,"direction",getComputedStyle(this.#D).direction)}get highlightColors(){return ut(this,"highlightColors",this.#w?new Map(this.#w.split(",").map(t=>(t=t.split("=").map(e=>e.trim()),t[1]=t[1].toUpperCase(),t))):null)}get highlightColorNames(){return ut(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,t=>t.reverse())):null)}setCurrentDrawingSession(t){t?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),this.#l=t}setMainHighlightColorPicker(t){this.#M=t}editAltText(t,e=!1){this.#r?.editAltText(this,t,e)}getSignature(t){this.#$?.getSignature({uiManager:this,editor:t})}get signatureManager(){return this.#$}switchToMode(t,e){this._eventBus.on("annotationeditormodechanged",e,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:t})}setPreference(t,e){this._eventBus.dispatch("setpreference",{source:this,name:t,value:e})}onSetPreference({name:t,value:e}){switch(t){case"enableNewAltTextWhenAddingImage":this.#_=e;break}}onPageChanging({pageNumber:t}){this.#d=t-1}focusMainContainer(){this.#D.focus()}findParent(t,e){for(const s of this.#i.values()){const{x:n,y:r,width:o,height:a}=s.div.getBoundingClientRect();if(t>=n&&t<=n+o&&e>=r&&e<=r+a)return s}return null}disableUserSelect(t=!1){this.#j.classList.toggle("noUserSelect",t)}addShouldRescale(t){this.#g.add(t)}removeShouldRescale(t){this.#g.delete(t)}onScaleChanging({scale:t}){this.commitOrRemove(),this.viewParameters.realScale=t*Fi.PDF_TO_CSS_UNITS;for(const e of this.#g)e.onScaleChanging();this.#l?.onScaleChanging()}onRotationChanging({pagesRotation:t}){this.commitOrRemove(),this.viewParameters.rotation=t}#K({anchorNode:t}){return t.nodeType===Node.TEXT_NODE?t.parentElement:t}#X(t){const{currentLayer:e}=this;if(e.hasTextLayer(t))return e;for(const s of this.#i.values())if(s.hasTextLayer(t))return s;return null}highlightSelection(t=""){const e=document.getSelection();if(!e||e.isCollapsed)return;const{anchorNode:s,anchorOffset:n,focusNode:r,focusOffset:o}=e,a=e.toString(),h=this.#K(e).closest(".textLayer"),c=this.getSelectionBoxes(h);if(!c)return;e.empty();const u=this.#X(h),d=this.#S===rt.NONE,f=()=>{u?.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:t,boxes:c,anchorNode:s,anchorOffset:n,focusNode:r,focusOffset:o,text:a}),d&&this.showAllEditors("highlight",!0,!0)};if(d){this.switchToMode(rt.HIGHLIGHT,f);return}f()}#st(){const t=document.getSelection();if(!t||t.isCollapsed)return;const s=this.#K(t).closest(".textLayer"),n=this.getSelectionBoxes(s);n&&(this.#x||=new j_(this),this.#x.show(s,n,this.direction==="ltr"))}addToAnnotationStorage(t){!t.isEmpty()&&this.#n&&!this.#n.has(t.id)&&this.#n.setValue(t.id,t)}a11yAlert(t,e=null){const s=this.#Y;s&&(s.setAttribute("data-l10n-id",t),e?s.setAttribute("data-l10n-args",JSON.stringify(e)):s.removeAttribute("data-l10n-args"))}#it(){const t=document.getSelection();if(!t||t.isCollapsed){this.#F&&(this.#x?.hide(),this.#F=null,this.#I({hasSelectedText:!1}));return}const{anchorNode:e}=t;if(e===this.#F)return;const n=this.#K(t).closest(".textLayer");if(!n){this.#F&&(this.#x?.hide(),this.#F=null,this.#I({hasSelectedText:!1}));return}if(this.#x?.hide(),this.#F=e,this.#I({hasSelectedText:!0}),!(this.#S!==rt.HIGHLIGHT&&this.#S!==rt.NONE)&&(this.#S===rt.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),this.#C=this.isShiftKeyDown,!this.isShiftKeyDown)){const r=this.#S===rt.HIGHLIGHT?this.#X(n):null;r?.toggleDrawing();const o=new AbortController,a=this.combinedSignal(o),l=h=>{h.type==="pointerup"&&h.button!==0||(o.abort(),r?.toggleDrawing(!0),h.type==="pointerup"&&this.#q("main_toolbar"))};window.addEventListener("pointerup",l,{signal:a}),window.addEventListener("blur",l,{signal:a})}}#q(t=""){this.#S===rt.HIGHLIGHT?this.highlightSelection(t):this.#c&&this.#st()}#nt(){document.addEventListener("selectionchange",this.#it.bind(this),{signal:this._signal})}#rt(){if(this.#A)return;this.#A=new AbortController;const t=this.combinedSignal(this.#A);window.addEventListener("focus",this.focus.bind(this),{signal:t}),window.addEventListener("blur",this.blur.bind(this),{signal:t})}#ot(){this.#A?.abort(),this.#A=null}blur(){if(this.isShiftKeyDown=!1,this.#C&&(this.#C=!1,this.#q("main_toolbar")),!this.hasSelection)return;const{activeElement:t}=document;for(const e of this.#v)if(e.div.contains(t)){this.#L=[e,t],e._focusEventsAllowed=!1;break}}focus(){if(!this.#L)return;const[t,e]=this.#L;this.#L=null,e.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this._signal}),e.focus()}#Q(){if(this.#T)return;this.#T=new AbortController;const t=this.combinedSignal(this.#T);window.addEventListener("keydown",this.keydown.bind(this),{signal:t}),window.addEventListener("keyup",this.keyup.bind(this),{signal:t})}#at(){this.#T?.abort(),this.#T=null}#J(){if(this.#u)return;this.#u=new AbortController;const t=this.combinedSignal(this.#u);document.addEventListener("copy",this.copy.bind(this),{signal:t}),document.addEventListener("cut",this.cut.bind(this),{signal:t}),document.addEventListener("paste",this.paste.bind(this),{signal:t})}#Z(){this.#u?.abort(),this.#u=null}#lt(){const t=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:t}),document.addEventListener("drop",this.drop.bind(this),{signal:t})}addEditListeners(){this.#Q(),this.#J()}removeEditListeners(){this.#at(),this.#Z()}dragOver(t){for(const{type:e}of t.dataTransfer.items)for(const s of this.#p)if(s.isHandlingMimeForPasting(e)){t.dataTransfer.dropEffect="copy",t.preventDefault();return}}drop(t){for(const e of t.dataTransfer.items)for(const s of this.#p)if(s.isHandlingMimeForPasting(e.type)){s.paste(e,this.currentLayer),t.preventDefault();return}}copy(t){if(t.preventDefault(),this.#e?.commitOrRemove(),!this.hasSelection)return;const e=[];for(const s of this.#v){const n=s.serialize(!0);n&&e.push(n)}e.length!==0&&t.clipboardData.setData("application/pdfjs",JSON.stringify(e))}cut(t){this.copy(t),this.delete()}async paste(t){t.preventDefault();const{clipboardData:e}=t;for(const r of e.items)for(const o of this.#p)if(o.isHandlingMimeForPasting(r.type)){o.paste(r,this.currentLayer);return}let s=e.getData("application/pdfjs");if(!s)return;try{s=JSON.parse(s)}catch(r){ot(`paste: "${r.message}".`);return}if(!Array.isArray(s))return;this.unselectAll();const n=this.currentLayer;try{const r=[];for(const l of s){const h=await n.deserialize(l);if(!h)return;r.push(h)}const o=()=>{for(const l of r)this.#tt(l);this.#et(r)},a=()=>{for(const l of r)l.remove()};this.addCommands({cmd:o,undo:a,mustExec:!0})}catch(r){ot(`paste: "${r.message}".`)}}keydown(t){!this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!0),this.#S!==rt.NONE&&!this.isEditorHandlingKeyboard&&Ls._keyboardManager.exec(this,t)}keyup(t){this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!1,this.#C&&(this.#C=!1,this.#q("main_toolbar")))}onEditingAction({name:t}){switch(t){case"undo":case"redo":case"delete":case"selectAll":this[t]();break;case"highlightSelection":this.highlightSelection("context_menu");break}}#I(t){Object.entries(t).some(([s,n])=>this.#z[s]!==n)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(this.#z,t)}),this.#S===rt.HIGHLIGHT&&t.hasSelectedEditor===!1&&this.#B([[ft.HIGHLIGHT_FREE,!0]]))}#B(t){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:t})}setEditingState(t){t?(this.#rt(),this.#J(),this.#I({isEditing:this.#S!==rt.NONE,isEmpty:this.#G(),hasSomethingToUndo:this.#o.hasSomethingToUndo(),hasSomethingToRedo:this.#o.hasSomethingToRedo(),hasSelectedEditor:!1})):(this.#ot(),this.#Z(),this.#I({isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(t){if(!this.#p){this.#p=t;for(const e of this.#p)this.#B(e.defaultPropertiesToUpdate)}}getId(){return this.#P.id}get currentLayer(){return this.#i.get(this.#d)}getLayer(t){return this.#i.get(t)}get currentPageIndex(){return this.#d}addLayer(t){this.#i.set(t.pageIndex,t),this.#E?t.enable():t.disable()}removeLayer(t){this.#i.delete(t.pageIndex)}async updateMode(t,e=null,s=!1,n=!1){if(this.#S!==t&&!(this.#N&&(await this.#N.promise,!this.#N))){if(this.#N=Promise.withResolvers(),this.#l?.commitOrRemove(),this.#S=t,t===rt.NONE){this.setEditingState(!1),this.#ht(),this._editorUndoBar?.hide(),this.#N.resolve();return}t===rt.SIGNATURE&&await this.#$?.loadSignatures(),this.setEditingState(!0),await this.#ct(),this.unselectAll();for(const r of this.#i.values())r.updateMode(t);if(!e){s&&this.addNewEditorFromKeyboard(),this.#N.resolve();return}for(const r of this.#s.values())r.annotationElementId===e||r.id===e?(this.setSelected(r),n&&r.enterInEditMode()):r.unselect();this.#N.resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(t){t.mode!==this.#S&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...t})}updateParams(t,e){if(this.#p){switch(t){case ft.CREATE:this.currentLayer.addNewEditor(e);return;case ft.HIGHLIGHT_DEFAULT_COLOR:this.#M?.updateColor(e);break;case ft.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(this.#W||=new Map).set(t,e),this.showAllEditors("highlight",e);break}for(const s of this.#v)s.updateParams(t,e);for(const s of this.#p)s.updateDefaultParams(t,e)}}showAllEditors(t,e,s=!1){for(const r of this.#s.values())r.editorType===t&&r.show(e);(this.#W?.get(ft.HIGHLIGHT_SHOW_ALL)??!0)!==e&&this.#B([[ft.HIGHLIGHT_SHOW_ALL,e]])}enableWaiting(t=!1){if(this.#R!==t){this.#R=t;for(const e of this.#i.values())t?e.disableClick():e.enableClick(),e.div.classList.toggle("waiting",t)}}async#ct(){if(!this.#E){this.#E=!0;const t=[];for(const e of this.#i.values())t.push(e.enable());await Promise.all(t);for(const e of this.#s.values())e.enable()}}#ht(){if(this.unselectAll(),this.#E){this.#E=!1;for(const t of this.#i.values())t.disable();for(const t of this.#s.values())t.disable()}}getEditors(t){const e=[];for(const s of this.#s.values())s.pageIndex===t&&e.push(s);return e}getEditor(t){return this.#s.get(t)}addEditor(t){this.#s.set(t.id,t)}removeEditor(t){t.div.contains(document.activeElement)&&(this.#y&&clearTimeout(this.#y),this.#y=setTimeout(()=>{this.focusMainContainer(),this.#y=null},0)),this.#s.delete(t.id),t.annotationElementId&&this.#k?.delete(t.annotationElementId),this.unselect(t),(!t.annotationElementId||!this.#h.has(t.annotationElementId))&&this.#n?.remove(t.id)}addDeletedAnnotationElement(t){this.#h.add(t.annotationElementId),this.addChangedExistingAnnotation(t),t.deleted=!0}isDeletedAnnotationElement(t){return this.#h.has(t)}removeDeletedAnnotationElement(t){this.#h.delete(t.annotationElementId),this.removeChangedExistingAnnotation(t),t.deleted=!1}#tt(t){const e=this.#i.get(t.pageIndex);e?e.addOrRebuild(t):(this.addEditor(t),this.addToAnnotationStorage(t))}setActiveEditor(t){this.#e!==t&&(this.#e=t,t&&this.#B(t.propertiesToUpdate))}get#ut(){let t=null;for(t of this.#v);return t}updateUI(t){this.#ut===t&&this.#B(t.propertiesToUpdate)}updateUIForDefaultProperties(t){this.#B(t.defaultPropertiesToUpdate)}toggleSelected(t){if(this.#v.has(t)){this.#v.delete(t),t.unselect(),this.#I({hasSelectedEditor:this.hasSelection});return}this.#v.add(t),t.select(),this.#B(t.propertiesToUpdate),this.#I({hasSelectedEditor:!0})}setSelected(t){this.updateToolbar({mode:t.mode,editId:t.id}),this.#l?.commitOrRemove();for(const e of this.#v)e!==t&&e.unselect();this.#v.clear(),this.#v.add(t),t.select(),this.#B(t.propertiesToUpdate),this.#I({hasSelectedEditor:!0})}isSelected(t){return this.#v.has(t)}get firstSelectedEditor(){return this.#v.values().next().value}unselect(t){t.unselect(),this.#v.delete(t),this.#I({hasSelectedEditor:this.hasSelection})}get hasSelection(){return this.#v.size!==0}get isEnterHandled(){return this.#v.size===1&&this.firstSelectedEditor.isEnterHandled}undo(){this.#o.undo(),this.#I({hasSomethingToUndo:this.#o.hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:this.#G()}),this._editorUndoBar?.hide()}redo(){this.#o.redo(),this.#I({hasSomethingToUndo:!0,hasSomethingToRedo:this.#o.hasSomethingToRedo(),isEmpty:this.#G()})}addCommands(t){this.#o.add(t),this.#I({hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:this.#G()})}cleanUndoStack(t){this.#o.cleanType(t)}#G(){if(this.#s.size===0)return!0;if(this.#s.size===1)for(const t of this.#s.values())return t.isEmpty();return!1}delete(){this.commitOrRemove();const t=this.currentLayer?.endDrawingSession(!0);if(!this.hasSelection&&!t)return;const e=t?[t]:[...this.#v],s=()=>{this._editorUndoBar?.show(n,e.length===1?e[0].editorType:e.length);for(const r of e)r.remove()},n=()=>{for(const r of e)this.#tt(r)};this.addCommands({cmd:s,undo:n,mustExec:!0})}commitOrRemove(){this.#e?.commitOrRemove()}hasSomethingToControl(){return this.#e||this.hasSelection}#et(t){for(const e of this.#v)e.unselect();this.#v.clear();for(const e of t)e.isEmpty()||(this.#v.add(e),e.select());this.#I({hasSelectedEditor:this.hasSelection})}selectAll(){for(const t of this.#v)t.commit();this.#et(this.#s.values())}unselectAll(){if(!(this.#e&&(this.#e.commitOrRemove(),this.#S!==rt.NONE))&&!this.#l?.commitOrRemove()&&this.hasSelection){for(const t of this.#v)t.unselect();this.#v.clear(),this.#I({hasSelectedEditor:!1})}}translateSelectedEditors(t,e,s=!1){if(s||this.commitOrRemove(),!this.hasSelection)return;this.#V[0]+=t,this.#V[1]+=e;const[n,r]=this.#V,o=[...this.#v],a=1e3;this.#O&&clearTimeout(this.#O),this.#O=setTimeout(()=>{this.#O=null,this.#V[0]=this.#V[1]=0,this.addCommands({cmd:()=>{for(const l of o)this.#s.has(l.id)&&(l.translateInPage(n,r),l.translationDone())},undo:()=>{for(const l of o)this.#s.has(l.id)&&(l.translateInPage(-n,-r),l.translationDone())},mustExec:!1})},a);for(const l of o)l.translateInPage(t,e),l.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),this.#f=new Map;for(const t of this.#v)this.#f.set(t,{savedX:t.x,savedY:t.y,savedPageIndex:t.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!this.#f)return!1;this.disableUserSelect(!1);const t=this.#f;this.#f=null;let e=!1;for(const[{x:n,y:r,pageIndex:o},a]of t)a.newX=n,a.newY=r,a.newPageIndex=o,e||=n!==a.savedX||r!==a.savedY||o!==a.savedPageIndex;if(!e)return!1;const s=(n,r,o,a)=>{if(this.#s.has(n.id)){const l=this.#i.get(a);l?n._setParentAndPosition(l,r,o):(n.pageIndex=a,n.x=r,n.y=o)}};return this.addCommands({cmd:()=>{for(const[n,{newX:r,newY:o,newPageIndex:a}]of t)s(n,r,o,a)},undo:()=>{for(const[n,{savedX:r,savedY:o,savedPageIndex:a}]of t)s(n,r,o,a)},mustExec:!0}),!0}dragSelectedEditors(t,e){if(this.#f)for(const s of this.#f.keys())s.drag(t,e)}rebuild(t){if(t.parent===null){const e=this.getLayer(t.pageIndex);e?(e.changeParent(t),e.addOrRebuild(t)):(this.addEditor(t),this.addToAnnotationStorage(t),t.rebuild())}else t.parent.addOrRebuild(t)}get isEditorHandlingKeyboard(){return this.getActive()?.shouldGetKeyboardEvents()||this.#v.size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(t){return this.#e===t}getActive(){return this.#e}getMode(){return this.#S}get imageManager(){return ut(this,"imageManager",new rl)}getSelectionBoxes(t){if(!t)return null;const e=document.getSelection();for(let h=0,c=e.rangeCount;h<c;h++)if(!t.contains(e.getRangeAt(h).commonAncestorContainer))return null;const{x:s,y:n,width:r,height:o}=t.getBoundingClientRect();let a;switch(t.getAttribute("data-main-rotation")){case"90":a=(h,c,u,d)=>({x:(c-n)/o,y:1-(h+u-s)/r,width:d/o,height:u/r});break;case"180":a=(h,c,u,d)=>({x:1-(h+u-s)/r,y:1-(c+d-n)/o,width:u/r,height:d/o});break;case"270":a=(h,c,u,d)=>({x:1-(c+d-n)/o,y:(h-s)/r,width:d/o,height:u/r});break;default:a=(h,c,u,d)=>({x:(h-s)/r,y:(c-n)/o,width:u/r,height:d/o});break}const l=[];for(let h=0,c=e.rangeCount;h<c;h++){const u=e.getRangeAt(h);if(!u.collapsed)for(const{x:d,y:f,width:g,height:p}of u.getClientRects())g===0||p===0||l.push(a(d,f,g,p))}return l.length===0?null:l}addChangedExistingAnnotation({annotationElementId:t,id:e}){(this.#a||=new Map).set(t,e)}removeChangedExistingAnnotation({annotationElementId:t}){this.#a?.delete(t)}renderAnnotationElement(t){const e=this.#a?.get(t.data.id);if(!e)return;const s=this.#n.getRawValue(e);s&&(this.#S===rt.NONE&&!s.hasBeenModified||s.renderAnnotationElement(t))}setMissingCanvas(t,e,s){const n=this.#k?.get(t);n&&(n.setCanvas(e,s),this.#k.delete(t))}addMissingCanvas(t,e){(this.#k||=new Map).set(t,e)}}class Xe{#t=null;#e=!1;#s=null;#i=null;#r=null;#n=null;#a=!1;#o=null;#u=null;#l=null;#d=null;#h=!1;static#f=null;static _l10n=null;constructor(t){this.#u=t,this.#h=t._uiManager.useNewAltTextFlow,Xe.#f||=Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"})}static initialize(t){Xe._l10n??=t}async render(){const t=this.#s=document.createElement("button");t.className="altText",t.tabIndex="0";const e=this.#i=document.createElement("span");t.append(e),this.#h?(t.classList.add("new"),t.setAttribute("data-l10n-id",Xe.#f.missing),e.setAttribute("data-l10n-id",Xe.#f["missing-label"])):(t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const s=this.#u._uiManager._signal;t.addEventListener("contextmenu",Be,{signal:s}),t.addEventListener("pointerdown",r=>r.stopPropagation(),{signal:s});const n=r=>{r.preventDefault(),this.#u._uiManager.editAltText(this.#u),this.#h&&this.#u._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:this.#p}})};return t.addEventListener("click",n,{capture:!0,signal:s}),t.addEventListener("keydown",r=>{r.target===t&&r.key==="Enter"&&(this.#a=!0,n(r))},{signal:s}),await this.#g(),t}get#p(){return this.#t&&"added"||this.#t===null&&this.guessedText&&"review"||"missing"}finish(){this.#s&&(this.#s.focus({focusVisible:this.#a}),this.#a=!1)}isEmpty(){return this.#h?this.#t===null:!this.#t&&!this.#e}hasData(){return this.#h?this.#t!==null||!!this.#l:this.isEmpty()}get guessedText(){return this.#l}async setGuessedText(t){this.#t===null&&(this.#l=t,this.#d=await Xe._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:t}),this.#g())}toggleAltTextBadge(t=!1){if(!this.#h||this.#t){this.#o?.remove(),this.#o=null;return}if(!this.#o){const e=this.#o=document.createElement("div");e.className="noAltTextBadge",this.#u.div.append(e)}this.#o.classList.toggle("hidden",!t)}serialize(t){let e=this.#t;return!t&&this.#l===e&&(e=this.#d),{altText:e,decorative:this.#e,guessedText:this.#l,textWithDisclaimer:this.#d}}get data(){return{altText:this.#t,decorative:this.#e}}set data({altText:t,decorative:e,guessedText:s,textWithDisclaimer:n,cancel:r=!1}){s&&(this.#l=s,this.#d=n),!(this.#t===t&&this.#e===e)&&(r||(this.#t=t,this.#e=e),this.#g())}toggle(t=!1){this.#s&&(!t&&this.#n&&(clearTimeout(this.#n),this.#n=null),this.#s.disabled=!t)}shown(){this.#u._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:this.#p}})}destroy(){this.#s?.remove(),this.#s=null,this.#i=null,this.#r=null,this.#o?.remove(),this.#o=null}async#g(){const t=this.#s;if(!t)return;if(this.#h){if(t.classList.toggle("done",!!this.#t),t.setAttribute("data-l10n-id",Xe.#f[this.#p]),this.#i?.setAttribute("data-l10n-id",Xe.#f[`${this.#p}-label`]),!this.#t){this.#r?.remove();return}}else{if(!this.#t&&!this.#e){t.classList.remove("done"),this.#r?.remove();return}t.classList.add("done"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let e=this.#r;if(!e){this.#r=e=document.createElement("span"),e.className="tooltip",e.setAttribute("role","tooltip"),e.id=`alt-text-tooltip-${this.#u.id}`;const n=100,r=this.#u._uiManager._signal;r.addEventListener("abort",()=>{clearTimeout(this.#n),this.#n=null},{once:!0}),t.addEventListener("mouseenter",()=>{this.#n=setTimeout(()=>{this.#n=null,this.#r.classList.add("show"),this.#u._reportTelemetry({action:"alt_text_tooltip"})},n)},{signal:r}),t.addEventListener("mouseleave",()=>{this.#n&&(clearTimeout(this.#n),this.#n=null),this.#r?.classList.remove("show")},{signal:r})}this.#e?e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(e.removeAttribute("data-l10n-id"),e.textContent=this.#t),e.parentNode||t.append(e),this.#u.getElementForAltText()?.setAttribute("aria-describedby",e.id)}}class so{#t;#e=!1;#s=null;#i;#r;#n;#a;#o=null;#u;#l=null;#d;#h=null;constructor({container:t,isPinchingDisabled:e=null,isPinchingStopped:s=null,onPinchStart:n=null,onPinching:r=null,onPinchEnd:o=null,signal:a}){this.#t=t,this.#s=s,this.#i=e,this.#r=n,this.#n=r,this.#a=o,this.#d=new AbortController,this.#u=AbortSignal.any([a,this.#d.signal]),t.addEventListener("touchstart",this.#f.bind(this),{passive:!1,signal:this.#u})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/ss.pixelRatio}#f(t){if(this.#i?.())return;if(t.touches.length===1){if(this.#o)return;const n=this.#o=new AbortController,r=AbortSignal.any([this.#u,n.signal]),o=this.#t,a={capture:!0,signal:r,passive:!1},l=h=>{h.pointerType==="touch"&&(this.#o?.abort(),this.#o=null)};o.addEventListener("pointerdown",h=>{h.pointerType==="touch"&&(Bt(h),l(h))},a),o.addEventListener("pointerup",l,a),o.addEventListener("pointercancel",l,a);return}if(!this.#h){this.#h=new AbortController;const n=AbortSignal.any([this.#u,this.#h.signal]),r=this.#t,o={signal:n,capture:!1,passive:!1};r.addEventListener("touchmove",this.#p.bind(this),o);const a=this.#g.bind(this);r.addEventListener("touchend",a,o),r.addEventListener("touchcancel",a,o),o.capture=!0,r.addEventListener("pointerdown",Bt,o),r.addEventListener("pointermove",Bt,o),r.addEventListener("pointercancel",Bt,o),r.addEventListener("pointerup",Bt,o),this.#r?.()}if(Bt(t),t.touches.length!==2||this.#s?.()){this.#l=null;return}let[e,s]=t.touches;e.identifier>s.identifier&&([e,s]=[s,e]),this.#l={touch0X:e.screenX,touch0Y:e.screenY,touch1X:s.screenX,touch1Y:s.screenY}}#p(t){if(!this.#l||t.touches.length!==2)return;Bt(t);let[e,s]=t.touches;e.identifier>s.identifier&&([e,s]=[s,e]);const{screenX:n,screenY:r}=e,{screenX:o,screenY:a}=s,l=this.#l,{touch0X:h,touch0Y:c,touch1X:u,touch1Y:d}=l,f=u-h,g=d-c,p=o-n,_=a-r,m=Math.hypot(p,_)||1,y=Math.hypot(f,g)||1;if(!this.#e&&Math.abs(y-m)<=so.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(l.touch0X=n,l.touch0Y=r,l.touch1X=o,l.touch1Y=a,!this.#e){this.#e=!0;return}const v=[(n+o)/2,(r+a)/2];this.#n?.(v,y,m)}#g(t){t.touches.length>=2||(this.#h&&(this.#h.abort(),this.#h=null,this.#a?.()),this.#l&&(Bt(t),this.#l=null,this.#e=!1))}destroy(){this.#d?.abort(),this.#d=null,this.#o?.abort(),this.#o=null}}class J{#t=null;#e=null;#s=null;#i=!1;#r=null;#n="";#a=!1;#o=null;#u=null;#l=null;#d=null;#h="";#f=!1;#p=null;#g=!1;#c=!1;#m=!1;#_=null;#b=0;#y=0;#A=null;#w=null;isSelected=!1;_isCopy=!1;_editToolbar=null;_initialOptions=Object.create(null);_initialData=null;_isVisible=!0;_uiManager=null;_focusEventsAllowed=!0;static _l10n=null;static _l10nResizer=null;#C=!1;#x=J._zIndex++;static _borderLineWidth=-1;static _colorManager=new ol;static _zIndex=1;static _telemetryTimeout=1e3;static get _resizerKeyboardManager(){const t=J.prototype._resizeWithKeyboard,e=Ls.TRANSLATE_SMALL,s=Ls.TRANSLATE_BIG;return ut(this,"_resizerKeyboardManager",new Vn([[["ArrowLeft","mac+ArrowLeft"],t,{args:[-e,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t,{args:[-s,0]}],[["ArrowRight","mac+ArrowRight"],t,{args:[e,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t,{args:[s,0]}],[["ArrowUp","mac+ArrowUp"],t,{args:[0,-e]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t,{args:[0,-s]}],[["ArrowDown","mac+ArrowDown"],t,{args:[0,e]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t,{args:[0,s]}],[["Escape","mac+Escape"],J.prototype._stopResizingWithKeyboard]]))}constructor(t){this.parent=t.parent,this.id=t.id,this.width=this.height=null,this.pageIndex=t.parent.pageIndex,this.name=t.name,this.div=null,this._uiManager=t.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=t.isCentered,this._structTreeParentId=null,this.annotationElementId=t.annotationElementId||null;const{rotation:e,rawDims:{pageWidth:s,pageHeight:n,pageX:r,pageY:o}}=this.parent.viewport;this.rotation=e,this.pageRotation=(360+e-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[s,n],this.pageTranslation=[r,o];const[a,l]=this.parentDimensions;this.x=t.x/a,this.y=t.y/l,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return ut(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(t){const e=new z_({id:t.parent.getNextId(),parent:t.parent,uiManager:t._uiManager});e.annotationElementId=t.annotationElementId,e.deleted=!0,e._uiManager.addToAnnotationStorage(e)}static initialize(t,e){if(J._l10n??=t,J._l10nResizer||=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"}),J._borderLineWidth!==-1)return;const s=getComputedStyle(document.documentElement);J._borderLineWidth=parseFloat(s.getPropertyValue("--outline-width"))||0}static updateDefaultParams(t,e){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(t){return!1}static paste(t,e){At("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return this.#C}set _isDraggable(t){this.#C=t,this.div?.classList.toggle("draggable",t)}get isEnterHandled(){return!0}center(){const[t,e]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*e/(t*2),this.y+=this.width*t/(e*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*e/(t*2),this.y-=this.width*t/(e*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(t){this._uiManager.addCommands(t)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=this.#x}setParent(t){t!==null?(this.pageIndex=t.pageIndex,this.pageDimensions=t.pageDimensions):this.#j(),this.parent=t}focusin(t){this._focusEventsAllowed&&(this.#f?this.#f=!1:this.parent.setSelected(this))}focusout(t){!this._focusEventsAllowed||!this.isAttachedToDOM||t.relatedTarget?.closest(`#${this.id}`)||(t.preventDefault(),this.parent?.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(t,e,s,n){const[r,o]=this.parentDimensions;[s,n]=this.screenToPageTranslation(s,n),this.x=(t+s)/r,this.y=(e+n)/o,this.fixAndSetPosition()}_moveAfterPaste(t,e){const[s,n]=this.parentDimensions;this.setAt(t*s,e*n,this.width*s,this.height*n),this._onTranslated()}#P([t,e],s,n){[s,n]=this.screenToPageTranslation(s,n),this.x+=s/t,this.y+=n/e,this._onTranslating(this.x,this.y),this.fixAndSetPosition()}translate(t,e){this.#P(this.parentDimensions,t,e)}translateInPage(t,e){this.#p||=[this.x,this.y,this.width,this.height],this.#P(this.pageDimensions,t,e),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(t,e){this.#p||=[this.x,this.y,this.width,this.height];const{div:s,parentDimensions:[n,r]}=this;if(this.x+=t/n,this.y+=e/r,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:u,y:d}=this.div.getBoundingClientRect();this.parent.findNewParent(this,u,d)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:o,y:a}=this;const[l,h]=this.getBaseTranslation();o+=l,a+=h;const{style:c}=s;c.left=`${(100*o).toFixed(2)}%`,c.top=`${(100*a).toFixed(2)}%`,this._onTranslating(o,a),s.scrollIntoView({block:"nearest"})}_onTranslating(t,e){}_onTranslated(t,e){}get _hasBeenMoved(){return!!this.#p&&(this.#p[0]!==this.x||this.#p[1]!==this.y)}get _hasBeenResized(){return!!this.#p&&(this.#p[2]!==this.width||this.#p[3]!==this.height)}getBaseTranslation(){const[t,e]=this.parentDimensions,{_borderLineWidth:s}=J,n=s/t,r=s/e;switch(this.rotation){case 90:return[-n,r];case 180:return[n,r];case 270:return[n,-r];default:return[-n,-r]}}get _mustFixPosition(){return!0}fixAndSetPosition(t=this.rotation){const{div:{style:e},pageDimensions:[s,n]}=this;let{x:r,y:o,width:a,height:l}=this;if(a*=s,l*=n,r*=s,o*=n,this._mustFixPosition)switch(t){case 0:r=re(r,0,s-a),o=re(o,0,n-l);break;case 90:r=re(r,0,s-l),o=re(o,a,n);break;case 180:r=re(r,a,s),o=re(o,l,n);break;case 270:r=re(r,l,s),o=re(o,0,n-a);break}this.x=r/=s,this.y=o/=n;const[h,c]=this.getBaseTranslation();r+=h,o+=c,e.left=`${(100*r).toFixed(2)}%`,e.top=`${(100*o).toFixed(2)}%`,this.moveInDOM()}static#E(t,e,s){switch(s){case 90:return[e,-t];case 180:return[-t,-e];case 270:return[-e,t];default:return[t,e]}}screenToPageTranslation(t,e){return J.#E(t,e,this.parentRotation)}pageTranslationToScreen(t,e){return J.#E(t,e,360-this.parentRotation)}#R(t){switch(t){case 90:{const[e,s]=this.pageDimensions;return[0,-e/s,s/e,0]}case 180:return[-1,0,0,-1];case 270:{const[e,s]=this.pageDimensions;return[0,e/s,-s/e,0]}default:return[1,0,0,1]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:t,pageDimensions:[e,s]}=this;return[e*t,s*t]}setDims(t,e){const[s,n]=this.parentDimensions,{style:r}=this.div;r.width=`${(100*t/s).toFixed(2)}%`,this.#a||(r.height=`${(100*e/n).toFixed(2)}%`)}fixDims(){const{style:t}=this.div,{height:e,width:s}=t,n=s.endsWith("%"),r=!this.#a&&e.endsWith("%");if(n&&r)return;const[o,a]=this.parentDimensions;n||(t.width=`${(100*parseFloat(s)/o).toFixed(2)}%`),!this.#a&&!r&&(t.height=`${(100*parseFloat(e)/a).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}#T(){if(this.#o)return;this.#o=document.createElement("div"),this.#o.classList.add("resizers");const t=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],e=this._uiManager._signal;for(const s of t){const n=document.createElement("div");this.#o.append(n),n.classList.add("resizer",s),n.setAttribute("data-resizer-name",s),n.addEventListener("pointerdown",this.#L.bind(this,s),{signal:e}),n.addEventListener("contextmenu",Be,{signal:e}),n.tabIndex=-1}this.div.prepend(this.#o)}#L(t,e){e.preventDefault();const{isMac:s}=Yt.platform;if(e.button!==0||e.ctrlKey&&s)return;this.#s?.toggle(!1);const n=this._isDraggable;this._isDraggable=!1,this.#u=[e.screenX,e.screenY];const r=new AbortController,o=this._uiManager.combinedSignal(r);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",this.#H.bind(this,t),{passive:!0,capture:!0,signal:o}),window.addEventListener("touchmove",Bt,{passive:!1,signal:o}),window.addEventListener("contextmenu",Be,{signal:o}),this.#l={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const a=this.parent.div.style.cursor,l=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(e.target).cursor;const h=()=>{r.abort(),this.parent.togglePointerEvents(!0),this.#s?.toggle(!0),this._isDraggable=n,this.parent.div.style.cursor=a,this.div.style.cursor=l,this.#k()};window.addEventListener("pointerup",h,{signal:o}),window.addEventListener("blur",h,{signal:o})}#M(t,e,s,n){this.width=s,this.height=n,this.x=t,this.y=e;const[r,o]=this.parentDimensions;this.setDims(r*s,o*n),this.fixAndSetPosition(),this._onResized()}_onResized(){}#k(){if(!this.#l)return;const{savedX:t,savedY:e,savedWidth:s,savedHeight:n}=this.#l;this.#l=null;const r=this.x,o=this.y,a=this.width,l=this.height;r===t&&o===e&&a===s&&l===n||this.addCommands({cmd:this.#M.bind(this,r,o,a,l),undo:this.#M.bind(this,t,e,s,n),mustExec:!0})}static _round(t){return Math.round(t*1e4)/1e4}#H(t,e){const[s,n]=this.parentDimensions,r=this.x,o=this.y,a=this.width,l=this.height,h=J.MIN_SIZE/s,c=J.MIN_SIZE/n,u=this.#R(this.rotation),d=(N,O)=>[u[0]*N+u[2]*O,u[1]*N+u[3]*O],f=this.#R(360-this.rotation),g=(N,O)=>[f[0]*N+f[2]*O,f[1]*N+f[3]*O];let p,_,m=!1,y=!1;switch(t){case"topLeft":m=!0,p=(N,O)=>[0,0],_=(N,O)=>[N,O];break;case"topMiddle":p=(N,O)=>[N/2,0],_=(N,O)=>[N/2,O];break;case"topRight":m=!0,p=(N,O)=>[N,0],_=(N,O)=>[0,O];break;case"middleRight":y=!0,p=(N,O)=>[N,O/2],_=(N,O)=>[0,O/2];break;case"bottomRight":m=!0,p=(N,O)=>[N,O],_=(N,O)=>[0,0];break;case"bottomMiddle":p=(N,O)=>[N/2,O],_=(N,O)=>[N/2,0];break;case"bottomLeft":m=!0,p=(N,O)=>[0,O],_=(N,O)=>[N,0];break;case"middleLeft":y=!0,p=(N,O)=>[0,O/2],_=(N,O)=>[N,O/2];break}const v=p(a,l),b=_(a,l);let E=d(...b);const S=J._round(r+E[0]),T=J._round(o+E[1]);let I=1,k=1,$,B;if(e.fromKeyboard)({deltaX:$,deltaY:B}=e);else{const{screenX:N,screenY:O}=e,[et,wt]=this.#u;[$,B]=this.screenToPageTranslation(N-et,O-wt),this.#u[0]=N,this.#u[1]=O}if([$,B]=g($/s,B/n),m){const N=Math.hypot(a,l);I=k=Math.max(Math.min(Math.hypot(b[0]-v[0]-$,b[1]-v[1]-B)/N,1/a,1/l),h/a,c/l)}else y?I=re(Math.abs(b[0]-v[0]-$),h,1)/a:k=re(Math.abs(b[1]-v[1]-B),c,1)/l;const Z=J._round(a*I),X=J._round(l*k);E=d(..._(Z,X));const it=S-E[0],mt=T-E[1];this.#p||=[this.x,this.y,this.width,this.height],this.width=Z,this.height=X,this.x=it,this.y=mt,this.setDims(s*Z,n*X),this.fixAndSetPosition(),this._onResizing()}_onResizing(){}altTextFinish(){this.#s?.finish()}get toolbarButtons(){return null}async addEditToolbar(){if(this._editToolbar||this.#c)return this._editToolbar;this._editToolbar=new vn(this),this.div.append(this._editToolbar.render());const{toolbarButtons:t}=this;if(t)for(const[e,s]of t)await this._editToolbar.addButton(e,s);return this._editToolbar.addButton("delete"),this._editToolbar}removeEditToolbar(){this._editToolbar&&(this._editToolbar.remove(),this._editToolbar=null,this.#s?.destroy())}addContainer(t){const e=this._editToolbar?.div;e?e.before(t):this.div.append(t)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return this.#s||(Xe.initialize(J._l10n),this.#s=new Xe(this),this.#t&&(this.#s.data=this.#t,this.#t=null)),this.#s}get altTextData(){return this.#s?.data}set altTextData(t){this.#s&&(this.#s.data=t)}get guessedAltText(){return this.#s?.guessedText}async setGuessedAltText(t){await this.#s?.setGuessedText(t)}serializeAltText(t){return this.#s?.serialize(t)}hasAltText(){return!!this.#s&&!this.#s.isEmpty()}hasAltTextData(){return this.#s?.hasData()??!1}render(){const t=this.div=document.createElement("div");t.setAttribute("data-editor-rotation",(360-this.rotation)%360),t.className=this.name,t.setAttribute("id",this.id),t.tabIndex=this.#i?-1:0,t.setAttribute("role","application"),this.defaultL10nId&&t.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||t.classList.add("hidden"),this.setInForeground(),this.#W();const[e,s]=this.parentDimensions;this.parentRotation%180!==0&&(t.style.maxWidth=`${(100*s/e).toFixed(2)}%`,t.style.maxHeight=`${(100*e/s).toFixed(2)}%`);const[n,r]=this.getInitialTranslation();return this.translate(n,r),hd(this,t,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(this.#w||=new so({container:t,isPinchingDisabled:()=>!this.isSelected,onPinchStart:this.#S.bind(this),onPinching:this.#v.bind(this),onPinchEnd:this.#F.bind(this),signal:this._uiManager._signal})),this._uiManager._editorUndoBar?.hide(),t}#S(){this.#l={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height},this.#s?.toggle(!1),this.parent.togglePointerEvents(!1)}#v(t,e,s){let r=.7*(s/e)+1-.7;if(r===1)return;const o=this.#R(this.rotation),a=(S,T)=>[o[0]*S+o[2]*T,o[1]*S+o[3]*T],[l,h]=this.parentDimensions,c=this.x,u=this.y,d=this.width,f=this.height,g=J.MIN_SIZE/l,p=J.MIN_SIZE/h;r=Math.max(Math.min(r,1/d,1/f),g/d,p/f);const _=J._round(d*r),m=J._round(f*r);if(_===d&&m===f)return;this.#p||=[c,u,d,f];const y=a(d/2,f/2),v=J._round(c+y[0]),b=J._round(u+y[1]),E=a(_/2,m/2);this.x=v-E[0],this.y=b-E[1],this.width=_,this.height=m,this.setDims(l*_,h*m),this.fixAndSetPosition(),this._onResizing()}#F(){this.#s?.toggle(!0),this.parent.togglePointerEvents(!0),this.#k()}pointerdown(t){const{isMac:e}=Yt.platform;if(t.button!==0||t.ctrlKey&&e){t.preventDefault();return}if(this.#f=!0,this._isDraggable){this.#U(t);return}this.#$(t)}#$(t){const{isMac:e}=Yt.platform;t.ctrlKey&&!e||t.shiftKey||t.metaKey&&e?this.parent.toggleSelected(this):this.parent.setSelected(this)}#U(t){const{isSelected:e}=this;this._uiManager.setUpDragSession();let s=!1;const n=new AbortController,r=this._uiManager.combinedSignal(n),o={capture:!0,passive:!1,signal:r},a=h=>{n.abort(),this.#r=null,this.#f=!1,this._uiManager.endDragSession()||this.#$(h),s&&this._onStopDragging()};e&&(this.#b=t.clientX,this.#y=t.clientY,this.#r=t.pointerId,this.#n=t.pointerType,window.addEventListener("pointermove",h=>{s||(s=!0,this._onStartDragging());const{clientX:c,clientY:u,pointerId:d}=h;if(d!==this.#r){Bt(h);return}const[f,g]=this.screenToPageTranslation(c-this.#b,u-this.#y);this.#b=c,this.#y=u,this._uiManager.dragSelectedEditors(f,g)},o),window.addEventListener("touchmove",Bt,o),window.addEventListener("pointerdown",h=>{h.pointerType===this.#n&&(this.#w||h.isPrimary)&&a(h),Bt(h)},o));const l=h=>{if(!this.#r||this.#r===h.pointerId){a(h);return}Bt(h)};window.addEventListener("pointerup",l,{signal:r}),window.addEventListener("blur",l,{signal:r})}_onStartDragging(){}_onStopDragging(){}moveInDOM(){this.#_&&clearTimeout(this.#_),this.#_=setTimeout(()=>{this.#_=null,this.parent?.moveEditorInDOM(this)},0)}_setParentAndPosition(t,e,s){t.changeParent(this),this.x=e,this.y=s,this.fixAndSetPosition(),this._onTranslated()}getRect(t,e,s=this.rotation){const n=this.parentScale,[r,o]=this.pageDimensions,[a,l]=this.pageTranslation,h=t/n,c=e/n,u=this.x*r,d=this.y*o,f=this.width*r,g=this.height*o;switch(s){case 0:return[u+h+a,o-d-c-g+l,u+h+f+a,o-d-c+l];case 90:return[u+c+a,o-d+h+l,u+c+g+a,o-d+h+f+l];case 180:return[u-h-f+a,o-d+c+l,u-h+a,o-d+c+g+l];case 270:return[u-c-g+a,o-d-h-f+l,u-c+a,o-d-h+l];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(t,e){const[s,n,r,o]=t,a=r-s,l=o-n;switch(this.rotation){case 0:return[s,e-o,a,l];case 90:return[s,e-n,l,a];case 180:return[r,e-n,a,l];case 270:return[r,e-o,l,a];default:throw new Error("Invalid rotation")}}onceAdded(t){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),this.#c=!0,!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),this.#c=!1,!0):!1}isInEditMode(){return this.#c}shouldGetKeyboardEvents(){return this.#m}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:t,left:e,bottom:s,right:n}=this.getClientDimensions(),{innerHeight:r,innerWidth:o}=window;return e<o&&n>0&&t<r&&s>0}#W(){if(this.#d||!this.div)return;this.#d=new AbortController;const t=this._uiManager.combinedSignal(this.#d);this.div.addEventListener("focusin",this.focusin.bind(this),{signal:t}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:t})}rebuild(){this.#W()}rotate(t){}resize(){}serializeDeleted(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:this._initialData?.popupRef||""}}serialize(t=!1,e=null){At("An editor must be serializable")}static async deserialize(t,e,s){const n=new this.prototype.constructor({parent:e,id:e.getNextId(),uiManager:s,annotationElementId:t.annotationElementId});n.rotation=t.rotation,n.#t=t.accessibilityData,n._isCopy=t.isCopy||!1;const[r,o]=n.pageDimensions,[a,l,h,c]=n.getRectInCurrentCoords(t.rect,o);return n.x=a/r,n.y=l/o,n.width=h/r,n.height=c/o,n}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){if(this.#d?.abort(),this.#d=null,this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.#_&&(clearTimeout(this.#_),this.#_=null),this.#j(),this.removeEditToolbar(),this.#A){for(const t of this.#A.values())clearTimeout(t);this.#A=null}this.parent=null,this.#w?.destroy(),this.#w=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(this.#T(),this.#o.classList.remove("hidden"))}get toolbarPosition(){return null}keydown(t){if(!this.isResizable||t.target!==this.div||t.key!=="Enter")return;this._uiManager.setSelected(this),this.#l={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const e=this.#o.children;if(!this.#e){this.#e=Array.from(e);const o=this.#z.bind(this),a=this.#V.bind(this),l=this._uiManager._signal;for(const h of this.#e){const c=h.getAttribute("data-resizer-name");h.setAttribute("role","spinbutton"),h.addEventListener("keydown",o,{signal:l}),h.addEventListener("blur",a,{signal:l}),h.addEventListener("focus",this.#O.bind(this,c),{signal:l}),h.setAttribute("data-l10n-id",J._l10nResizer[c])}}const s=this.#e[0];let n=0;for(const o of e){if(o===s)break;n++}const r=(360-this.rotation+this.parentRotation)%360/90*(this.#e.length/4);if(r!==n){if(r<n)for(let a=0;a<n-r;a++)this.#o.append(this.#o.firstChild);else if(r>n)for(let a=0;a<r-n;a++)this.#o.firstChild.before(this.#o.lastChild);let o=0;for(const a of e){const h=this.#e[o++].getAttribute("data-resizer-name");a.setAttribute("data-l10n-id",J._l10nResizer[h])}}this.#D(0),this.#m=!0,this.#o.firstChild.focus({focusVisible:!0}),t.preventDefault(),t.stopImmediatePropagation()}#z(t){J._resizerKeyboardManager.exec(this,t)}#V(t){this.#m&&t.relatedTarget?.parentNode!==this.#o&&this.#j()}#O(t){this.#h=this.#m?t:""}#D(t){if(this.#e)for(const e of this.#e)e.tabIndex=t}_resizeWithKeyboard(t,e){this.#m&&this.#H(this.#h,{deltaX:t,deltaY:e,fromKeyboard:!0})}#j(){this.#m=!1,this.#D(-1),this.#k()}_stopResizingWithKeyboard(){this.#j(),this.div.focus()}select(){if(!(this.isSelected&&this._editToolbar)){if(this.isSelected=!0,this.makeResizable(),this.div?.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{this.div?.classList.contains("selectedEditor")&&this._editToolbar?.show()});return}this._editToolbar?.show(),this.#s?.toggleAltTextBadge(!1)}}unselect(){this.isSelected&&(this.isSelected=!1,this.#o?.classList.add("hidden"),this.div?.classList.remove("selectedEditor"),this.div?.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),this._editToolbar?.hide(),this.#s?.toggleAltTextBadge(!0))}updateParams(t,e){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(t){this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.id})}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return this.#g}set isEditing(t){this.#g=t,this.parent&&(t?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(t,e){this.#a=!0;const s=t/e,{style:n}=this.div;n.aspectRatio=s,n.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(t,e=!1){if(e){this.#A||=new Map;const{action:s}=t;let n=this.#A.get(s);n&&clearTimeout(n),n=setTimeout(()=>{this._reportTelemetry(t),this.#A.delete(s),this.#A.size===0&&(this.#A=null)},J._telemetryTimeout),this.#A.set(s,n);return}t.type||=this.editorType,this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:t}})}show(t=this._isVisible){this.div.classList.toggle("hidden",!t),this._isVisible=t}enable(){this.div&&(this.div.tabIndex=0),this.#i=!1}disable(){this.div&&(this.div.tabIndex=-1),this.#i=!0}renderAnnotationElement(t){let e=t.container.querySelector(".annotationContent");if(!e)e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),t.container.prepend(e);else if(e.nodeName==="CANVAS"){const s=e;e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),s.before(e)}return e}resetAnnotationElement(t){const{firstChild:e}=t.container;e?.nodeName==="DIV"&&e.classList.contains("annotationContent")&&e.remove()}}class z_ extends J{constructor(t){super(t),this.annotationElementId=t.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const Dc=3285377520,Te=4294901760,Ke=65535;class ud{constructor(t){this.h1=t?t&4294967295:Dc,this.h2=t?t&4294967295:Dc}update(t){let e,s;if(typeof t=="string"){e=new Uint8Array(t.length*2),s=0;for(let p=0,_=t.length;p<_;p++){const m=t.charCodeAt(p);m<=255?e[s++]=m:(e[s++]=m>>>8,e[s++]=m&255)}}else if(ArrayBuffer.isView(t))e=t.slice(),s=e.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const n=s>>2,r=s-n*4,o=new Uint32Array(e.buffer,0,n);let a=0,l=0,h=this.h1,c=this.h2;const u=3432918353,d=461845907,f=u&Ke,g=d&Ke;for(let p=0;p<n;p++)p&1?(a=o[p],a=a*u&Te|a*f&Ke,a=a<<15|a>>>17,a=a*d&Te|a*g&Ke,h^=a,h=h<<13|h>>>19,h=h*5+3864292196):(l=o[p],l=l*u&Te|l*f&Ke,l=l<<15|l>>>17,l=l*d&Te|l*g&Ke,c^=l,c=c<<13|c>>>19,c=c*5+3864292196);switch(a=0,r){case 3:a^=e[n*4+2]<<16;case 2:a^=e[n*4+1]<<8;case 1:a^=e[n*4],a=a*u&Te|a*f&Ke,a=a<<15|a>>>17,a=a*d&Te|a*g&Ke,n&1?h^=a:c^=a}this.h1=h,this.h2=c}hexdigest(){let t=this.h1,e=this.h2;return t^=e>>>1,t=t*3981806797&Te|t*36045&Ke,e=e*4283543511&Te|((e<<16|t>>>16)*2950163797&Te)>>>16,t^=e>>>1,t=t*444984403&Te|t*60499&Ke,e=e*3301882366&Te|((e<<16|t>>>16)*3120437893&Te)>>>16,t^=e>>>1,(t>>>0).toString(16).padStart(8,"0")+(e>>>0).toString(16).padStart(8,"0")}}const wa=Object.freeze({map:null,hash:"",transfer:void 0});class al{#t=!1;#e=null;#s=new Map;constructor(){this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(t,e){const s=this.#s.get(t);return s===void 0?e:Object.assign(e,s)}getRawValue(t){return this.#s.get(t)}remove(t){if(this.#s.delete(t),this.#s.size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const e of this.#s.values())if(e instanceof J)return;this.onAnnotationEditor(null)}}setValue(t,e){const s=this.#s.get(t);let n=!1;if(s!==void 0)for(const[r,o]of Object.entries(e))s[r]!==o&&(n=!0,s[r]=o);else n=!0,this.#s.set(t,e);n&&this.#i(),e instanceof J&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(e.constructor._type)}has(t){return this.#s.has(t)}get size(){return this.#s.size}#i(){this.#t||(this.#t=!0,typeof this.onSetModified=="function"&&this.onSetModified())}resetModified(){this.#t&&(this.#t=!1,typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new dd(this)}get serializable(){if(this.#s.size===0)return wa;const t=new Map,e=new ud,s=[],n=Object.create(null);let r=!1;for(const[o,a]of this.#s){const l=a instanceof J?a.serialize(!1,n):a;l&&(t.set(o,l),e.update(`${o}:${JSON.stringify(l)}`),r||=!!l.bitmap)}if(r)for(const o of t.values())o.bitmap&&s.push(o.bitmap);return t.size>0?{map:t,hash:e.hexdigest(),transfer:s}:wa}get editorStats(){let t=null;const e=new Map;for(const s of this.#s.values()){if(!(s instanceof J))continue;const n=s.telemetryFinalData;if(!n)continue;const{type:r}=n;e.has(r)||e.set(r,Object.getPrototypeOf(s).constructor),t||=Object.create(null);const o=t[r]||=new Map;for(const[a,l]of Object.entries(n)){if(a==="type")continue;let h=o.get(a);h||(h=new Map,o.set(a,h));const c=h.get(l)??0;h.set(l,c+1)}}for(const[s,n]of e)t[s]=n.computeTelemetryFinalData(t[s]);return t}resetModifiedIds(){this.#e=null}get modifiedIds(){if(this.#e)return this.#e;const t=[];for(const e of this.#s.values())!(e instanceof J)||!e.annotationElementId||!e.serialize()||t.push(e.annotationElementId);return this.#e={ids:new Set(t),hash:t.join(",")}}[Symbol.iterator](){return this.#s.entries()}}class dd extends al{#t;constructor(t){super();const{map:e,hash:s,transfer:n}=t.serializable,r=structuredClone(e,n?{transfer:n}:null);this.#t={map:r,hash:s,transfer:n}}get print(){At("Should not call PrintAnnotationStorage.print")}get serializable(){return this.#t}get modifiedIds(){return ut(this,"modifiedIds",{ids:new Set,hash:""})}}class G_{#t=new Set;constructor({ownerDocument:t=globalThis.document,styleElement:e=null}){this._document=t,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(t){this.nativeFontFaces.add(t),this._document.fonts.add(t)}removeNativeFontFace(t){this.nativeFontFaces.delete(t),this._document.fonts.delete(t)}insertRule(t){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const e=this.styleElement.sheet;e.insertRule(t,e.cssRules.length)}clear(){for(const t of this.nativeFontFaces)this._document.fonts.delete(t);this.nativeFontFaces.clear(),this.#t.clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:t,disableFontFace:e,_inspectFont:s}){if(!(!t||this.#t.has(t.loadedName))){if(Ht(!e,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:n,src:r,style:o}=t,a=new FontFace(n,r,o);this.addNativeFontFace(a);try{await a.load(),this.#t.add(n),s?.(t)}catch{ot(`Cannot load system font: ${t.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(a)}return}At("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(t){if(t.attached||t.missingFile&&!t.systemFontInfo)return;if(t.attached=!0,t.systemFontInfo){await this.loadSystemFont(t);return}if(this.isFontLoadingAPISupported){const s=t.createNativeFontFace();if(s){this.addNativeFontFace(s);try{await s.loaded}catch(n){throw ot(`Failed to load font '${s.family}': '${n}'.`),t.disableFontFace=!0,n}}return}const e=t.createFontFaceRule();if(e){if(this.insertRule(e),this.isSyncFontLoadingSupported)return;await new Promise(s=>{const n=this._queueLoadingCallback(s);this._prepareFontLoadEvent(t,n)})}}get isFontLoadingAPISupported(){const t=!!this._document?.fonts;return ut(this,"isFontLoadingAPISupported",t)}get isSyncFontLoadingSupported(){return ut(this,"isSyncFontLoadingSupported",ne||Yt.platform.isFirefox)}_queueLoadingCallback(t){function e(){for(Ht(!n.done,"completeRequest() cannot be called twice."),n.done=!0;s.length>0&&s[0].done;){const r=s.shift();setTimeout(r.callback,0)}}const{loadingRequests:s}=this,n={done:!1,complete:e,callback:t};return s.push(n),n}get _loadTestFont(){const t=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return ut(this,"_loadTestFont",t)}_prepareFontLoadEvent(t,e){function s(b,E){return b.charCodeAt(E)<<24|b.charCodeAt(E+1)<<16|b.charCodeAt(E+2)<<8|b.charCodeAt(E+3)&255}function n(b,E,S,T){const I=b.substring(0,E),k=b.substring(E+S);return I+T+k}let r,o;const a=this._document.createElement("canvas");a.width=1,a.height=1;const l=a.getContext("2d");let h=0;function c(b,E){if(++h>30){ot("Load test font never loaded."),E();return}if(l.font="30px "+b,l.fillText(".",0,20),l.getImageData(0,0,1,1).data[3]>0){E();return}setTimeout(c.bind(null,b,E))}const u=`lt${Date.now()}${this.loadTestFontId++}`;let d=this._loadTestFont;d=n(d,976,u.length,u);const g=16,p=1482184792;let _=s(d,g);for(r=0,o=u.length-3;r<o;r+=4)_=_-p+s(u,r)|0;r<u.length&&(_=_-p+s(u+"XXX",r)|0),d=n(d,g,4,I_(_));const m=`url(data:font/opentype;base64,${btoa(d)});`,y=`@font-face {font-family:"${u}";src:${m}}`;this.insertRule(y);const v=this._document.createElement("div");v.style.visibility="hidden",v.style.width=v.style.height="10px",v.style.position="absolute",v.style.top=v.style.left="0px";for(const b of[t.loadedName,u]){const E=this._document.createElement("span");E.textContent="Hi",E.style.fontFamily=b,v.append(E)}this._document.body.append(v),c(u,()=>{v.remove(),e.complete()})}}class K_{constructor(t,e=null){this.compiledGlyphs=Object.create(null);for(const s in t)this[s]=t[s];this._inspectFont=e}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let t;if(!this.cssFontInfo)t=new FontFace(this.loadedName,this.data,{});else{const e={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(e.style=`oblique ${this.cssFontInfo.italicAngle}deg`),t=new FontFace(this.cssFontInfo.fontFamily,this.data,e)}return this._inspectFont?.(this),t}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const t=`url(data:${this.mimetype};base64,${ld(this.data)});`;let e;if(!this.cssFontInfo)e=`@font-face {font-family:"${this.loadedName}";src:${t}}`;else{let s=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(s+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),e=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${s}src:${t}}`}return this._inspectFont?.(this,t),e}getPathGenerator(t,e){if(this.compiledGlyphs[e]!==void 0)return this.compiledGlyphs[e];const s=this.loadedName+"_path_"+e;let n;try{n=t.get(s)}catch(o){ot(`getPathGenerator - ignoring character: "${o}".`)}const r=new Path2D(n||"");return this.fontExtraProperties||t.delete(s),this.compiledGlyphs[e]=r}}function q_(i){if(i instanceof URL)return i.href;if(typeof i=="string"){if(ne)return i;const t=URL.parse(i,window.location);if(t)return t.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function Y_(i){if(ne&&typeof Buffer<"u"&&i instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(i instanceof Uint8Array&&i.byteLength===i.buffer.byteLength)return i;if(typeof i=="string")return $n(i);if(i instanceof ArrayBuffer||ArrayBuffer.isView(i)||typeof i=="object"&&!isNaN(i?.length))return new Uint8Array(i);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function er(i){if(typeof i!="string")return null;if(i.endsWith("/"))return i;throw new Error(`Invalid factory url: "${i}" must include trailing slash.`)}const Ea=i=>typeof i=="object"&&Number.isInteger(i?.num)&&i.num>=0&&Number.isInteger(i?.gen)&&i.gen>=0,X_=i=>typeof i=="object"&&typeof i?.name=="string",Q_=D_.bind(null,Ea,X_);class J_{#t=new Map;#e=Promise.resolve();postMessage(t,e){const s={data:structuredClone(t,e?{transfer:e}:null)};this.#e.then(()=>{for(const[n]of this.#t)n.call(this,s)})}addEventListener(t,e,s=null){let n=null;if(s?.signal instanceof AbortSignal){const{signal:r}=s;if(r.aborted){ot("LoopbackPort - cannot use an `aborted` signal.");return}const o=()=>this.removeEventListener(t,e);n=()=>r.removeEventListener("abort",o),r.addEventListener("abort",o)}this.#t.set(e,n)}removeEventListener(t,e){this.#t.get(e)?.(),this.#t.delete(e)}terminate(){for(const[,t]of this.#t)t?.();this.#t.clear()}}const sr={DATA:1,ERROR:2},Ft={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function Nc(){}function fe(i){if(i instanceof Is||i instanceof ya||i instanceof Mc||i instanceof kr||i instanceof Lo)return i;switch(i instanceof Error||typeof i=="object"&&i!==null||At('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),i.name){case"AbortException":return new Is(i.message);case"InvalidPDFException":return new ya(i.message);case"PasswordException":return new Mc(i.message,i.code);case"ResponseException":return new kr(i.message,i.status,i.missing);case"UnknownErrorException":return new Lo(i.message,i.details)}return new Lo(i.message,i.toString())}class ln{#t=new AbortController;constructor(t,e,s){this.sourceName=t,this.targetName=e,this.comObj=s,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),s.addEventListener("message",this.#e.bind(this),{signal:this.#t.signal})}#e({data:t}){if(t.targetName!==this.sourceName)return;if(t.stream){this.#i(t);return}if(t.callback){const s=t.callbackId,n=this.callbackCapabilities[s];if(!n)throw new Error(`Cannot resolve callback ${s}`);if(delete this.callbackCapabilities[s],t.callback===sr.DATA)n.resolve(t.data);else if(t.callback===sr.ERROR)n.reject(fe(t.reason));else throw new Error("Unexpected callback case");return}const e=this.actionHandler[t.action];if(!e)throw new Error(`Unknown action from worker: ${t.action}`);if(t.callbackId){const s=this.sourceName,n=t.sourceName,r=this.comObj;Promise.try(e,t.data).then(function(o){r.postMessage({sourceName:s,targetName:n,callback:sr.DATA,callbackId:t.callbackId,data:o})},function(o){r.postMessage({sourceName:s,targetName:n,callback:sr.ERROR,callbackId:t.callbackId,reason:fe(o)})});return}if(t.streamId){this.#s(t);return}e(t.data)}on(t,e){const s=this.actionHandler;if(s[t])throw new Error(`There is already an actionName called "${t}"`);s[t]=e}send(t,e,s){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:e},s)}sendWithPromise(t,e,s){const n=this.callbackId++,r=Promise.withResolvers();this.callbackCapabilities[n]=r;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:n,data:e},s)}catch(o){r.reject(o)}return r.promise}sendWithStream(t,e,s,n){const r=this.streamId++,o=this.sourceName,a=this.targetName,l=this.comObj;return new ReadableStream({start:h=>{const c=Promise.withResolvers();return this.streamControllers[r]={controller:h,startCall:c,pullCall:null,cancelCall:null,isClosed:!1},l.postMessage({sourceName:o,targetName:a,action:t,streamId:r,data:e,desiredSize:h.desiredSize},n),c.promise},pull:h=>{const c=Promise.withResolvers();return this.streamControllers[r].pullCall=c,l.postMessage({sourceName:o,targetName:a,stream:Ft.PULL,streamId:r,desiredSize:h.desiredSize}),c.promise},cancel:h=>{Ht(h instanceof Error,"cancel must have a valid reason");const c=Promise.withResolvers();return this.streamControllers[r].cancelCall=c,this.streamControllers[r].isClosed=!0,l.postMessage({sourceName:o,targetName:a,stream:Ft.CANCEL,streamId:r,reason:fe(h)}),c.promise}},s)}#s(t){const e=t.streamId,s=this.sourceName,n=t.sourceName,r=this.comObj,o=this,a=this.actionHandler[t.action],l={enqueue(h,c=1,u){if(this.isCancelled)return;const d=this.desiredSize;this.desiredSize-=c,d>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),r.postMessage({sourceName:s,targetName:n,stream:Ft.ENQUEUE,streamId:e,chunk:h},u)},close(){this.isCancelled||(this.isCancelled=!0,r.postMessage({sourceName:s,targetName:n,stream:Ft.CLOSE,streamId:e}),delete o.streamSinks[e])},error(h){Ht(h instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,r.postMessage({sourceName:s,targetName:n,stream:Ft.ERROR,streamId:e,reason:fe(h)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:t.desiredSize,ready:null};l.sinkCapability.resolve(),l.ready=l.sinkCapability.promise,this.streamSinks[e]=l,Promise.try(a,t.data,l).then(function(){r.postMessage({sourceName:s,targetName:n,stream:Ft.START_COMPLETE,streamId:e,success:!0})},function(h){r.postMessage({sourceName:s,targetName:n,stream:Ft.START_COMPLETE,streamId:e,reason:fe(h)})})}#i(t){const e=t.streamId,s=this.sourceName,n=t.sourceName,r=this.comObj,o=this.streamControllers[e],a=this.streamSinks[e];switch(t.stream){case Ft.START_COMPLETE:t.success?o.startCall.resolve():o.startCall.reject(fe(t.reason));break;case Ft.PULL_COMPLETE:t.success?o.pullCall.resolve():o.pullCall.reject(fe(t.reason));break;case Ft.PULL:if(!a){r.postMessage({sourceName:s,targetName:n,stream:Ft.PULL_COMPLETE,streamId:e,success:!0});break}a.desiredSize<=0&&t.desiredSize>0&&a.sinkCapability.resolve(),a.desiredSize=t.desiredSize,Promise.try(a.onPull||Nc).then(function(){r.postMessage({sourceName:s,targetName:n,stream:Ft.PULL_COMPLETE,streamId:e,success:!0})},function(h){r.postMessage({sourceName:s,targetName:n,stream:Ft.PULL_COMPLETE,streamId:e,reason:fe(h)})});break;case Ft.ENQUEUE:if(Ht(o,"enqueue should have stream controller"),o.isClosed)break;o.controller.enqueue(t.chunk);break;case Ft.CLOSE:if(Ht(o,"close should have stream controller"),o.isClosed)break;o.isClosed=!0,o.controller.close(),this.#r(o,e);break;case Ft.ERROR:Ht(o,"error should have stream controller"),o.controller.error(fe(t.reason)),this.#r(o,e);break;case Ft.CANCEL_COMPLETE:t.success?o.cancelCall.resolve():o.cancelCall.reject(fe(t.reason)),this.#r(o,e);break;case Ft.CANCEL:if(!a)break;const l=fe(t.reason);Promise.try(a.onCancel||Nc,l).then(function(){r.postMessage({sourceName:s,targetName:n,stream:Ft.CANCEL_COMPLETE,streamId:e,success:!0})},function(h){r.postMessage({sourceName:s,targetName:n,stream:Ft.CANCEL_COMPLETE,streamId:e,reason:fe(h)})}),a.sinkCapability.reject(l),a.isCancelled=!0,delete this.streamSinks[e];break;default:throw new Error("Unexpected stream case")}}async#r(t,e){await Promise.allSettled([t.startCall?.promise,t.pullCall?.promise,t.cancelCall?.promise]),delete this.streamControllers[e]}destroy(){this.#t?.abort(),this.#t=null}}class fd{#t=!1;constructor({enableHWA:t=!1}){this.#t=t}create(t,e){if(t<=0||e<=0)throw new Error("Invalid canvas size");const s=this._createCanvas(t,e);return{canvas:s,context:s.getContext("2d",{willReadFrequently:!this.#t})}}reset(t,e,s){if(!t.canvas)throw new Error("Canvas is not specified");if(e<=0||s<=0)throw new Error("Invalid canvas size");t.canvas.width=e,t.canvas.height=s}destroy(t){if(!t.canvas)throw new Error("Canvas is not specified");t.canvas.width=0,t.canvas.height=0,t.canvas=null,t.context=null}_createCanvas(t,e){At("Abstract method `_createCanvas` called.")}}class Z_ extends fd{constructor({ownerDocument:t=globalThis.document,enableHWA:e=!1}){super({enableHWA:e}),this._document=t}_createCanvas(t,e){const s=this._document.createElement("canvas");return s.width=t,s.height=e,s}}class pd{constructor({baseUrl:t=null,isCompressed:e=!0}){this.baseUrl=t,this.isCompressed=e}async fetch({name:t}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!t)throw new Error("CMap name must be specified.");const e=this.baseUrl+t+(this.isCompressed?".bcmap":"");return this._fetch(e).then(s=>({cMapData:s,isCompressed:this.isCompressed})).catch(s=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${e}`)})}async _fetch(t){At("Abstract method `_fetch` called.")}}class Fc extends pd{async _fetch(t){const e=await Bn(t,this.isCompressed?"arraybuffer":"text");return e instanceof ArrayBuffer?new Uint8Array(e):$n(e)}}class gd{addFilter(t){return"none"}addHCMFilter(t,e){return"none"}addAlphaFilter(t){return"none"}addLuminosityFilter(t){return"none"}addHighlightHCMFilter(t,e,s,n,r){return"none"}destroy(t=!1){}}class tb extends gd{#t;#e;#s;#i;#r;#n;#a=0;constructor({docId:t,ownerDocument:e=globalThis.document}){super(),this.#i=t,this.#r=e}get#o(){return this.#e||=new Map}get#u(){return this.#n||=new Map}get#l(){if(!this.#s){const t=this.#r.createElement("div"),{style:e}=t;e.visibility="hidden",e.contain="strict",e.width=e.height=0,e.position="absolute",e.top=e.left=0,e.zIndex=-1;const s=this.#r.createElementNS(os,"svg");s.setAttribute("width",0),s.setAttribute("height",0),this.#s=this.#r.createElementNS(os,"defs"),t.append(s),s.append(this.#s),this.#r.body.append(t)}return this.#s}#d(t){if(t.length===1){const l=t[0],h=new Array(256);for(let u=0;u<256;u++)h[u]=l[u]/255;const c=h.join(",");return[c,c,c]}const[e,s,n]=t,r=new Array(256),o=new Array(256),a=new Array(256);for(let l=0;l<256;l++)r[l]=e[l]/255,o[l]=s[l]/255,a[l]=n[l]/255;return[r.join(","),o.join(","),a.join(",")]}#h(t){if(this.#t===void 0){this.#t="";const e=this.#r.URL;e!==this.#r.baseURI&&(eo(e)?ot('#createUrl: ignore "data:"-URL for performance reasons.'):this.#t=rd(e,""))}return`url(${this.#t}#${t})`}addFilter(t){if(!t)return"none";let e=this.#o.get(t);if(e)return e;const[s,n,r]=this.#d(t),o=t.length===1?s:`${s}${n}${r}`;if(e=this.#o.get(o),e)return this.#o.set(t,e),e;const a=`g_${this.#i}_transfer_map_${this.#a++}`,l=this.#h(a);this.#o.set(t,l),this.#o.set(o,l);const h=this.#g(a);return this.#m(s,n,r,h),l}addHCMFilter(t,e){const s=`${t}-${e}`,n="base";let r=this.#u.get(n);if(r?.key===s||(r?(r.filter?.remove(),r.key=s,r.url="none",r.filter=null):(r={key:s,url:"none",filter:null},this.#u.set(n,r)),!t||!e))return r.url;const o=this.#b(t);t=Y.makeHexColor(...o);const a=this.#b(e);if(e=Y.makeHexColor(...a),this.#l.style.color="",t==="#000000"&&e==="#ffffff"||t===e)return r.url;const l=new Array(256);for(let f=0;f<=255;f++){const g=f/255;l[f]=g<=.03928?g/12.92:((g+.055)/1.055)**2.4}const h=l.join(","),c=`g_${this.#i}_hcm_filter`,u=r.filter=this.#g(c);this.#m(h,h,h,u),this.#p(u);const d=(f,g)=>{const p=o[f]/255,_=a[f]/255,m=new Array(g+1);for(let y=0;y<=g;y++)m[y]=p+y/g*(_-p);return m.join(",")};return this.#m(d(0,5),d(1,5),d(2,5),u),r.url=this.#h(c),r.url}addAlphaFilter(t){let e=this.#o.get(t);if(e)return e;const[s]=this.#d([t]),n=`alpha_${s}`;if(e=this.#o.get(n),e)return this.#o.set(t,e),e;const r=`g_${this.#i}_alpha_map_${this.#a++}`,o=this.#h(r);this.#o.set(t,o),this.#o.set(n,o);const a=this.#g(r);return this.#_(s,a),o}addLuminosityFilter(t){let e=this.#o.get(t||"luminosity");if(e)return e;let s,n;if(t?([s]=this.#d([t]),n=`luminosity_${s}`):n="luminosity",e=this.#o.get(n),e)return this.#o.set(t,e),e;const r=`g_${this.#i}_luminosity_map_${this.#a++}`,o=this.#h(r);this.#o.set(t,o),this.#o.set(n,o);const a=this.#g(r);return this.#f(a),t&&this.#_(s,a),o}addHighlightHCMFilter(t,e,s,n,r){const o=`${e}-${s}-${n}-${r}`;let a=this.#u.get(t);if(a?.key===o||(a?(a.filter?.remove(),a.key=o,a.url="none",a.filter=null):(a={key:o,url:"none",filter:null},this.#u.set(t,a)),!e||!s))return a.url;const[l,h]=[e,s].map(this.#b.bind(this));let c=Math.round(.2126*l[0]+.7152*l[1]+.0722*l[2]),u=Math.round(.2126*h[0]+.7152*h[1]+.0722*h[2]),[d,f]=[n,r].map(this.#b.bind(this));u<c&&([c,u,d,f]=[u,c,f,d]),this.#l.style.color="";const g=(m,y,v)=>{const b=new Array(256),E=(u-c)/v,S=m/255,T=(y-m)/(255*v);let I=0;for(let k=0;k<=v;k++){const $=Math.round(c+k*E),B=S+k*T;for(let Z=I;Z<=$;Z++)b[Z]=B;I=$+1}for(let k=I;k<256;k++)b[k]=b[I-1];return b.join(",")},p=`g_${this.#i}_hcm_${t}_filter`,_=a.filter=this.#g(p);return this.#p(_),this.#m(g(d[0],f[0],5),g(d[1],f[1],5),g(d[2],f[2],5),_),a.url=this.#h(p),a.url}destroy(t=!1){t&&this.#n?.size||(this.#s?.parentNode.parentNode.remove(),this.#s=null,this.#e?.clear(),this.#e=null,this.#n?.clear(),this.#n=null,this.#a=0)}#f(t){const e=this.#r.createElementNS(os,"feColorMatrix");e.setAttribute("type","matrix"),e.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.append(e)}#p(t){const e=this.#r.createElementNS(os,"feColorMatrix");e.setAttribute("type","matrix"),e.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(e)}#g(t){const e=this.#r.createElementNS(os,"filter");return e.setAttribute("color-interpolation-filters","sRGB"),e.setAttribute("id",t),this.#l.append(e),e}#c(t,e,s){const n=this.#r.createElementNS(os,e);n.setAttribute("type","discrete"),n.setAttribute("tableValues",s),t.append(n)}#m(t,e,s,n){const r=this.#r.createElementNS(os,"feComponentTransfer");n.append(r),this.#c(r,"feFuncR",t),this.#c(r,"feFuncG",e),this.#c(r,"feFuncB",s)}#_(t,e){const s=this.#r.createElementNS(os,"feComponentTransfer");e.append(s),this.#c(s,"feFuncA",t)}#b(t){return this.#l.style.color=t,nl(getComputedStyle(this.#l).getPropertyValue("color"))}}class md{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!t)throw new Error("Font filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetch(e).catch(s=>{throw new Error(`Unable to load font data at: ${e}`)})}async _fetch(t){At("Abstract method `_fetch` called.")}}class $c extends md{async _fetch(t){const e=await Bn(t,"arraybuffer");return new Uint8Array(e)}}class _d{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!t)throw new Error("Wasm filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetch(e).catch(s=>{throw new Error(`Unable to load wasm data at: ${e}`)})}async _fetch(t){At("Abstract method `_fetch` called.")}}class Bc extends _d{async _fetch(t){const e=await Bn(t,"arraybuffer");return new Uint8Array(e)}}ne&&ot("Please use the `legacy` build in Node.js environments.");async function ll(i){const e=await process.getBuiltinModule("fs").promises.readFile(i);return new Uint8Array(e)}class eb extends gd{}class sb extends fd{_createCanvas(t,e){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(t,e)}}class ib extends pd{async _fetch(t){return ll(t)}}class nb extends md{async _fetch(t){return ll(t)}}class rb extends _d{async _fetch(t){return ll(t)}}const Gt={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function Sa(i,t){if(!t)return;const e=t[2]-t[0],s=t[3]-t[1],n=new Path2D;n.rect(t[0],t[1],e,s),i.clip(n)}class cl{isModifyingCurrentTransform(){return!1}getPattern(){At("Abstract method `getPattern` called.")}}class ob extends cl{constructor(t){super(),this._type=t[1],this._bbox=t[2],this._colorStops=t[3],this._p0=t[4],this._p1=t[5],this._r0=t[6],this._r1=t[7],this.matrix=null}_createGradient(t){let e;this._type==="axial"?e=t.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(e=t.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const s of this._colorStops)e.addColorStop(s[0],s[1]);return e}getPattern(t,e,s,n){let r;if(n===Gt.STROKE||n===Gt.FILL){const o=e.current.getClippedPathBoundingBox(n,It(t))||[0,0,0,0],a=Math.ceil(o[2]-o[0])||1,l=Math.ceil(o[3]-o[1])||1,h=e.cachedCanvases.getCanvas("pattern",a,l),c=h.context;c.clearRect(0,0,c.canvas.width,c.canvas.height),c.beginPath(),c.rect(0,0,c.canvas.width,c.canvas.height),c.translate(-o[0],-o[1]),s=Y.transform(s,[1,0,0,1,o[0],o[1]]),c.transform(...e.baseTransform),this.matrix&&c.transform(...this.matrix),Sa(c,this._bbox),c.fillStyle=this._createGradient(c),c.fill(),r=t.createPattern(h.canvas,"no-repeat");const u=new DOMMatrix(s);r.setTransform(u)}else Sa(t,this._bbox),r=this._createGradient(t);return r}}function Oo(i,t,e,s,n,r,o,a){const l=t.coords,h=t.colors,c=i.data,u=i.width*4;let d;l[e+1]>l[s+1]&&(d=e,e=s,s=d,d=r,r=o,o=d),l[s+1]>l[n+1]&&(d=s,s=n,n=d,d=o,o=a,a=d),l[e+1]>l[s+1]&&(d=e,e=s,s=d,d=r,r=o,o=d);const f=(l[e]+t.offsetX)*t.scaleX,g=(l[e+1]+t.offsetY)*t.scaleY,p=(l[s]+t.offsetX)*t.scaleX,_=(l[s+1]+t.offsetY)*t.scaleY,m=(l[n]+t.offsetX)*t.scaleX,y=(l[n+1]+t.offsetY)*t.scaleY;if(g>=y)return;const v=h[r],b=h[r+1],E=h[r+2],S=h[o],T=h[o+1],I=h[o+2],k=h[a],$=h[a+1],B=h[a+2],Z=Math.round(g),X=Math.round(y);let it,mt,N,O,et,wt,kt,Tt;for(let ct=Z;ct<=X;ct++){if(ct<_){const x=ct<g?0:(g-ct)/(g-_);it=f-(f-p)*x,mt=v-(v-S)*x,N=b-(b-T)*x,O=E-(E-I)*x}else{let x;ct>y?x=1:_===y?x=0:x=(_-ct)/(_-y),it=p-(p-m)*x,mt=S-(S-k)*x,N=T-(T-$)*x,O=I-(I-B)*x}let pt;ct<g?pt=0:ct>y?pt=1:pt=(g-ct)/(g-y),et=f-(f-m)*pt,wt=v-(v-k)*pt,kt=b-(b-$)*pt,Tt=E-(E-B)*pt;const Nt=Math.round(Math.min(it,et)),Lt=Math.round(Math.max(it,et));let Et=u*ct+Nt*4;for(let x=Nt;x<=Lt;x++)pt=(it-x)/(it-et),pt<0?pt=0:pt>1&&(pt=1),c[Et++]=mt-(mt-wt)*pt|0,c[Et++]=N-(N-kt)*pt|0,c[Et++]=O-(O-Tt)*pt|0,c[Et++]=255}}function ab(i,t,e){const s=t.coords,n=t.colors;let r,o;switch(t.type){case"lattice":const a=t.verticesPerRow,l=Math.floor(s.length/a)-1,h=a-1;for(r=0;r<l;r++){let c=r*a;for(let u=0;u<h;u++,c++)Oo(i,e,s[c],s[c+1],s[c+a],n[c],n[c+1],n[c+a]),Oo(i,e,s[c+a+1],s[c+1],s[c+a],n[c+a+1],n[c+1],n[c+a])}break;case"triangles":for(r=0,o=s.length;r<o;r+=3)Oo(i,e,s[r],s[r+1],s[r+2],n[r],n[r+1],n[r+2]);break;default:throw new Error("illegal figure")}}class lb extends cl{constructor(t){super(),this._coords=t[2],this._colors=t[3],this._figures=t[4],this._bounds=t[5],this._bbox=t[6],this._background=t[7],this.matrix=null}_createMeshCanvas(t,e,s){const a=Math.floor(this._bounds[0]),l=Math.floor(this._bounds[1]),h=Math.ceil(this._bounds[2])-a,c=Math.ceil(this._bounds[3])-l,u=Math.min(Math.ceil(Math.abs(h*t[0]*1.1)),3e3),d=Math.min(Math.ceil(Math.abs(c*t[1]*1.1)),3e3),f=h/u,g=c/d,p={coords:this._coords,colors:this._colors,offsetX:-a,offsetY:-l,scaleX:1/f,scaleY:1/g},_=u+2*2,m=d+2*2,y=s.getCanvas("mesh",_,m),v=y.context,b=v.createImageData(u,d);if(e){const S=b.data;for(let T=0,I=S.length;T<I;T+=4)S[T]=e[0],S[T+1]=e[1],S[T+2]=e[2],S[T+3]=255}for(const S of this._figures)ab(b,S,p);return v.putImageData(b,2,2),{canvas:y.canvas,offsetX:a-2*f,offsetY:l-2*g,scaleX:f,scaleY:g}}isModifyingCurrentTransform(){return!0}getPattern(t,e,s,n){Sa(t,this._bbox);const r=new Float32Array(2);if(n===Gt.SHADING)Y.singularValueDecompose2dScale(It(t),r);else if(this.matrix){Y.singularValueDecompose2dScale(this.matrix,r);const[a,l]=r;Y.singularValueDecompose2dScale(e.baseTransform,r),r[0]*=a,r[1]*=l}else Y.singularValueDecompose2dScale(e.baseTransform,r);const o=this._createMeshCanvas(r,n===Gt.SHADING?null:this._background,e.cachedCanvases);return n!==Gt.SHADING&&(t.setTransform(...e.baseTransform),this.matrix&&t.transform(...this.matrix)),t.translate(o.offsetX,o.offsetY),t.scale(o.scaleX,o.scaleY),t.createPattern(o.canvas,"no-repeat")}}class cb extends cl{getPattern(){return"hotpink"}}function hb(i){switch(i[0]){case"RadialAxial":return new ob(i);case"Mesh":return new lb(i);case"Dummy":return new cb}throw new Error(`Unknown IR type: ${i[0]}`)}const Hc={COLORED:1,UNCOLORED:2};class hl{static MAX_PATTERN_SIZE=3e3;constructor(t,e,s,n){this.color=t[1],this.operatorList=t[2],this.matrix=t[3],this.bbox=t[4],this.xstep=t[5],this.ystep=t[6],this.paintType=t[7],this.tilingType=t[8],this.ctx=e,this.canvasGraphicsFactory=s,this.baseTransform=n}createPatternCanvas(t){const{bbox:e,operatorList:s,paintType:n,tilingType:r,color:o,canvasGraphicsFactory:a}=this;let{xstep:l,ystep:h}=this;l=Math.abs(l),h=Math.abs(h),to("TilingType: "+r);const c=e[0],u=e[1],d=e[2],f=e[3],g=d-c,p=f-u,_=new Float32Array(2);Y.singularValueDecompose2dScale(this.matrix,_);const[m,y]=_;Y.singularValueDecompose2dScale(this.baseTransform,_);const v=m*_[0],b=y*_[1];let E=g,S=p,T=!1,I=!1;const k=Math.ceil(l*v),$=Math.ceil(h*b),B=Math.ceil(g*v),Z=Math.ceil(p*b);k>=B?E=l:T=!0,$>=Z?S=h:I=!0;const X=this.getSizeAndScale(E,this.ctx.canvas.width,v),it=this.getSizeAndScale(S,this.ctx.canvas.height,b),mt=t.cachedCanvases.getCanvas("pattern",X.size,it.size),N=mt.context,O=a.createCanvasGraphics(N);if(O.groupLevel=t.groupLevel,this.setFillAndStrokeStyleToContext(O,n,o),N.translate(-X.scale*c,-it.scale*u),O.transform(X.scale,0,0,it.scale,0,0),N.save(),this.clipBbox(O,c,u,d,f),O.baseTransform=It(O.ctx),O.executeOperatorList(s),O.endDrawing(),N.restore(),T||I){const et=mt.canvas;T&&(E=l),I&&(S=h);const wt=this.getSizeAndScale(E,this.ctx.canvas.width,v),kt=this.getSizeAndScale(S,this.ctx.canvas.height,b),Tt=wt.size,ct=kt.size,pt=t.cachedCanvases.getCanvas("pattern-workaround",Tt,ct),Nt=pt.context,Lt=T?Math.floor(g/l):0,Et=I?Math.floor(p/h):0;for(let x=0;x<=Lt;x++)for(let H=0;H<=Et;H++)Nt.drawImage(et,Tt*x,ct*H,Tt,ct,0,0,Tt,ct);return{canvas:pt.canvas,scaleX:wt.scale,scaleY:kt.scale,offsetX:c,offsetY:u}}return{canvas:mt.canvas,scaleX:X.scale,scaleY:it.scale,offsetX:c,offsetY:u}}getSizeAndScale(t,e,s){const n=Math.max(hl.MAX_PATTERN_SIZE,e);let r=Math.ceil(t*s);return r>=n?r=n:s=r/t,{scale:s,size:r}}clipBbox(t,e,s,n,r){const o=n-e,a=r-s;t.ctx.rect(e,s,o,a),Y.axialAlignedBoundingBox([e,s,n,r],It(t.ctx),t.current.minMax),t.clip(),t.endPath()}setFillAndStrokeStyleToContext(t,e,s){const n=t.ctx,r=t.current;switch(e){case Hc.COLORED:const{fillStyle:o,strokeStyle:a}=this.ctx;n.fillStyle=r.fillColor=o,n.strokeStyle=r.strokeColor=a;break;case Hc.UNCOLORED:n.fillStyle=n.strokeStyle=s,r.fillColor=r.strokeColor=s;break;default:throw new P_(`Unsupported paint type: ${e}`)}}isModifyingCurrentTransform(){return!1}getPattern(t,e,s,n){let r=s;n!==Gt.SHADING&&(r=Y.transform(r,e.baseTransform),this.matrix&&(r=Y.transform(r,this.matrix)));const o=this.createPatternCanvas(e);let a=new DOMMatrix(r);a=a.translate(o.offsetX,o.offsetY),a=a.scale(1/o.scaleX,1/o.scaleY);const l=t.createPattern(o.canvas,"repeat");return l.setTransform(a),l}}function ub({src:i,srcPos:t=0,dest:e,width:s,height:n,nonBlackColor:r=4294967295,inverseDecode:o=!1}){const a=Yt.isLittleEndian?4278190080:255,[l,h]=o?[r,a]:[a,r],c=s>>3,u=s&7,d=i.length;e=new Uint32Array(e.buffer);let f=0;for(let g=0;g<n;g++){for(const _=t+c;t<_;t++){const m=t<d?i[t]:255;e[f++]=m&128?h:l,e[f++]=m&64?h:l,e[f++]=m&32?h:l,e[f++]=m&16?h:l,e[f++]=m&8?h:l,e[f++]=m&4?h:l,e[f++]=m&2?h:l,e[f++]=m&1?h:l}if(u===0)continue;const p=t<d?i[t++]:255;for(let _=0;_<u;_++)e[f++]=p&1<<7-_?h:l}return{srcPos:t,destPos:f}}const Vc=16,jc=100,db=15,Uc=10,ge=16,Do=new DOMMatrix,Ae=new Float32Array(2),yi=new Float32Array([1/0,1/0,-1/0,-1/0]);function fb(i,t){if(i._removeMirroring)throw new Error("Context is already forwarding operations.");i.__originalSave=i.save,i.__originalRestore=i.restore,i.__originalRotate=i.rotate,i.__originalScale=i.scale,i.__originalTranslate=i.translate,i.__originalTransform=i.transform,i.__originalSetTransform=i.setTransform,i.__originalResetTransform=i.resetTransform,i.__originalClip=i.clip,i.__originalMoveTo=i.moveTo,i.__originalLineTo=i.lineTo,i.__originalBezierCurveTo=i.bezierCurveTo,i.__originalRect=i.rect,i.__originalClosePath=i.closePath,i.__originalBeginPath=i.beginPath,i._removeMirroring=()=>{i.save=i.__originalSave,i.restore=i.__originalRestore,i.rotate=i.__originalRotate,i.scale=i.__originalScale,i.translate=i.__originalTranslate,i.transform=i.__originalTransform,i.setTransform=i.__originalSetTransform,i.resetTransform=i.__originalResetTransform,i.clip=i.__originalClip,i.moveTo=i.__originalMoveTo,i.lineTo=i.__originalLineTo,i.bezierCurveTo=i.__originalBezierCurveTo,i.rect=i.__originalRect,i.closePath=i.__originalClosePath,i.beginPath=i.__originalBeginPath,delete i._removeMirroring},i.save=function(){t.save(),this.__originalSave()},i.restore=function(){t.restore(),this.__originalRestore()},i.translate=function(e,s){t.translate(e,s),this.__originalTranslate(e,s)},i.scale=function(e,s){t.scale(e,s),this.__originalScale(e,s)},i.transform=function(e,s,n,r,o,a){t.transform(e,s,n,r,o,a),this.__originalTransform(e,s,n,r,o,a)},i.setTransform=function(e,s,n,r,o,a){t.setTransform(e,s,n,r,o,a),this.__originalSetTransform(e,s,n,r,o,a)},i.resetTransform=function(){t.resetTransform(),this.__originalResetTransform()},i.rotate=function(e){t.rotate(e),this.__originalRotate(e)},i.clip=function(e){t.clip(e),this.__originalClip(e)},i.moveTo=function(e,s){t.moveTo(e,s),this.__originalMoveTo(e,s)},i.lineTo=function(e,s){t.lineTo(e,s),this.__originalLineTo(e,s)},i.bezierCurveTo=function(e,s,n,r,o,a){t.bezierCurveTo(e,s,n,r,o,a),this.__originalBezierCurveTo(e,s,n,r,o,a)},i.rect=function(e,s,n,r){t.rect(e,s,n,r),this.__originalRect(e,s,n,r)},i.closePath=function(){t.closePath(),this.__originalClosePath()},i.beginPath=function(){t.beginPath(),this.__originalBeginPath()}}class pb{constructor(t){this.canvasFactory=t,this.cache=Object.create(null)}getCanvas(t,e,s){let n;return this.cache[t]!==void 0?(n=this.cache[t],this.canvasFactory.reset(n,e,s)):(n=this.canvasFactory.create(e,s),this.cache[t]=n),n}delete(t){delete this.cache[t]}clear(){for(const t in this.cache){const e=this.cache[t];this.canvasFactory.destroy(e),delete this.cache[t]}}}function ir(i,t,e,s,n,r,o,a,l,h){const[c,u,d,f,g,p]=It(i);if(u===0&&d===0){const y=o*c+g,v=Math.round(y),b=a*f+p,E=Math.round(b),S=(o+l)*c+g,T=Math.abs(Math.round(S)-v)||1,I=(a+h)*f+p,k=Math.abs(Math.round(I)-E)||1;return i.setTransform(Math.sign(c),0,0,Math.sign(f),v,E),i.drawImage(t,e,s,n,r,0,0,T,k),i.setTransform(c,u,d,f,g,p),[T,k]}if(c===0&&f===0){const y=a*d+g,v=Math.round(y),b=o*u+p,E=Math.round(b),S=(a+h)*d+g,T=Math.abs(Math.round(S)-v)||1,I=(o+l)*u+p,k=Math.abs(Math.round(I)-E)||1;return i.setTransform(0,Math.sign(u),Math.sign(d),0,v,E),i.drawImage(t,e,s,n,r,0,0,k,T),i.setTransform(c,u,d,f,g,p),[k,T]}i.drawImage(t,e,s,n,r,o,a,l,h);const _=Math.hypot(c,u),m=Math.hypot(d,f);return[_*l,m*h]}class Wc{alphaIsShape=!1;fontSize=0;fontSizeScale=1;textMatrix=null;textMatrixScale=1;fontMatrix=va;leading=0;x=0;y=0;lineX=0;lineY=0;charSpacing=0;wordSpacing=0;textHScale=1;textRenderingMode=Xt.FILL;textRise=0;fillColor="#000000";strokeColor="#000000";patternFill=!1;patternStroke=!1;fillAlpha=1;strokeAlpha=1;lineWidth=1;activeSMask=null;transferMaps="none";constructor(t,e){this.clipBox=new Float32Array([0,0,t,e]),this.minMax=yi.slice()}clone(){const t=Object.create(this);return t.clipBox=this.clipBox.slice(),t.minMax=this.minMax.slice(),t}getPathBoundingBox(t=Gt.FILL,e=null){const s=this.minMax.slice();if(t===Gt.STROKE){e||At("Stroke bounding box must include transform."),Y.singularValueDecompose2dScale(e,Ae);const n=Ae[0]*this.lineWidth/2,r=Ae[1]*this.lineWidth/2;s[0]-=n,s[1]-=r,s[2]+=n,s[3]+=r}return s}updateClipFromPath(){const t=Y.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(t||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(t){this.clipBox.set(t,0),this.minMax.set(yi,0)}getClippedPathBoundingBox(t=Gt.FILL,e=null){return Y.intersect(this.clipBox,this.getPathBoundingBox(t,e))}}function zc(i,t){if(t instanceof ImageData){i.putImageData(t,0,0);return}const e=t.height,s=t.width,n=e%ge,r=(e-n)/ge,o=n===0?r:r+1,a=i.createImageData(s,ge);let l=0,h;const c=t.data,u=a.data;let d,f,g,p;if(t.kind===_r.GRAYSCALE_1BPP){const _=c.byteLength,m=new Uint32Array(u.buffer,0,u.byteLength>>2),y=m.length,v=s+7>>3,b=4294967295,E=Yt.isLittleEndian?4278190080:255;for(d=0;d<o;d++){for(g=d<r?ge:n,h=0,f=0;f<g;f++){const S=_-l;let T=0;const I=S>v?s:S*8-7,k=I&-8;let $=0,B=0;for(;T<k;T+=8)B=c[l++],m[h++]=B&128?b:E,m[h++]=B&64?b:E,m[h++]=B&32?b:E,m[h++]=B&16?b:E,m[h++]=B&8?b:E,m[h++]=B&4?b:E,m[h++]=B&2?b:E,m[h++]=B&1?b:E;for(;T<I;T++)$===0&&(B=c[l++],$=128),m[h++]=B&$?b:E,$>>=1}for(;h<y;)m[h++]=0;i.putImageData(a,0,d*ge)}}else if(t.kind===_r.RGBA_32BPP){for(f=0,p=s*ge*4,d=0;d<r;d++)u.set(c.subarray(l,l+p)),l+=p,i.putImageData(a,0,f),f+=ge;d<o&&(p=s*n*4,u.set(c.subarray(l,l+p)),i.putImageData(a,0,f))}else if(t.kind===_r.RGB_24BPP)for(g=ge,p=s*g,d=0;d<o;d++){for(d>=r&&(g=n,p=s*g),h=0,f=p;f--;)u[h++]=c[l++],u[h++]=c[l++],u[h++]=c[l++],u[h++]=255;i.putImageData(a,0,d*ge)}else throw new Error(`bad image kind: ${t.kind}`)}function Gc(i,t){if(t.bitmap){i.drawImage(t.bitmap,0,0);return}const e=t.height,s=t.width,n=e%ge,r=(e-n)/ge,o=n===0?r:r+1,a=i.createImageData(s,ge);let l=0;const h=t.data,c=a.data;for(let u=0;u<o;u++){const d=u<r?ge:n;({srcPos:l}=ub({src:h,srcPos:l,dest:c,width:s,height:d,nonBlackColor:0})),i.putImageData(a,0,u*ge)}}function Ji(i,t){const e=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const s of e)i[s]!==void 0&&(t[s]=i[s]);i.setLineDash!==void 0&&(t.setLineDash(i.getLineDash()),t.lineDashOffset=i.lineDashOffset)}function nr(i){i.strokeStyle=i.fillStyle="#000000",i.fillRule="nonzero",i.globalAlpha=1,i.lineWidth=1,i.lineCap="butt",i.lineJoin="miter",i.miterLimit=10,i.globalCompositeOperation="source-over",i.font="10px sans-serif",i.setLineDash!==void 0&&(i.setLineDash([]),i.lineDashOffset=0);const{filter:t}=i;t!=="none"&&t!==""&&(i.filter="none")}function Kc(i,t){if(t)return!0;Y.singularValueDecompose2dScale(i,Ae);const e=Math.fround(ss.pixelRatio*Fi.PDF_TO_CSS_UNITS);return Ae[0]<=e&&Ae[1]<=e}const gb=["butt","round","square"],mb=["miter","round","bevel"],_b={},qc={};class Li{constructor(t,e,s,n,r,{optionalContentConfig:o,markedContentStack:a=null},l,h){this.ctx=t,this.current=new Wc(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=e,this.objs=s,this.canvasFactory=n,this.filterFactory=r,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=a||[],this.optionalContentConfig=o,this.cachedCanvases=new pb(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=l,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=h,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(t,e=null){return typeof t=="string"?t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t):e}beginDrawing({transform:t,viewport:e,transparency:s=!1,background:n=null}){const r=this.ctx.canvas.width,o=this.ctx.canvas.height,a=this.ctx.fillStyle;if(this.ctx.fillStyle=n||"#ffffff",this.ctx.fillRect(0,0,r,o),this.ctx.fillStyle=a,s){const l=this.cachedCanvases.getCanvas("transparent",r,o);this.compositeCtx=this.ctx,this.transparentCanvas=l.canvas,this.ctx=l.context,this.ctx.save(),this.ctx.transform(...It(this.compositeCtx))}this.ctx.save(),nr(this.ctx),t&&(this.ctx.transform(...t),this.outputScaleX=t[0],this.outputScaleY=t[0]),this.ctx.transform(...e.transform),this.viewportScale=e.scale,this.baseTransform=It(this.ctx)}executeOperatorList(t,e,s,n){const r=t.argsArray,o=t.fnArray;let a=e||0;const l=r.length;if(l===a)return a;const h=l-a>Uc&&typeof s=="function",c=h?Date.now()+db:0;let u=0;const d=this.commonObjs,f=this.objs;let g;for(;;){if(n!==void 0&&a===n.nextBreakPoint)return n.breakIt(a,s),a;if(g=o[a],g!==Mr.dependency)this[g].apply(this,r[a]);else for(const p of r[a]){const _=p.startsWith("g_")?d:f;if(!_.has(p))return _.get(p,s),a}if(a++,a===l)return a;if(h&&++u>Uc){if(Date.now()>c)return s(),a;u=0}}}#t(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}endDrawing(){this.#t(),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const t of this._cachedBitmapsMap.values()){for(const e of t.values())typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement&&(e.width=e.height=0);t.clear()}this._cachedBitmapsMap.clear(),this.#e()}#e(){if(this.pageColors){const t=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(t!=="none"){const e=this.ctx.filter;this.ctx.filter=t,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=e}}}_scaleImage(t,e){const s=t.width??t.displayWidth,n=t.height??t.displayHeight;let r=Math.max(Math.hypot(e[0],e[1]),1),o=Math.max(Math.hypot(e[2],e[3]),1),a=s,l=n,h="prescale1",c,u;for(;r>2&&a>1||o>2&&l>1;){let d=a,f=l;r>2&&a>1&&(d=a>=16384?Math.floor(a/2)-1||1:Math.ceil(a/2),r/=a/d),o>2&&l>1&&(f=l>=16384?Math.floor(l/2)-1||1:Math.ceil(l)/2,o/=l/f),c=this.cachedCanvases.getCanvas(h,d,f),u=c.context,u.clearRect(0,0,d,f),u.drawImage(t,0,0,a,l,0,0,d,f),t=c.canvas,a=d,l=f,h=h==="prescale1"?"prescale2":"prescale1"}return{img:t,paintWidth:a,paintHeight:l}}_createMaskCanvas(t){const e=this.ctx,{width:s,height:n}=t,r=this.current.fillColor,o=this.current.patternFill,a=It(e);let l,h,c,u;if((t.bitmap||t.data)&&t.count>1){const k=t.bitmap||t.data.buffer;h=JSON.stringify(o?a:[a.slice(0,4),r]),l=this._cachedBitmapsMap.get(k),l||(l=new Map,this._cachedBitmapsMap.set(k,l));const $=l.get(h);if($&&!o){const B=Math.round(Math.min(a[0],a[2])+a[4]),Z=Math.round(Math.min(a[1],a[3])+a[5]);return{canvas:$,offsetX:B,offsetY:Z}}c=$}c||(u=this.cachedCanvases.getCanvas("maskCanvas",s,n),Gc(u.context,t));let d=Y.transform(a,[1/s,0,0,-1/n,0,0]);d=Y.transform(d,[1,0,0,1,0,-n]);const f=yi.slice();Y.axialAlignedBoundingBox([0,0,s,n],d,f);const[g,p,_,m]=f,y=Math.round(_-g)||1,v=Math.round(m-p)||1,b=this.cachedCanvases.getCanvas("fillCanvas",y,v),E=b.context,S=g,T=p;E.translate(-S,-T),E.transform(...d),c||(c=this._scaleImage(u.canvas,Ge(E)),c=c.img,l&&o&&l.set(h,c)),E.imageSmoothingEnabled=Kc(It(E),t.interpolate),ir(E,c,0,0,c.width,c.height,0,0,s,n),E.globalCompositeOperation="source-in";const I=Y.transform(Ge(E),[1,0,0,1,-S,-T]);return E.fillStyle=o?r.getPattern(e,this,I,Gt.FILL):r,E.fillRect(0,0,s,n),l&&!o&&(this.cachedCanvases.delete("fillCanvas"),l.set(h,b.canvas)),{canvas:b.canvas,offsetX:Math.round(S),offsetY:Math.round(T)}}setLineWidth(t){t!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=t,this.ctx.lineWidth=t}setLineCap(t){this.ctx.lineCap=gb[t]}setLineJoin(t){this.ctx.lineJoin=mb[t]}setMiterLimit(t){this.ctx.miterLimit=t}setDash(t,e){const s=this.ctx;s.setLineDash!==void 0&&(s.setLineDash(t),s.lineDashOffset=e)}setRenderingIntent(t){}setFlatness(t){}setGState(t){for(const[e,s]of t)switch(e){case"LW":this.setLineWidth(s);break;case"LC":this.setLineCap(s);break;case"LJ":this.setLineJoin(s);break;case"ML":this.setMiterLimit(s);break;case"D":this.setDash(s[0],s[1]);break;case"RI":this.setRenderingIntent(s);break;case"FL":this.setFlatness(s);break;case"Font":this.setFont(s[0],s[1]);break;case"CA":this.current.strokeAlpha=s;break;case"ca":this.ctx.globalAlpha=this.current.fillAlpha=s;break;case"BM":this.ctx.globalCompositeOperation=s;break;case"SMask":this.current.activeSMask=s?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(s);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const t=this.inSMaskMode;this.current.activeSMask&&!t?this.beginSMaskMode():!this.current.activeSMask&&t&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const t=this.ctx.canvas.width,e=this.ctx.canvas.height,s="smaskGroupAt"+this.groupLevel,n=this.cachedCanvases.getCanvas(s,t,e);this.suspendedCtx=this.ctx;const r=this.ctx=n.context;r.setTransform(this.suspendedCtx.getTransform()),Ji(this.suspendedCtx,r),fb(r,this.suspendedCtx),this.setGState([["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),Ji(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(t){if(!this.current.activeSMask)return;t?(t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.ceil(t[2]),t[3]=Math.ceil(t[3])):t=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const e=this.current.activeSMask,s=this.suspendedCtx;this.composeSMask(s,e,this.ctx,t),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(t,e,s,n){const r=n[0],o=n[1],a=n[2]-r,l=n[3]-o;a===0||l===0||(this.genericComposeSMask(e.context,s,a,l,e.subtype,e.backdrop,e.transferMap,r,o,e.offsetX,e.offsetY),t.save(),t.globalAlpha=1,t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0),t.drawImage(s.canvas,0,0),t.restore())}genericComposeSMask(t,e,s,n,r,o,a,l,h,c,u){let d=t.canvas,f=l-c,g=h-u;if(o)if(f<0||g<0||f+s>d.width||g+n>d.height){const _=this.cachedCanvases.getCanvas("maskExtension",s,n),m=_.context;m.drawImage(d,-f,-g),m.globalCompositeOperation="destination-atop",m.fillStyle=o,m.fillRect(0,0,s,n),m.globalCompositeOperation="source-over",d=_.canvas,f=g=0}else{t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0);const _=new Path2D;_.rect(f,g,s,n),t.clip(_),t.globalCompositeOperation="destination-atop",t.fillStyle=o,t.fillRect(f,g,s,n),t.restore()}e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0),r==="Alpha"&&a?e.filter=this.filterFactory.addAlphaFilter(a):r==="Luminosity"&&(e.filter=this.filterFactory.addLuminosityFilter(a));const p=new Path2D;p.rect(l,h,s,n),e.clip(p),e.globalCompositeOperation="destination-in",e.drawImage(d,f,g,s,n,l,h,s,n),e.restore()}save(){this.inSMaskMode&&Ji(this.ctx,this.suspendedCtx),this.ctx.save();const t=this.current;this.stateStack.push(t),this.current=t.clone()}restore(){if(this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&Ji(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(t,e,s,n,r,o){this.ctx.transform(t,e,s,n,r,o),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(t,e,s){let[n]=e;if(!s){n||=e[0]=new Path2D,this[t](n);return}if(!(n instanceof Path2D)){const r=e[0]=new Path2D;for(let o=0,a=n.length;o<a;)switch(n[o++]){case tr.moveTo:r.moveTo(n[o++],n[o++]);break;case tr.lineTo:r.lineTo(n[o++],n[o++]);break;case tr.curveTo:r.bezierCurveTo(n[o++],n[o++],n[o++],n[o++],n[o++],n[o++]);break;case tr.closePath:r.closePath();break;default:ot(`Unrecognized drawing path operator: ${n[o-1]}`);break}n=r}Y.axialAlignedBoundingBox(s,It(this.ctx),this.current.minMax),this[t](n)}closePath(){this.ctx.closePath()}stroke(t,e=!0){const s=this.ctx,n=this.current.strokeColor;if(s.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof n=="object"&&n?.getPattern){const r=n.isModifyingCurrentTransform()?s.getTransform():null;if(s.save(),s.strokeStyle=n.getPattern(s,this,Ge(s),Gt.STROKE),r){const o=new Path2D;o.addPath(t,s.getTransform().invertSelf().multiplySelf(r)),t=o}this.rescaleAndStroke(t,!1),s.restore()}else this.rescaleAndStroke(t,!0);e&&this.consumePath(t,this.current.getClippedPathBoundingBox(Gt.STROKE,It(this.ctx))),s.globalAlpha=this.current.fillAlpha}closeStroke(t){this.stroke(t)}fill(t,e=!0){const s=this.ctx,n=this.current.fillColor,r=this.current.patternFill;let o=!1;if(r){const l=n.isModifyingCurrentTransform()?s.getTransform():null;if(s.save(),s.fillStyle=n.getPattern(s,this,Ge(s),Gt.FILL),l){const h=new Path2D;h.addPath(t,s.getTransform().invertSelf().multiplySelf(l)),t=h}o=!0}const a=this.current.getClippedPathBoundingBox();this.contentVisible&&a!==null&&(this.pendingEOFill?(s.fill(t,"evenodd"),this.pendingEOFill=!1):s.fill(t)),o&&s.restore(),e&&this.consumePath(t,a)}eoFill(t){this.pendingEOFill=!0,this.fill(t)}fillStroke(t){this.fill(t,!1),this.stroke(t,!1),this.consumePath(t)}eoFillStroke(t){this.pendingEOFill=!0,this.fillStroke(t)}closeFillStroke(t){this.fillStroke(t)}closeEOFillStroke(t){this.pendingEOFill=!0,this.fillStroke(t)}endPath(t){this.consumePath(t)}rawFillPath(t){this.ctx.fill(t)}clip(){this.pendingClip=_b}eoClip(){this.pendingClip=qc}beginText(){this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const t=this.pendingTextPaths,e=this.ctx;if(t===void 0)return;const s=new Path2D,n=e.getTransform().invertSelf();for(const{transform:r,x:o,y:a,fontSize:l,path:h}of t)s.addPath(h,new DOMMatrix(r).preMultiplySelf(n).translate(o,a).scale(l,-l));e.clip(s),delete this.pendingTextPaths}setCharSpacing(t){this.current.charSpacing=t}setWordSpacing(t){this.current.wordSpacing=t}setHScale(t){this.current.textHScale=t/100}setLeading(t){this.current.leading=-t}setFont(t,e){const s=this.commonObjs.get(t),n=this.current;if(!s)throw new Error(`Can't find font for ${t}`);if(n.fontMatrix=s.fontMatrix||va,(n.fontMatrix[0]===0||n.fontMatrix[3]===0)&&ot("Invalid font matrix for font "+t),e<0?(e=-e,n.fontDirection=-1):n.fontDirection=1,this.current.font=s,this.current.fontSize=e,s.isType3Font)return;const r=s.loadedName||"sans-serif",o=s.systemFontInfo?.css||`"${r}", ${s.fallbackName}`;let a="normal";s.black?a="900":s.bold&&(a="bold");const l=s.italic?"italic":"normal";let h=e;e<Vc?h=Vc:e>jc&&(h=jc),this.current.fontSizeScale=e/h,this.ctx.font=`${l} ${a} ${h}px ${o}`}setTextRenderingMode(t){this.current.textRenderingMode=t}setTextRise(t){this.current.textRise=t}moveText(t,e){this.current.x=this.current.lineX+=t,this.current.y=this.current.lineY+=e}setLeadingMoveText(t,e){this.setLeading(-e),this.moveText(t,e)}setTextMatrix(t){const{current:e}=this;e.textMatrix=t,e.textMatrixScale=Math.hypot(t[0],t[1]),e.x=e.lineX=0,e.y=e.lineY=0}nextLine(){this.moveText(0,this.current.leading)}#s(t,e,s){const n=new Path2D;return n.addPath(t,new DOMMatrix(s).invertSelf().multiplySelf(e)),n}paintChar(t,e,s,n,r){const o=this.ctx,a=this.current,l=a.font,h=a.textRenderingMode,c=a.fontSize/a.fontSizeScale,u=h&Xt.FILL_STROKE_MASK,d=!!(h&Xt.ADD_TO_PATH_FLAG),f=a.patternFill&&!l.missingFile,g=a.patternStroke&&!l.missingFile;let p;if((l.disableFontFace||d||f||g)&&(p=l.getPathGenerator(this.commonObjs,t)),l.disableFontFace||f||g){o.save(),o.translate(e,s),o.scale(c,-c);let _;if((u===Xt.FILL||u===Xt.FILL_STROKE)&&(n?(_=o.getTransform(),o.setTransform(...n),o.fill(this.#s(p,_,n))):o.fill(p)),u===Xt.STROKE||u===Xt.FILL_STROKE)if(r){_||=o.getTransform(),o.setTransform(...r);const{a:m,b:y,c:v,d:b}=_,E=Y.inverseTransform(r),S=Y.transform([m,y,v,b,0,0],E);Y.singularValueDecompose2dScale(S,Ae),o.lineWidth*=Math.max(Ae[0],Ae[1])/c,o.stroke(this.#s(p,_,r))}else o.lineWidth/=c,o.stroke(p);o.restore()}else(u===Xt.FILL||u===Xt.FILL_STROKE)&&o.fillText(t,e,s),(u===Xt.STROKE||u===Xt.FILL_STROKE)&&o.strokeText(t,e,s);d&&(this.pendingTextPaths||=[]).push({transform:It(o),x:e,y:s,fontSize:c,path:p})}get isFontSubpixelAAEnabled(){const{context:t}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);t.scale(1.5,1),t.fillText("I",0,10);const e=t.getImageData(0,0,10,10).data;let s=!1;for(let n=3;n<e.length;n+=4)if(e[n]>0&&e[n]<255){s=!0;break}return ut(this,"isFontSubpixelAAEnabled",s)}showText(t){const e=this.current,s=e.font;if(s.isType3Font)return this.showType3Text(t);const n=e.fontSize;if(n===0)return;const r=this.ctx,o=e.fontSizeScale,a=e.charSpacing,l=e.wordSpacing,h=e.fontDirection,c=e.textHScale*h,u=t.length,d=s.vertical,f=d?1:-1,g=s.defaultVMetrics,p=n*e.fontMatrix[0],_=e.textRenderingMode===Xt.FILL&&!s.disableFontFace&&!e.patternFill;r.save(),e.textMatrix&&r.transform(...e.textMatrix),r.translate(e.x,e.y+e.textRise),h>0?r.scale(c,-1):r.scale(c,1);let m,y;if(e.patternFill){r.save();const T=e.fillColor.getPattern(r,this,Ge(r),Gt.FILL);m=It(r),r.restore(),r.fillStyle=T}if(e.patternStroke){r.save();const T=e.strokeColor.getPattern(r,this,Ge(r),Gt.STROKE);y=It(r),r.restore(),r.strokeStyle=T}let v=e.lineWidth;const b=e.textMatrixScale;if(b===0||v===0){const T=e.textRenderingMode&Xt.FILL_STROKE_MASK;(T===Xt.STROKE||T===Xt.FILL_STROKE)&&(v=this.getSinglePixelWidth())}else v/=b;if(o!==1&&(r.scale(o,o),v/=o),r.lineWidth=v,s.isInvalidPDFjsFont){const T=[];let I=0;for(const k of t)T.push(k.unicode),I+=k.width;r.fillText(T.join(""),0,0),e.x+=I*p*c,r.restore(),this.compose();return}let E=0,S;for(S=0;S<u;++S){const T=t[S];if(typeof T=="number"){E+=f*T*n/1e3;continue}let I=!1;const k=(T.isSpace?l:0)+a,$=T.fontChar,B=T.accent;let Z,X,it=T.width;if(d){const N=T.vmetric||g,O=-(T.vmetric?N[1]:it*.5)*p,et=N[2]*p;it=N?-N[0]:it,Z=O/o,X=(E+et)/o}else Z=E/o,X=0;if(s.remeasure&&it>0){const N=r.measureText($).width*1e3/n*o;if(it<N&&this.isFontSubpixelAAEnabled){const O=it/N;I=!0,r.save(),r.scale(O,1),Z/=O}else it!==N&&(Z+=(it-N)/2e3*n/o)}if(this.contentVisible&&(T.isInFont||s.missingFile)){if(_&&!B)r.fillText($,Z,X);else if(this.paintChar($,Z,X,m,y),B){const N=Z+n*B.offset.x/o,O=X-n*B.offset.y/o;this.paintChar(B.fontChar,N,O,m,y)}}const mt=d?it*p-k*h:it*p+k*h;E+=mt,I&&r.restore()}d?e.y-=E:e.x+=E*c,r.restore(),this.compose()}showType3Text(t){const e=this.ctx,s=this.current,n=s.font,r=s.fontSize,o=s.fontDirection,a=n.vertical?1:-1,l=s.charSpacing,h=s.wordSpacing,c=s.textHScale*o,u=s.fontMatrix||va,d=t.length,f=s.textRenderingMode===Xt.INVISIBLE;let g,p,_,m;if(!(f||r===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,e.save(),s.textMatrix&&e.transform(...s.textMatrix),e.translate(s.x,s.y+s.textRise),e.scale(c,o),g=0;g<d;++g){if(p=t[g],typeof p=="number"){m=a*p*r/1e3,this.ctx.translate(m,0),s.x+=m*c;continue}const y=(p.isSpace?h:0)+l,v=n.charProcOperatorList[p.operatorListId];v?this.contentVisible&&(this.save(),e.scale(r,r),e.transform(...u),this.executeOperatorList(v),this.restore()):ot(`Type3 character "${p.operatorListId}" is not available.`);const b=[p.width,0];Y.applyTransform(b,u),_=b[0]*r+y,e.translate(_,0),s.x+=_*c}e.restore()}}setCharWidth(t,e){}setCharWidthAndBounds(t,e,s,n,r,o){const a=new Path2D;a.rect(s,n,r-s,o-n),this.ctx.clip(a),this.endPath()}getColorN_Pattern(t){let e;if(t[0]==="TilingPattern"){const s=this.baseTransform||It(this.ctx),n={createCanvasGraphics:r=>new Li(r,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};e=new hl(t,this.ctx,n,s)}else e=this._getPattern(t[1],t[2]);return e}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments),this.current.patternStroke=!0}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(t){this.ctx.strokeStyle=this.current.strokeColor=t,this.current.patternStroke=!1}setStrokeTransparent(){this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(t){this.ctx.fillStyle=this.current.fillColor=t,this.current.patternFill=!1}setFillTransparent(){this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(t,e=null){let s;return this.cachedPatterns.has(t)?s=this.cachedPatterns.get(t):(s=hb(this.getObject(t)),this.cachedPatterns.set(t,s)),e&&(s.matrix=e),s}shadingFill(t){if(!this.contentVisible)return;const e=this.ctx;this.save();const s=this._getPattern(t);e.fillStyle=s.getPattern(e,this,Ge(e),Gt.SHADING);const n=Ge(e);if(n){const{width:r,height:o}=e.canvas,a=yi.slice();Y.axialAlignedBoundingBox([0,0,r,o],n,a);const[l,h,c,u]=a;this.ctx.fillRect(l,h,c-l,u-h)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){At("Should not call beginInlineImage")}beginImageData(){At("Should not call beginImageData")}paintFormXObjectBegin(t,e){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),t&&this.transform(...t),this.baseTransform=It(this.ctx),e)){Y.axialAlignedBoundingBox(e,this.baseTransform,this.current.minMax);const[s,n,r,o]=e,a=new Path2D;a.rect(s,n,r-s,o-n),this.ctx.clip(a),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(t){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const e=this.ctx;t.isolated||to("TODO: Support non-isolated groups."),t.knockout&&ot("Knockout groups not supported.");const s=It(e);if(t.matrix&&e.transform(...t.matrix),!t.bbox)throw new Error("Bounding box is required.");let n=yi.slice();Y.axialAlignedBoundingBox(t.bbox,It(e),n);const r=[0,0,e.canvas.width,e.canvas.height];n=Y.intersect(n,r)||[0,0,0,0];const o=Math.floor(n[0]),a=Math.floor(n[1]),l=Math.max(Math.ceil(n[2])-o,1),h=Math.max(Math.ceil(n[3])-a,1);this.current.startNewPathAndClipBox([0,0,l,h]);let c="groupAt"+this.groupLevel;t.smask&&(c+="_smask_"+this.smaskCounter++%2);const u=this.cachedCanvases.getCanvas(c,l,h),d=u.context;d.translate(-o,-a),d.transform(...s);let f=new Path2D;const[g,p,_,m]=t.bbox;if(f.rect(g,p,_-g,m-p),t.matrix){const y=new Path2D;y.addPath(f,new DOMMatrix(t.matrix)),f=y}d.clip(f),t.smask?this.smaskStack.push({canvas:u.canvas,context:d,offsetX:o,offsetY:a,subtype:t.smask.subtype,backdrop:t.smask.backdrop,transferMap:t.smask.transferMap||null,startTransformInverse:null}):(e.setTransform(1,0,0,1,0,0),e.translate(o,a),e.save()),Ji(e,d),this.ctx=d,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(e),this.groupLevel++}endGroup(t){if(!this.contentVisible)return;this.groupLevel--;const e=this.ctx,s=this.groupStack.pop();if(this.ctx=s,this.ctx.imageSmoothingEnabled=!1,t.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const n=It(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...n);const r=yi.slice();Y.axialAlignedBoundingBox([0,0,e.canvas.width,e.canvas.height],n,r),this.ctx.drawImage(e.canvas,0,0),this.ctx.restore(),this.compose(r)}}beginAnnotation(t,e,s,n,r){if(this.#t(),nr(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),e){const o=e[2]-e[0],a=e[3]-e[1];if(r&&this.annotationCanvasMap){s=s.slice(),s[4]-=e[0],s[5]-=e[1],e=e.slice(),e[0]=e[1]=0,e[2]=o,e[3]=a,Y.singularValueDecompose2dScale(It(this.ctx),Ae);const{viewportScale:l}=this,h=Math.ceil(o*this.outputScaleX*l),c=Math.ceil(a*this.outputScaleY*l);this.annotationCanvas=this.canvasFactory.create(h,c);const{canvas:u,context:d}=this.annotationCanvas;this.annotationCanvasMap.set(t,u),this.annotationCanvas.savedCtx=this.ctx,this.ctx=d,this.ctx.save(),this.ctx.setTransform(Ae[0],0,0,-Ae[1],0,a*Ae[1]),nr(this.ctx)}else{nr(this.ctx),this.endPath();const l=new Path2D;l.rect(e[0],e[1],o,a),this.ctx.clip(l)}}this.current=new Wc(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...s),this.transform(...n)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),this.#e(),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(t){if(!this.contentVisible)return;const e=t.count;t=this.getObject(t.data,t),t.count=e;const s=this.ctx,n=this._createMaskCanvas(t),r=n.canvas;s.save(),s.setTransform(1,0,0,1,0,0),s.drawImage(r,n.offsetX,n.offsetY),s.restore(),this.compose()}paintImageMaskXObjectRepeat(t,e,s=0,n=0,r,o){if(!this.contentVisible)return;t=this.getObject(t.data,t);const a=this.ctx;a.save();const l=It(a);a.transform(e,s,n,r,0,0);const h=this._createMaskCanvas(t);a.setTransform(1,0,0,1,h.offsetX-l[4],h.offsetY-l[5]);for(let c=0,u=o.length;c<u;c+=2){const d=Y.transform(l,[e,s,n,r,o[c],o[c+1]]);a.drawImage(h.canvas,d[4],d[5])}a.restore(),this.compose()}paintImageMaskXObjectGroup(t){if(!this.contentVisible)return;const e=this.ctx,s=this.current.fillColor,n=this.current.patternFill;for(const r of t){const{data:o,width:a,height:l,transform:h}=r,c=this.cachedCanvases.getCanvas("maskCanvas",a,l),u=c.context;u.save();const d=this.getObject(o,r);Gc(u,d),u.globalCompositeOperation="source-in",u.fillStyle=n?s.getPattern(u,this,Ge(e),Gt.FILL):s,u.fillRect(0,0,a,l),u.restore(),e.save(),e.transform(...h),e.scale(1,-1),ir(e,c.canvas,0,0,a,l,0,-1,1,1),e.restore()}this.compose()}paintImageXObject(t){if(!this.contentVisible)return;const e=this.getObject(t);if(!e){ot("Dependent image isn't ready yet");return}this.paintInlineImageXObject(e)}paintImageXObjectRepeat(t,e,s,n){if(!this.contentVisible)return;const r=this.getObject(t);if(!r){ot("Dependent image isn't ready yet");return}const o=r.width,a=r.height,l=[];for(let h=0,c=n.length;h<c;h+=2)l.push({transform:[e,0,0,s,n[h],n[h+1]],x:0,y:0,w:o,h:a});this.paintInlineImageXObjectGroup(r,l)}applyTransferMapsToCanvas(t){return this.current.transferMaps!=="none"&&(t.filter=this.current.transferMaps,t.drawImage(t.canvas,0,0),t.filter="none"),t.canvas}applyTransferMapsToBitmap(t){if(this.current.transferMaps==="none")return t.bitmap;const{bitmap:e,width:s,height:n}=t,r=this.cachedCanvases.getCanvas("inlineImage",s,n),o=r.context;return o.filter=this.current.transferMaps,o.drawImage(e,0,0),o.filter="none",r.canvas}paintInlineImageXObject(t){if(!this.contentVisible)return;const e=t.width,s=t.height,n=this.ctx;this.save();const{filter:r}=n;r!=="none"&&r!==""&&(n.filter="none"),n.scale(1/e,-1/s);let o;if(t.bitmap)o=this.applyTransferMapsToBitmap(t);else if(typeof HTMLElement=="function"&&t instanceof HTMLElement||!t.data)o=t;else{const h=this.cachedCanvases.getCanvas("inlineImage",e,s).context;zc(h,t),o=this.applyTransferMapsToCanvas(h)}const a=this._scaleImage(o,Ge(n));n.imageSmoothingEnabled=Kc(It(n),t.interpolate),ir(n,a.img,0,0,a.paintWidth,a.paintHeight,0,-s,e,s),this.compose(),this.restore()}paintInlineImageXObjectGroup(t,e){if(!this.contentVisible)return;const s=this.ctx;let n;if(t.bitmap)n=t.bitmap;else{const r=t.width,o=t.height,l=this.cachedCanvases.getCanvas("inlineImage",r,o).context;zc(l,t),n=this.applyTransferMapsToCanvas(l)}for(const r of e)s.save(),s.transform(...r.transform),s.scale(1,-1),ir(s,n,r.x,r.y,r.w,r.h,0,-1,1,1),s.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(t){}markPointProps(t,e){}beginMarkedContent(t){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(t,e){t==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(e)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(t,e){const s=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(e);const n=this.ctx;this.pendingClip&&(s||(this.pendingClip===qc?n.clip(t,"evenodd"):n.clip(t)),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const t=It(this.ctx);if(t[1]===0&&t[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(t[0]),Math.abs(t[3]));else{const e=Math.abs(t[0]*t[3]-t[2]*t[1]),s=Math.hypot(t[0],t[2]),n=Math.hypot(t[1],t[3]);this._cachedGetSinglePixelWidth=Math.max(s,n)/e}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:t}=this.current,{a:e,b:s,c:n,d:r}=this.ctx.getTransform();let o,a;if(s===0&&n===0){const l=Math.abs(e),h=Math.abs(r);if(l===h)if(t===0)o=a=1/l;else{const c=l*t;o=a=c<1?1/c:1}else if(t===0)o=1/l,a=1/h;else{const c=l*t,u=h*t;o=c<1?1/c:1,a=u<1?1/u:1}}else{const l=Math.abs(e*r-s*n),h=Math.hypot(e,s),c=Math.hypot(n,r);if(t===0)o=c/l,a=h/l;else{const u=t*l;o=c>u?c/u:1,a=h>u?h/u:1}}this._cachedScaleForStroking[0]=o,this._cachedScaleForStroking[1]=a}return this._cachedScaleForStroking}rescaleAndStroke(t,e){const{ctx:s,current:{lineWidth:n}}=this,[r,o]=this.getScaleForStroking();if(r===o){s.lineWidth=(n||1)*r,s.stroke(t);return}const a=s.getLineDash();e&&s.save(),s.scale(r,o),Do.a=1/r,Do.d=1/o;const l=new Path2D;if(l.addPath(t,Do),a.length>0){const h=Math.max(r,o);s.setLineDash(a.map(c=>c/h)),s.lineDashOffset/=h}s.lineWidth=n||1,s.stroke(l),e&&s.restore()}isContentVisible(){for(let t=this.markedContentStack.length-1;t>=0;t--)if(!this.markedContentStack[t].visible)return!1;return!0}}for(const i in Mr)Li.prototype[i]!==void 0&&(Li.prototype[Mr[i]]=Li.prototype[i]);class Mi{static#t=null;static#e="";static get workerPort(){return this.#t}static set workerPort(t){if(!(typeof Worker<"u"&&t instanceof Worker)&&t!==null)throw new Error("Invalid `workerPort` type.");this.#t=t}static get workerSrc(){return this.#e}static set workerSrc(t){if(typeof t!="string")throw new Error("Invalid `workerSrc` type.");this.#e=t}}class bb{#t;#e;constructor({parsedData:t,rawData:e}){this.#t=t,this.#e=e}getRaw(){return this.#e}get(t){return this.#t.get(t)??null}[Symbol.iterator](){return this.#t.entries()}}const gi=Symbol("INTERNAL");class vb{#t=!1;#e=!1;#s=!1;#i=!0;constructor(t,{name:e,intent:s,usage:n,rbGroups:r}){this.#t=!!(t&ye.DISPLAY),this.#e=!!(t&ye.PRINT),this.name=e,this.intent=s,this.usage=n,this.rbGroups=r}get visible(){if(this.#s)return this.#i;if(!this.#i)return!1;const{print:t,view:e}=this.usage;return this.#t?e?.viewState!=="OFF":this.#e?t?.printState!=="OFF":!0}_setVisible(t,e,s=!1){t!==gi&&At("Internal method `_setVisible` called."),this.#s=s,this.#i=e}}class yb{#t=null;#e=new Map;#s=null;#i=null;constructor(t,e=ye.DISPLAY){if(this.renderingIntent=e,this.name=null,this.creator=null,t!==null){this.name=t.name,this.creator=t.creator,this.#i=t.order;for(const s of t.groups)this.#e.set(s.id,new vb(e,s));if(t.baseState==="OFF")for(const s of this.#e.values())s._setVisible(gi,!1);for(const s of t.on)this.#e.get(s)._setVisible(gi,!0);for(const s of t.off)this.#e.get(s)._setVisible(gi,!1);this.#s=this.getHash()}}#r(t){const e=t.length;if(e<2)return!0;const s=t[0];for(let n=1;n<e;n++){const r=t[n];let o;if(Array.isArray(r))o=this.#r(r);else if(this.#e.has(r))o=this.#e.get(r).visible;else return ot(`Optional content group not found: ${r}`),!0;switch(s){case"And":if(!o)return!1;break;case"Or":if(o)return!0;break;case"Not":return!o;default:return!0}}return s==="And"}isVisible(t){if(this.#e.size===0)return!0;if(!t)return to("Optional content group not defined."),!0;if(t.type==="OCG")return this.#e.has(t.id)?this.#e.get(t.id).visible:(ot(`Optional content group not found: ${t.id}`),!0);if(t.type==="OCMD"){if(t.expression)return this.#r(t.expression);if(!t.policy||t.policy==="AnyOn"){for(const e of t.ids){if(!this.#e.has(e))return ot(`Optional content group not found: ${e}`),!0;if(this.#e.get(e).visible)return!0}return!1}else if(t.policy==="AllOn"){for(const e of t.ids){if(!this.#e.has(e))return ot(`Optional content group not found: ${e}`),!0;if(!this.#e.get(e).visible)return!1}return!0}else if(t.policy==="AnyOff"){for(const e of t.ids){if(!this.#e.has(e))return ot(`Optional content group not found: ${e}`),!0;if(!this.#e.get(e).visible)return!0}return!1}else if(t.policy==="AllOff"){for(const e of t.ids){if(!this.#e.has(e))return ot(`Optional content group not found: ${e}`),!0;if(this.#e.get(e).visible)return!1}return!0}return ot(`Unknown optional content policy ${t.policy}.`),!0}return ot(`Unknown group type ${t.type}.`),!0}setVisibility(t,e=!0,s=!0){const n=this.#e.get(t);if(!n){ot(`Optional content group not found: ${t}`);return}if(s&&e&&n.rbGroups.length)for(const r of n.rbGroups)for(const o of r)o!==t&&this.#e.get(o)?._setVisible(gi,!1,!0);n._setVisible(gi,!!e,!0),this.#t=null}setOCGState({state:t,preserveRB:e}){let s;for(const n of t){switch(n){case"ON":case"OFF":case"Toggle":s=n;continue}const r=this.#e.get(n);if(r)switch(s){case"ON":this.setVisibility(n,!0,e);break;case"OFF":this.setVisibility(n,!1,e);break;case"Toggle":this.setVisibility(n,!r.visible,e);break}}this.#t=null}get hasInitialVisibility(){return this.#s===null||this.getHash()===this.#s}getOrder(){return this.#e.size?this.#i?this.#i.slice():[...this.#e.keys()]:null}getGroup(t){return this.#e.get(t)||null}getHash(){if(this.#t!==null)return this.#t;const t=new ud;for(const[e,s]of this.#e)t.update(`${e}:${s.visible}`);return this.#t=t.hexdigest()}[Symbol.iterator](){return this.#e.entries()}}class Ab{constructor(t,{disableRange:e=!1,disableStream:s=!1}){Ht(t,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:n,initialData:r,progressiveDone:o,contentDispositionFilename:a}=t;if(this._queuedChunks=[],this._progressiveDone=o,this._contentDispositionFilename=a,r?.length>0){const l=r instanceof Uint8Array&&r.byteLength===r.buffer.byteLength?r.buffer:new Uint8Array(r).buffer;this._queuedChunks.push(l)}this._pdfDataRangeTransport=t,this._isStreamingSupported=!s,this._isRangeSupported=!e,this._contentLength=n,this._fullRequestReader=null,this._rangeReaders=[],t.addRangeListener((l,h)=>{this._onReceiveData({begin:l,chunk:h})}),t.addProgressListener((l,h)=>{this._onProgress({loaded:l,total:h})}),t.addProgressiveReadListener(l=>{this._onReceiveData({chunk:l})}),t.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),t.transportReady()}_onReceiveData({begin:t,chunk:e}){const s=e instanceof Uint8Array&&e.byteLength===e.buffer.byteLength?e.buffer:new Uint8Array(e).buffer;if(t===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(s):this._queuedChunks.push(s);else{const n=this._rangeReaders.some(function(r){return r._begin!==t?!1:(r._enqueue(s),!0)});Ht(n,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}_onProgress(t){t.total===void 0?this._rangeReaders[0]?.onProgress?.({loaded:t.loaded}):this._fullRequestReader?.onProgress?.({loaded:t.loaded,total:t.total})}_onProgressiveDone(){this._fullRequestReader?.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(t){const e=this._rangeReaders.indexOf(t);e>=0&&this._rangeReaders.splice(e,1)}getFullReader(){Ht(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const t=this._queuedChunks;return this._queuedChunks=null,new wb(this,t,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const s=new Eb(this,t,e);return this._pdfDataRangeTransport.requestDataRange(t,e),this._rangeReaders.push(s),s}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const e of this._rangeReaders.slice(0))e.cancel(t);this._pdfDataRangeTransport.abort()}}class wb{constructor(t,e,s=!1,n=null){this._stream=t,this._done=s||!1,this._filename=il(n)?n:null,this._queuedChunks=e||[],this._loaded=0;for(const r of this._queuedChunks)this._loaded+=r.byteLength;this._requests=[],this._headersReady=Promise.resolve(),t._fullRequestReader=this,this.onProgress=null}_enqueue(t){this._done||(this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunks.push(t),this._loaded+=t.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class Eb{constructor(t,e,s){this._stream=t,this._begin=e,this._end=s,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(t){if(!this._done){if(this._requests.length===0)this._queuedChunk=t;else{this._requests.shift().resolve({value:t,done:!1});for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function Sb(i){let t=!0,e=s("filename\\*","i").exec(i);if(e){e=e[1];let c=a(e);return c=unescape(c),c=l(c),c=h(c),r(c)}if(e=o(i),e){const c=h(e);return r(c)}if(e=s("filename","i").exec(i),e){e=e[1];let c=a(e);return c=h(c),r(c)}function s(c,u){return new RegExp("(?:^|;)\\s*"+c+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',u)}function n(c,u){if(c){if(!/^[\x00-\xFF]+$/.test(u))return u;try{const d=new TextDecoder(c,{fatal:!0}),f=$n(u);u=d.decode(f),t=!1}catch{}}return u}function r(c){return t&&/[\x80-\xff]/.test(c)&&(c=n("utf-8",c),t&&(c=n("iso-8859-1",c))),c}function o(c){const u=[];let d;const f=s("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(d=f.exec(c))!==null;){let[,p,_,m]=d;if(p=parseInt(p,10),p in u){if(p===0)break;continue}u[p]=[_,m]}const g=[];for(let p=0;p<u.length&&p in u;++p){let[_,m]=u[p];m=a(m),_&&(m=unescape(m),p===0&&(m=l(m))),g.push(m)}return g.join("")}function a(c){if(c.startsWith('"')){const u=c.slice(1).split('\\"');for(let d=0;d<u.length;++d){const f=u[d].indexOf('"');f!==-1&&(u[d]=u[d].slice(0,f),u.length=d+1),u[d]=u[d].replaceAll(/\\(.)/g,"$1")}c=u.join('"')}return c}function l(c){const u=c.indexOf("'");if(u===-1)return c;const d=c.slice(0,u),g=c.slice(u+1).replace(/^[^']*'/,"");return n(d,g)}function h(c){return!c.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(c)?c:c.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(u,d,f,g){if(f==="q"||f==="Q")return g=g.replaceAll("_"," "),g=g.replaceAll(/=([0-9a-fA-F]{2})/g,function(p,_){return String.fromCharCode(parseInt(_,16))}),n(d,g);try{g=atob(g)}catch{}return n(d,g)})}return""}function bd(i,t){const e=new Headers;if(!i||!t||typeof t!="object")return e;for(const s in t){const n=t[s];n!==void 0&&e.append(s,n)}return e}function io(i){return URL.parse(i)?.origin??null}function vd({responseHeaders:i,isHttp:t,rangeChunkSize:e,disableRange:s}){const n={allowRangeRequests:!1,suggestedLength:void 0},r=parseInt(i.get("Content-Length"),10);return!Number.isInteger(r)||(n.suggestedLength=r,r<=2*e)||s||!t||i.get("Accept-Ranges")!=="bytes"||(i.get("Content-Encoding")||"identity")!=="identity"||(n.allowRangeRequests=!0),n}function yd(i){const t=i.get("Content-Disposition");if(t){let e=Sb(t);if(e.includes("%"))try{e=decodeURIComponent(e)}catch{}if(il(e))return e}return null}function jn(i,t){return new kr(`Unexpected server response (${i}) while retrieving PDF "${t}".`,i,i===404||i===0&&t.startsWith("file:"))}function Ad(i){return i===200||i===206}function wd(i,t,e){return{method:"GET",headers:i,signal:e.signal,mode:"cors",credentials:t?"include":"same-origin",redirect:"follow"}}function Ed(i){return i instanceof Uint8Array?i.buffer:i instanceof ArrayBuffer?i:(ot(`getArrayBuffer - unexpected data format: ${i}`),new Uint8Array(i).buffer)}class Cb{_responseOrigin=null;constructor(t){this.source=t,this.isHttp=/^https?:/i.test(t.url),this.headers=bd(this.isHttp,t.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return Ht(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new Tb(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const s=new xb(this,t,e);return this._rangeRequestReaders.push(s),s}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const e of this._rangeRequestReaders.slice(0))e.cancel(t)}}class Tb{constructor(t){this._stream=t,this._reader=null,this._loaded=0,this._filename=null;const e=t.source;this._withCredentials=e.withCredentials||!1,this._contentLength=e.length,this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange;const s=new Headers(t.headers),n=e.url;fetch(n,wd(s,this._withCredentials,this._abortController)).then(r=>{if(t._responseOrigin=io(r.url),!Ad(r.status))throw jn(r.status,n);this._reader=r.body.getReader(),this._headersCapability.resolve();const o=r.headers,{allowRangeRequests:a,suggestedLength:l}=vd({responseHeaders:o,isHttp:t.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=a,this._contentLength=l||this._contentLength,this._filename=yd(o),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new Is("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:Ed(t),done:!1})}cancel(t){this._reader?.cancel(t),this._abortController.abort()}}class xb{constructor(t,e,s){this._stream=t,this._reader=null,this._loaded=0;const n=t.source;this._withCredentials=n.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!n.disableStream,this._abortController=new AbortController;const r=new Headers(t.headers);r.append("Range",`bytes=${e}-${s-1}`);const o=n.url;fetch(o,wd(r,this._withCredentials,this._abortController)).then(a=>{const l=io(a.url);if(l!==t._responseOrigin)throw new Error(`Expected range response-origin "${l}" to match "${t._responseOrigin}".`);if(!Ad(a.status))throw jn(a.status,o);this._readCapability.resolve(),this._reader=a.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,this.onProgress?.({loaded:this._loaded}),{value:Ed(t),done:!1})}cancel(t){this._reader?.cancel(t),this._abortController.abort()}}const No=200,Fo=206;function Rb(i){const t=i.response;return typeof t!="string"?t:$n(t).buffer}class Pb{_responseOrigin=null;constructor({url:t,httpHeaders:e,withCredentials:s}){this.url=t,this.isHttp=/^https?:/i.test(t),this.headers=bd(this.isHttp,e),this.withCredentials=s||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(t){const e=new XMLHttpRequest,s=this.currXhrId++,n=this.pendingRequests[s]={xhr:e};e.open("GET",this.url),e.withCredentials=this.withCredentials;for(const[r,o]of this.headers)e.setRequestHeader(r,o);return this.isHttp&&"begin"in t&&"end"in t?(e.setRequestHeader("Range",`bytes=${t.begin}-${t.end-1}`),n.expectedStatus=Fo):n.expectedStatus=No,e.responseType="arraybuffer",Ht(t.onError,"Expected `onError` callback to be provided."),e.onerror=()=>{t.onError(e.status)},e.onreadystatechange=this.onStateChange.bind(this,s),e.onprogress=this.onProgress.bind(this,s),n.onHeadersReceived=t.onHeadersReceived,n.onDone=t.onDone,n.onError=t.onError,n.onProgress=t.onProgress,e.send(null),s}onProgress(t,e){const s=this.pendingRequests[t];s&&s.onProgress?.(e)}onStateChange(t,e){const s=this.pendingRequests[t];if(!s)return;const n=s.xhr;if(n.readyState>=2&&s.onHeadersReceived&&(s.onHeadersReceived(),delete s.onHeadersReceived),n.readyState!==4||!(t in this.pendingRequests))return;if(delete this.pendingRequests[t],n.status===0&&this.isHttp){s.onError(n.status);return}const r=n.status||No;if(!(r===No&&s.expectedStatus===Fo)&&r!==s.expectedStatus){s.onError(n.status);return}const a=Rb(n);if(r===Fo){const l=n.getResponseHeader("Content-Range"),h=/bytes (\d+)-(\d+)\/(\d+)/.exec(l);h?s.onDone({begin:parseInt(h[1],10),chunk:a}):(ot('Missing or invalid "Content-Range" header.'),s.onError(0))}else a?s.onDone({begin:0,chunk:a}):s.onError(n.status)}getRequestXhr(t){return this.pendingRequests[t].xhr}isPendingRequest(t){return t in this.pendingRequests}abortRequest(t){const e=this.pendingRequests[t].xhr;delete this.pendingRequests[t],e.abort()}}class Ib{constructor(t){this._source=t,this._manager=new Pb(t),this._rangeChunkSize=t.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(t){const e=this._rangeRequestReaders.indexOf(t);e>=0&&this._rangeRequestReaders.splice(e,1)}getFullReader(){return Ht(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new Lb(this._manager,this._source),this._fullRequestReader}getRangeReader(t,e){const s=new Mb(this._manager,t,e);return s.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(s),s}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const e of this._rangeRequestReaders.slice(0))e.cancel(t)}}class Lb{constructor(t,e){this._manager=t,this._url=e.url,this._fullRequestId=t.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._contentLength=e.length,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const t=this._fullRequestId,e=this._manager.getRequestXhr(t);this._manager._responseOrigin=io(e.responseURL);const s=e.getAllResponseHeaders(),n=new Headers(s?s.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(a=>{const[l,...h]=a.split(": ");return[l,h.join(": ")]}):[]),{allowRangeRequests:r,suggestedLength:o}=vd({responseHeaders:n,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});r&&(this._isRangeSupported=!0),this._contentLength=o||this._contentLength,this._filename=yd(n),this._isRangeSupported&&this._manager.abortRequest(t),this._headersCapability.resolve()}_onDone(t){if(t&&(this._requests.length>0?this._requests.shift().resolve({value:t.chunk,done:!1}):this._cachedChunks.push(t.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(t){this._storedError=jn(t,this._url),this._headersCapability.reject(this._storedError);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(t){this.onProgress?.({loaded:t.loaded,total:t.lengthComputable?t.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0,this._headersCapability.reject(t);for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class Mb{constructor(t,e,s){this._manager=t,this._url=t.url,this._requestId=t.request({begin:e,end:s,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){const t=io(this._manager.getRequestXhr(this._requestId)?.responseURL);t!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${t}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){this.onClosed?.(this)}_onDone(t){const e=t.chunk;this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunk=e,this._done=!0;for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(t){this._storedError??=jn(t,this._url);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(t){this.isStreamingSupported||this.onProgress?.({loaded:t.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const kb=/^[a-z][a-z0-9\-+.]+:/i;function Ob(i){if(kb.test(i))return new URL(i);const t=process.getBuiltinModule("url");return new URL(t.pathToFileURL(i))}class Db{constructor(t){this.source=t,this.url=Ob(t.url),Ht(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return Ht(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new Nb(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const s=new Fb(this,t,e);return this._rangeRequestReaders.push(s),s}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const e of this._rangeRequestReaders.slice(0))e.cancel(t)}}class Nb{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null;const e=t.source;this._contentLength=e.length,this._loaded=0,this._filename=null,this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const s=process.getBuiltinModule("fs");s.promises.lstat(this._url).then(n=>{this._contentLength=n.size,this._setReadableStream(s.createReadStream(this._url)),this._headersCapability.resolve()},n=>{n.code==="ENOENT"&&(n=jn(0,this._url.href)),this._storedError=n,this._headersCapability.reject(n)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new Is("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class Fb{constructor(t,e,s){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const n=t.source;this._isStreamingSupported=!n.disableStream;const r=process.getBuiltinModule("fs");this._setReadableStream(r.createReadStream(this._url,{start:e,end:s-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,this.onProgress?.({loaded:this._loaded}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const Zi=Symbol("INITIAL_DATA");class Sd{#t=Object.create(null);#e(t){return this.#t[t]||={...Promise.withResolvers(),data:Zi}}get(t,e=null){if(e){const n=this.#e(t);return n.promise.then(()=>e(n.data)),null}const s=this.#t[t];if(!s||s.data===Zi)throw new Error(`Requesting object that isn't resolved yet ${t}.`);return s.data}has(t){const e=this.#t[t];return!!e&&e.data!==Zi}delete(t){const e=this.#t[t];return!e||e.data===Zi?!1:(delete this.#t[t],!0)}resolve(t,e=null){const s=this.#e(t);s.data=e,s.resolve()}clear(){for(const t in this.#t){const{data:e}=this.#t[t];e?.bitmap?.close()}this.#t=Object.create(null)}*[Symbol.iterator](){for(const t in this.#t){const{data:e}=this.#t[t];e!==Zi&&(yield[t,e])}}}const $b=1e5,Yc=30;class ie{#t=Promise.withResolvers();#e=null;#s=!1;#i=!!globalThis.FontInspector?.enabled;#r=null;#n=null;#a=0;#o=0;#u=null;#l=null;#d=0;#h=0;#f=Object.create(null);#p=[];#g=null;#c=[];#m=new WeakMap;#_=null;static#b=new Map;static#y=new Map;static#A=new WeakMap;static#w=null;static#C=new Set;constructor({textContentSource:t,container:e,viewport:s}){if(t instanceof ReadableStream)this.#g=t;else if(typeof t=="object")this.#g=new ReadableStream({start(l){l.enqueue(t),l.close()}});else throw new Error('No "textContentSource" parameter specified.');this.#e=this.#l=e,this.#h=s.scale*ss.pixelRatio,this.#d=s.rotation,this.#n={div:null,properties:null,ctx:null};const{pageWidth:n,pageHeight:r,pageX:o,pageY:a}=s.rawDims;this.#_=[1,0,0,-1,-o,a+r],this.#o=n,this.#a=r,ie.#L(),Zs(e,s),this.#t.promise.finally(()=>{ie.#C.delete(this),this.#n=null,this.#f=null}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:t,isFirefox:e}=Yt.platform;return ut(this,"fontFamilyMap",new Map([["sans-serif",`${t&&e?"Calibri, ":""}sans-serif`],["monospace",`${t&&e?"Lucida Console, ":""}monospace`]]))}render(){const t=()=>{this.#u.read().then(({value:e,done:s})=>{if(s){this.#t.resolve();return}this.#r??=e.lang,Object.assign(this.#f,e.styles),this.#x(e.items),t()},this.#t.reject)};return this.#u=this.#g.getReader(),ie.#C.add(this),t(),this.#t.promise}update({viewport:t,onBefore:e=null}){const s=t.scale*ss.pixelRatio,n=t.rotation;if(n!==this.#d&&(e?.(),this.#d=n,Zs(this.#l,{rotation:n})),s!==this.#h){e?.(),this.#h=s;const r={div:null,properties:null,ctx:ie.#R(this.#r)};for(const o of this.#c)r.properties=this.#m.get(o),r.div=o,this.#E(r)}}cancel(){const t=new Is("TextLayer task cancelled.");this.#u?.cancel(t).catch(()=>{}),this.#u=null,this.#t.reject(t)}get textDivs(){return this.#c}get textContentItemsStr(){return this.#p}#x(t){if(this.#s)return;this.#n.ctx??=ie.#R(this.#r);const e=this.#c,s=this.#p;for(const n of t){if(e.length>$b){ot("Ignoring additional textDivs for performance reasons."),this.#s=!0;return}if(n.str===void 0){if(n.type==="beginMarkedContentProps"||n.type==="beginMarkedContent"){const r=this.#e;this.#e=document.createElement("span"),this.#e.classList.add("markedContent"),n.id!==null&&this.#e.setAttribute("id",`${n.id}`),r.append(this.#e)}else n.type==="endMarkedContent"&&(this.#e=this.#e.parentNode);continue}s.push(n.str),this.#P(n)}}#P(t){const e=document.createElement("span"),s={angle:0,canvasWidth:0,hasText:t.str!=="",hasEOL:t.hasEOL,fontSize:0};this.#c.push(e);const n=Y.transform(this.#_,t.transform);let r=Math.atan2(n[1],n[0]);const o=this.#f[t.fontName];o.vertical&&(r+=Math.PI/2);let a=this.#i&&o.fontSubstitution||o.fontFamily;a=ie.fontFamilyMap.get(a)||a;const l=Math.hypot(n[2],n[3]),h=l*ie.#M(a,o,this.#r);let c,u;r===0?(c=n[4],u=n[5]-h):(c=n[4]+h*Math.sin(r),u=n[5]-h*Math.cos(r));const d="calc(var(--total-scale-factor) *",f=e.style;this.#e===this.#l?(f.left=`${(100*c/this.#o).toFixed(2)}%`,f.top=`${(100*u/this.#a).toFixed(2)}%`):(f.left=`${d}${c.toFixed(2)}px)`,f.top=`${d}${u.toFixed(2)}px)`),f.fontSize=`${d}${(ie.#w*l).toFixed(2)}px)`,f.fontFamily=a,s.fontSize=l,e.setAttribute("role","presentation"),e.textContent=t.str,e.dir=t.dir,this.#i&&(e.dataset.fontName=o.fontSubstitutionLoadedName||t.fontName),r!==0&&(s.angle=r*(180/Math.PI));let g=!1;if(t.str.length>1)g=!0;else if(t.str!==" "&&t.transform[0]!==t.transform[3]){const p=Math.abs(t.transform[0]),_=Math.abs(t.transform[3]);p!==_&&Math.max(p,_)/Math.min(p,_)>1.5&&(g=!0)}if(g&&(s.canvasWidth=o.vertical?t.height:t.width),this.#m.set(e,s),this.#n.div=e,this.#n.properties=s,this.#E(this.#n),s.hasText&&this.#e.append(e),s.hasEOL){const p=document.createElement("br");p.setAttribute("role","presentation"),this.#e.append(p)}}#E(t){const{div:e,properties:s,ctx:n}=t,{style:r}=e;let o="";if(ie.#w>1&&(o=`scale(${1/ie.#w})`),s.canvasWidth!==0&&s.hasText){const{fontFamily:a}=r,{canvasWidth:l,fontSize:h}=s;ie.#T(n,h*this.#h,a);const{width:c}=n.measureText(e.textContent);c>0&&(o=`scaleX(${l*this.#h/c}) ${o}`)}s.angle!==0&&(o=`rotate(${s.angle}deg) ${o}`),o.length>0&&(r.transform=o)}static cleanup(){if(!(this.#C.size>0)){this.#b.clear();for(const{canvas:t}of this.#y.values())t.remove();this.#y.clear()}}static#R(t=null){let e=this.#y.get(t||="");if(!e){const s=document.createElement("canvas");s.className="hiddenCanvasElement",s.lang=t,document.body.append(s),e=s.getContext("2d",{alpha:!1,willReadFrequently:!0}),this.#y.set(t,e),this.#A.set(e,{size:0,family:""})}return e}static#T(t,e,s){const n=this.#A.get(t);e===n.size&&s===n.family||(t.font=`${e}px ${s}`,n.size=e,n.family=s)}static#L(){if(this.#w!==null)return;const t=document.createElement("div");t.style.opacity=0,t.style.lineHeight=1,t.style.fontSize="1px",t.style.position="absolute",t.textContent="X",document.body.append(t),this.#w=t.getBoundingClientRect().height,t.remove()}static#M(t,e,s){const n=this.#b.get(t);if(n)return n;const r=this.#R(s);r.canvas.width=r.canvas.height=Yc,this.#T(r,Yc,t);const o=r.measureText(""),a=o.fontBoundingBoxAscent,l=Math.abs(o.fontBoundingBoxDescent);r.canvas.width=r.canvas.height=0;let h=.8;return a?h=a/(a+l):(Yt.platform.isFirefox&&ot("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),e.ascent?h=e.ascent:e.descent&&(h=1+e.descent)),this.#b.set(t,h),h}}class In{static textContent(t){const e=[],s={items:e,styles:Object.create(null)};function n(r){if(!r)return;let o=null;const a=r.name;if(a==="#text")o=r.value;else if(In.shouldBuildText(a))r?.attributes?.textContent?o=r.attributes.textContent:r.value&&(o=r.value);else return;if(o!==null&&e.push({str:o}),!!r.children)for(const l of r.children)n(l)}return n(t),s}static shouldBuildText(t){return!(t==="textarea"||t==="input"||t==="option"||t==="select")}}const Bb=100;function Cd(i={}){typeof i=="string"||i instanceof URL?i={url:i}:(i instanceof ArrayBuffer||ArrayBuffer.isView(i))&&(i={data:i});const t=new ul,{docId:e}=t,s=i.url?q_(i.url):null,n=i.data?Y_(i.data):null,r=i.httpHeaders||null,o=i.withCredentials===!0,a=i.password??null,l=i.range instanceof Td?i.range:null,h=Number.isInteger(i.rangeChunkSize)&&i.rangeChunkSize>0?i.rangeChunkSize:2**16;let c=i.worker instanceof Ln?i.worker:null;const u=i.verbosity,d=typeof i.docBaseUrl=="string"&&!eo(i.docBaseUrl)?i.docBaseUrl:null,f=er(i.cMapUrl),g=i.cMapPacked!==!1,p=i.CMapReaderFactory||(ne?ib:Fc),_=er(i.iccUrl),m=er(i.standardFontDataUrl),y=i.StandardFontDataFactory||(ne?nb:$c),v=er(i.wasmUrl),b=i.WasmFactory||(ne?rb:Bc),E=i.stopAtErrors!==!0,S=Number.isInteger(i.maxImageSize)&&i.maxImageSize>-1?i.maxImageSize:-1,T=i.isEvalSupported!==!1,I=typeof i.isOffscreenCanvasSupported=="boolean"?i.isOffscreenCanvasSupported:!ne,k=typeof i.isImageDecoderSupported=="boolean"?i.isImageDecoderSupported:!ne&&(Yt.platform.isFirefox||!globalThis.chrome),$=Number.isInteger(i.canvasMaxAreaInBytes)?i.canvasMaxAreaInBytes:-1,B=typeof i.disableFontFace=="boolean"?i.disableFontFace:ne,Z=i.fontExtraProperties===!0,X=i.enableXfa===!0,it=i.ownerDocument||globalThis.document,mt=i.disableRange===!0,N=i.disableStream===!0,O=i.disableAutoFetch===!0,et=i.pdfBug===!0,wt=i.CanvasFactory||(ne?sb:Z_),kt=i.FilterFactory||(ne?eb:tb),Tt=i.enableHWA===!0,ct=i.useWasm!==!1,pt=l?l.length:i.length??NaN,Nt=typeof i.useSystemFonts=="boolean"?i.useSystemFonts:!ne&&!B,Lt=typeof i.useWorkerFetch=="boolean"?i.useWorkerFetch:!!(p===Fc&&y===$c&&b===Bc&&f&&m&&v&&an(f,document.baseURI)&&an(m,document.baseURI)&&an(v,document.baseURI)),Et=null;T_(u);const x={canvasFactory:new wt({ownerDocument:it,enableHWA:Tt}),filterFactory:new kt({docId:e,ownerDocument:it}),cMapReaderFactory:Lt?null:new p({baseUrl:f,isCompressed:g}),standardFontDataFactory:Lt?null:new y({baseUrl:m}),wasmFactory:Lt?null:new b({baseUrl:v})};c||(c=Ln.create({verbosity:u,port:Mi.workerPort}),t._worker=c);const H={docId:e,apiVersion:"5.3.93",data:n,password:a,disableAutoFetch:O,rangeChunkSize:h,length:pt,docBaseUrl:d,enableXfa:X,evaluatorOptions:{maxImageSize:S,disableFontFace:B,ignoreErrors:E,isEvalSupported:T,isOffscreenCanvasSupported:I,isImageDecoderSupported:k,canvasMaxAreaInBytes:$,fontExtraProperties:Z,useSystemFonts:Nt,useWasm:ct,useWorkerFetch:Lt,cMapUrl:f,iccUrl:_,standardFontDataUrl:m,wasmUrl:v}},j={ownerDocument:it,pdfBug:et,styleElement:Et,loadingParams:{disableAutoFetch:O,enableXfa:X}};return c.promise.then(function(){if(t.destroyed)throw new Error("Loading aborted");if(c.destroyed)throw new Error("Worker was destroyed");const G=c.messageHandler.sendWithPromise("GetDocRequest",H,n?[n.buffer]:null);let dt;if(l)dt=new Ab(l,{disableRange:mt,disableStream:N});else if(!n){if(!s)throw new Error("getDocument - no `url` parameter provided.");const A=an(s)?Cb:ne?Db:Ib;dt=new A({url:s,length:pt,httpHeaders:r,withCredentials:o,rangeChunkSize:h,disableRange:mt,disableStream:N})}return G.then(A=>{if(t.destroyed)throw new Error("Loading aborted");if(c.destroyed)throw new Error("Worker was destroyed");const w=new ln(e,A,c.port),C=new jb(w,t,dt,j,x);t._transport=C,w.send("Ready",null)})}).catch(t._capability.reject),t}class ul{static#t=0;_capability=Promise.withResolvers();_transport=null;_worker=null;docId=`d${ul.#t++}`;destroyed=!1;onPassword=null;onProgress=null;get promise(){return this._capability.promise}async destroy(){this.destroyed=!0;try{this._worker?.port&&(this._worker._pendingDestroy=!0),await this._transport?.destroy()}catch(t){throw this._worker?.port&&delete this._worker._pendingDestroy,t}this._transport=null,this._worker?.destroy(),this._worker=null}async getData(){return this._transport.getData()}}class Td{#t=Promise.withResolvers();#e=[];#s=[];#i=[];#r=[];constructor(t,e,s=!1,n=null){this.length=t,this.initialData=e,this.progressiveDone=s,this.contentDispositionFilename=n}addRangeListener(t){this.#r.push(t)}addProgressListener(t){this.#i.push(t)}addProgressiveReadListener(t){this.#s.push(t)}addProgressiveDoneListener(t){this.#e.push(t)}onDataRange(t,e){for(const s of this.#r)s(t,e)}onDataProgress(t,e){this.#t.promise.then(()=>{for(const s of this.#i)s(t,e)})}onDataProgressiveRead(t){this.#t.promise.then(()=>{for(const e of this.#s)e(t)})}onDataProgressiveDone(){this.#t.promise.then(()=>{for(const t of this.#e)t()})}transportReady(){this.#t.resolve()}requestDataRange(t,e){At("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}class Hb{constructor(t,e){this._pdfInfo=t,this._transport=e}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return ut(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(t){return this._transport.getPage(t)}getPageIndex(t){return this._transport.getPageIndex(t)}getDestinations(){return this._transport.getDestinations()}getDestination(t){return this._transport.getDestination(t)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getOptionalContentConfig(e)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(t=!1){return this._transport.startCleanup(t||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(t){return this._transport.cachedPageNumber(t)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}class Vb{#t=!1;constructor(t,e,s,n=!1){this._pageIndex=t,this._pageInfo=e,this._transport=s,this._stats=n?new Oc:null,this._pdfBug=n,this.commonObjs=s.commonObjs,this.objs=new Sd,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:t,rotation:e=this.rotate,offsetX:s=0,offsetY:n=0,dontFlip:r=!1}={}){return new Hn({viewBox:this.view,userUnit:this.userUnit,scale:t,rotation:e,offsetX:s,offsetY:n,dontFlip:r})}getAnnotations({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getAnnotations(this._pageIndex,e)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return ut(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){return this._transport._htmlForXfa?.children[this._pageIndex]||null}render({canvasContext:t,viewport:e,intent:s="display",annotationMode:n=Ts.ENABLE,transform:r=null,background:o=null,optionalContentConfigPromise:a=null,annotationCanvasMap:l=null,pageColors:h=null,printAnnotationStorage:c=null,isEditing:u=!1}){this._stats?.time("Overall");const d=this._transport.getRenderingIntent(s,n,c,u),{renderingIntent:f,cacheKey:g}=d;this.#t=!1,a||=this._transport.getOptionalContentConfig(f);let p=this._intentStates.get(g);p||(p=Object.create(null),this._intentStates.set(g,p)),p.streamReaderCancelTimeout&&(clearTimeout(p.streamReaderCancelTimeout),p.streamReaderCancelTimeout=null);const _=!!(f&ye.PRINT);p.displayReadyCapability||(p.displayReadyCapability=Promise.withResolvers(),p.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(d));const m=b=>{p.renderTasks.delete(y),_&&(this.#t=!0),this.#e(),b?(y.capability.reject(b),this._abortOperatorList({intentState:p,reason:b instanceof Error?b:new Error(b)})):y.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),globalThis.Stats?.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},y=new Ai({callback:m,params:{canvasContext:t,viewport:e,transform:r,background:o},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:l,operatorList:p.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!_,pdfBug:this._pdfBug,pageColors:h});(p.renderTasks||=new Set).add(y);const v=y.task;return Promise.all([p.displayReadyCapability.promise,a]).then(([b,E])=>{if(this.destroyed){m();return}if(this._stats?.time("Rendering"),!(E.renderingIntent&f))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");y.initializeGraphics({transparency:b,optionalContentConfig:E}),y.operatorListChanged()}).catch(m),v}getOperatorList({intent:t="display",annotationMode:e=Ts.ENABLE,printAnnotationStorage:s=null,isEditing:n=!1}={}){function r(){a.operatorList.lastChunk&&(a.opListReadCapability.resolve(a.operatorList),a.renderTasks.delete(l))}const o=this._transport.getRenderingIntent(t,e,s,n,!0);let a=this._intentStates.get(o.cacheKey);a||(a=Object.create(null),this._intentStates.set(o.cacheKey,a));let l;return a.opListReadCapability||(l=Object.create(null),l.operatorListChanged=r,a.opListReadCapability=Promise.withResolvers(),(a.renderTasks||=new Set).add(l),a.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(o)),a.opListReadCapability.promise}streamTextContent({includeMarkedContent:t=!1,disableNormalization:e=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:t===!0,disableNormalization:e===!0},{highWaterMark:100,size(n){return n.items.length}})}getTextContent(t={}){if(this._transport._htmlForXfa)return this.getXfa().then(s=>In.textContent(s));const e=this.streamTextContent(t);return new Promise(function(s,n){function r(){o.read().then(function({value:l,done:h}){if(h){s(a);return}a.lang??=l.lang,Object.assign(a.styles,l.styles),a.items.push(...l.items),r()},n)}const o=e.getReader(),a={items:[],styles:Object.create(null),lang:null};r()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const t=[];for(const e of this._intentStates.values())if(this._abortOperatorList({intentState:e,reason:new Error("Page was destroyed."),force:!0}),!e.opListReadCapability)for(const s of e.renderTasks)t.push(s.completed),s.cancel();return this.objs.clear(),this.#t=!1,Promise.all(t)}cleanup(t=!1){this.#t=!0;const e=this.#e();return t&&e&&(this._stats&&=new Oc),e}#e(){if(!this.#t||this.destroyed)return!1;for(const{renderTasks:t,operatorList:e}of this._intentStates.values())if(t.size>0||!e.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),this.#t=!1,!0}_startRenderPage(t,e){const s=this._intentStates.get(e);s&&(this._stats?.timeEnd("Page Request"),s.displayReadyCapability?.resolve(t))}_renderPageChunk(t,e){for(let s=0,n=t.length;s<n;s++)e.operatorList.fnArray.push(t.fnArray[s]),e.operatorList.argsArray.push(t.argsArray[s]);e.operatorList.lastChunk=t.lastChunk,e.operatorList.separateAnnots=t.separateAnnots;for(const s of e.renderTasks)s.operatorListChanged();t.lastChunk&&this.#e()}_pumpOperatorList({renderingIntent:t,cacheKey:e,annotationStorageSerializable:s,modifiedIds:n}){const{map:r,transfer:o}=s,l=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:t,cacheKey:e,annotationStorage:r,modifiedIds:n},o).getReader(),h=this._intentStates.get(e);h.streamReader=l;const c=()=>{l.read().then(({value:u,done:d})=>{if(d){h.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(u,h),c())},u=>{if(h.streamReader=null,!this._transport.destroyed){if(h.operatorList){h.operatorList.lastChunk=!0;for(const d of h.renderTasks)d.operatorListChanged();this.#e()}if(h.displayReadyCapability)h.displayReadyCapability.reject(u);else if(h.opListReadCapability)h.opListReadCapability.reject(u);else throw u}})};c()}_abortOperatorList({intentState:t,reason:e,force:s=!1}){if(t.streamReader){if(t.streamReaderCancelTimeout&&(clearTimeout(t.streamReaderCancelTimeout),t.streamReaderCancelTimeout=null),!s){if(t.renderTasks.size>0)return;if(e instanceof sl){let n=Bb;e.extraDelay>0&&e.extraDelay<1e3&&(n+=e.extraDelay),t.streamReaderCancelTimeout=setTimeout(()=>{t.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:t,reason:e,force:!0})},n);return}}if(t.streamReader.cancel(new Is(e.message)).catch(()=>{}),t.streamReader=null,!this._transport.destroyed){for(const[n,r]of this._intentStates)if(r===t){this._intentStates.delete(n);break}this.cleanup()}}}get stats(){return this._stats}}var xs,Ne,cs,zs,Br,Gs,Ks,ae,br,xd,Rd,cn,ki,vr;const Rt=class Rt{constructor({name:t=null,port:e=null,verbosity:s=x_()}={}){We(this,ae);We(this,xs,Promise.withResolvers());We(this,Ne,null);We(this,cs,null);We(this,zs,null);if(this.name=t,this.destroyed=!1,this.verbosity=s,e){if(xt(Rt,Ks).has(e))throw new Error("Cannot use more than one PDFWorker per port.");xt(Rt,Ks).set(e,this),ze(this,ae,xd).call(this,e)}else ze(this,ae,Rd).call(this)}get promise(){return xt(this,xs).promise}get port(){return xt(this,cs)}get messageHandler(){return xt(this,Ne)}destroy(){this.destroyed=!0,xt(this,zs)?.terminate(),de(this,zs,null),xt(Rt,Ks).delete(xt(this,cs)),de(this,cs,null),xt(this,Ne)?.destroy(),de(this,Ne,null)}static create(t){const e=xt(this,Ks).get(t?.port);if(e){if(e._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return e}return new Rt(t)}static get workerSrc(){if(Mi.workerSrc)return Mi.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return ut(this,"_setupFakeWorkerGlobal",(async()=>xt(this,ki,vr)?xt(this,ki,vr):(await import(this.workerSrc)).WorkerMessageHandler)())}};xs=new WeakMap,Ne=new WeakMap,cs=new WeakMap,zs=new WeakMap,Br=new WeakMap,Gs=new WeakMap,Ks=new WeakMap,ae=new WeakSet,br=function(){xt(this,xs).resolve(),xt(this,Ne).send("configure",{verbosity:this.verbosity})},xd=function(t){de(this,cs,t),de(this,Ne,new ln("main","worker",t)),xt(this,Ne).on("ready",()=>{}),ze(this,ae,br).call(this)},Rd=function(){if(xt(Rt,Gs)||xt(Rt,ki,vr)){ze(this,ae,cn).call(this);return}let{workerSrc:t}=Rt;try{Rt._isSameOrigin(window.location,t)||(t=Rt._createCDNWrapper(new URL(t,window.location).href));const e=new Worker(t,{type:"module"}),s=new ln("main","worker",e),n=()=>{r.abort(),s.destroy(),e.terminate(),this.destroyed?xt(this,xs).reject(new Error("Worker was destroyed")):ze(this,ae,cn).call(this)},r=new AbortController;e.addEventListener("error",()=>{xt(this,zs)||n()},{signal:r.signal}),s.on("test",a=>{if(r.abort(),this.destroyed||!a){n();return}de(this,Ne,s),de(this,cs,e),de(this,zs,e),ze(this,ae,br).call(this)}),s.on("ready",a=>{if(r.abort(),this.destroyed){n();return}try{o()}catch{ze(this,ae,cn).call(this)}});const o=()=>{const a=new Uint8Array;s.send("test",a,[a.buffer])};o();return}catch{to("The worker has been disabled.")}ze(this,ae,cn).call(this)},cn=function(){xt(Rt,Gs)||(ot("Setting up fake worker."),de(Rt,Gs,!0)),Rt._setupFakeWorkerGlobal.then(t=>{if(this.destroyed){xt(this,xs).reject(new Error("Worker was destroyed"));return}const e=new J_;de(this,cs,e);const s=`fake${$l(Rt,Br)._++}`,n=new ln(s+"_worker",s,e);t.setup(n,e),de(this,Ne,new ln(s,s+"_worker",e)),ze(this,ae,br).call(this)}).catch(t=>{xt(this,xs).reject(new Error(`Setting up fake worker failed: "${t.message}".`))})},ki=new WeakSet,vr=function(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch{return null}},We(Rt,ki),We(Rt,Br,0),We(Rt,Gs,!1),We(Rt,Ks,new WeakMap),ne&&(de(Rt,Gs,!0),Mi.workerSrc||="./pdf.worker.mjs"),Rt._isSameOrigin=(t,e)=>{const s=URL.parse(t);if(!s?.origin||s.origin==="null")return!1;const n=new URL(e,s);return s.origin===n.origin},Rt._createCDNWrapper=t=>{const e=`await import("${t}");`;return URL.createObjectURL(new Blob([e],{type:"text/javascript"}))},Rt.fromPort=t=>{if(B_("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!t?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");return Rt.create(t)};let Ln=Rt;class jb{#t=new Map;#e=new Map;#s=new Map;#i=new Map;#r=null;constructor(t,e,s,n,r){this.messageHandler=t,this.loadingTask=e,this.commonObjs=new Sd,this.fontLoader=new G_({ownerDocument:n.ownerDocument,styleElement:n.styleElement}),this.loadingParams=n.loadingParams,this._params=n,this.canvasFactory=r.canvasFactory,this.filterFactory=r.filterFactory,this.cMapReaderFactory=r.cMapReaderFactory,this.standardFontDataFactory=r.standardFontDataFactory,this.wasmFactory=r.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=s,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}#n(t,e=null){const s=this.#t.get(t);if(s)return s;const n=this.messageHandler.sendWithPromise(t,e);return this.#t.set(t,n),n}get annotationStorage(){return ut(this,"annotationStorage",new al)}getRenderingIntent(t,e=Ts.ENABLE,s=null,n=!1,r=!1){let o=ye.DISPLAY,a=wa;switch(t){case"any":o=ye.ANY;break;case"display":break;case"print":o=ye.PRINT;break;default:ot(`getRenderingIntent - invalid intent: ${t}`)}const l=o&ye.PRINT&&s instanceof dd?s:this.annotationStorage;switch(e){case Ts.DISABLE:o+=ye.ANNOTATIONS_DISABLE;break;case Ts.ENABLE:break;case Ts.ENABLE_FORMS:o+=ye.ANNOTATIONS_FORMS;break;case Ts.ENABLE_STORAGE:o+=ye.ANNOTATIONS_STORAGE,a=l.serializable;break;default:ot(`getRenderingIntent - invalid annotationMode: ${e}`)}n&&(o+=ye.IS_EDITING),r&&(o+=ye.OPLIST);const{ids:h,hash:c}=l.modifiedIds,u=[o,a.hash,c];return{renderingIntent:o,cacheKey:u.join("_"),annotationStorageSerializable:a,modifiedIds:h}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),this.#r?.reject(new Error("Worker was destroyed during onPassword callback"));const t=[];for(const s of this.#e.values())t.push(s._destroy());this.#e.clear(),this.#s.clear(),this.#i.clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const e=this.messageHandler.sendWithPromise("Terminate",null);return t.push(e),Promise.all(t).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),this.#t.clear(),this.filterFactory.destroy(),ie.cleanup(),this._networkStream?.cancelAllRequests(new Is("Worker was terminated.")),this.messageHandler?.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:t,loadingTask:e}=this;t.on("GetReader",(s,n)=>{Ht(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=r=>{this._lastProgress={loaded:r.loaded,total:r.total}},n.onPull=()=>{this._fullReader.read().then(function({value:r,done:o}){if(o){n.close();return}Ht(r instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),n.enqueue(new Uint8Array(r),1,[r])}).catch(r=>{n.error(r)})},n.onCancel=r=>{this._fullReader.cancel(r),n.ready.catch(o=>{if(!this.destroyed)throw o})}}),t.on("ReaderHeadersReady",async s=>{await this._fullReader.headersReady;const{isStreamingSupported:n,isRangeSupported:r,contentLength:o}=this._fullReader;return(!n||!r)&&(this._lastProgress&&e.onProgress?.(this._lastProgress),this._fullReader.onProgress=a=>{e.onProgress?.({loaded:a.loaded,total:a.total})}),{isStreamingSupported:n,isRangeSupported:r,contentLength:o}}),t.on("GetRangeReader",(s,n)=>{Ht(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const r=this._networkStream.getRangeReader(s.begin,s.end);if(!r){n.close();return}n.onPull=()=>{r.read().then(function({value:o,done:a}){if(a){n.close();return}Ht(o instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),n.enqueue(new Uint8Array(o),1,[o])}).catch(o=>{n.error(o)})},n.onCancel=o=>{r.cancel(o),n.ready.catch(a=>{if(!this.destroyed)throw a})}}),t.on("GetDoc",({pdfInfo:s})=>{this._numPages=s.numPages,this._htmlForXfa=s.htmlForXfa,delete s.htmlForXfa,e._capability.resolve(new Hb(s,this))}),t.on("DocException",s=>{e._capability.reject(fe(s))}),t.on("PasswordRequest",s=>{this.#r=Promise.withResolvers();try{if(!e.onPassword)throw fe(s);const n=r=>{r instanceof Error?this.#r.reject(r):this.#r.resolve({password:r})};e.onPassword(n,s.code)}catch(n){this.#r.reject(n)}return this.#r.promise}),t.on("DataLoaded",s=>{e.onProgress?.({loaded:s.length,total:s.length}),this.downloadInfoCapability.resolve(s)}),t.on("StartRenderPage",s=>{if(this.destroyed)return;this.#e.get(s.pageIndex)._startRenderPage(s.transparency,s.cacheKey)}),t.on("commonobj",([s,n,r])=>{if(this.destroyed||this.commonObjs.has(s))return null;switch(n){case"Font":if("error"in r){const h=r.error;ot(`Error during font loading: ${h}`),this.commonObjs.resolve(s,h);break}const o=this._params.pdfBug&&globalThis.FontInspector?.enabled?(h,c)=>globalThis.FontInspector.fontAdded(h,c):null,a=new K_(r,o);this.fontLoader.bind(a).catch(()=>t.sendWithPromise("FontFallback",{id:s})).finally(()=>{!a.fontExtraProperties&&a.data&&(a.data=null),this.commonObjs.resolve(s,a)});break;case"CopyLocalImage":const{imageRef:l}=r;Ht(l,"The imageRef must be defined.");for(const h of this.#e.values())for(const[,c]of h.objs)if(c?.ref===l)return c.dataLen?(this.commonObjs.resolve(s,structuredClone(c)),c.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(s,r);break;default:throw new Error(`Got unknown common object type ${n}`)}return null}),t.on("obj",([s,n,r,o])=>{if(this.destroyed)return;const a=this.#e.get(n);if(!a.objs.has(s)){if(a._intentStates.size===0){o?.bitmap?.close();return}switch(r){case"Image":case"Pattern":a.objs.resolve(s,o);break;default:throw new Error(`Got unknown object type ${r}`)}}}),t.on("DocProgress",s=>{this.destroyed||e.onProgress?.({loaded:s.loaded,total:s.total})}),t.on("FetchBinaryData",async s=>{if(this.destroyed)throw new Error("Worker was destroyed.");const n=this[s.type];if(!n)throw new Error(`${s.type} not initialized, see the \`useWorkerFetch\` parameter.`);return n.fetch(s)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){this.annotationStorage.size<=0&&ot("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:t,transfer:e}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:t,filename:this._fullReader?.filename??null},e).finally(()=>{this.annotationStorage.resetModified()})}getPage(t){if(!Number.isInteger(t)||t<=0||t>this._numPages)return Promise.reject(new Error("Invalid page request."));const e=t-1,s=this.#s.get(e);if(s)return s;const n=this.messageHandler.sendWithPromise("GetPage",{pageIndex:e}).then(r=>{if(this.destroyed)throw new Error("Transport destroyed");r.refStr&&this.#i.set(r.refStr,t);const o=new Vb(e,r,this,this._params.pdfBug);return this.#e.set(e,o),o});return this.#s.set(e,n),n}getPageIndex(t){return Ea(t)?this.messageHandler.sendWithPromise("GetPageIndex",{num:t.num,gen:t.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(t,e){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:t,intent:e})}getFieldObjects(){return this.#n("GetFieldObjects")}hasJSActions(){return this.#n("HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(t){return typeof t!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return this.#n("GetDocJSActions")}getPageJSActions(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:t})}getStructTree(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:t})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(t){return this.#n("GetOptionalContentConfig").then(e=>new yb(e,t))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const t="GetMetadata",e=this.#t.get(t);if(e)return e;const s=this.messageHandler.sendWithPromise(t,null).then(n=>({info:n[0],metadata:n[1]?new bb(n[1]):null,contentDispositionFilename:this._fullReader?.filename??null,contentLength:this._fullReader?.contentLength??null}));return this.#t.set(t,s),s}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(t=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const e of this.#e.values())if(!e.cleanup())throw new Error(`startCleanup: Page ${e.pageNumber} is currently rendering.`);this.commonObjs.clear(),t||this.fontLoader.clear(),this.#t.clear(),this.filterFactory.destroy(!0),ie.cleanup()}}cachedPageNumber(t){if(!Ea(t))return null;const e=t.gen===0?`${t.num}R`:`${t.num}R${t.gen}`;return this.#i.get(e)??null}}class Ub{#t=null;onContinue=null;onError=null;constructor(t){this.#t=t}get promise(){return this.#t.capability.promise}cancel(t=0){this.#t.cancel(null,t)}get separateAnnots(){const{separateAnnots:t}=this.#t.operatorList;if(!t)return!1;const{annotationCanvasMap:e}=this.#t;return t.form||t.canvas&&e?.size>0}}class Ai{#t=null;static#e=new WeakSet;constructor({callback:t,params:e,objs:s,commonObjs:n,annotationCanvasMap:r,operatorList:o,pageIndex:a,canvasFactory:l,filterFactory:h,useRequestAnimationFrame:c=!1,pdfBug:u=!1,pageColors:d=null}){this.callback=t,this.params=e,this.objs=s,this.commonObjs=n,this.annotationCanvasMap=r,this.operatorListIdx=null,this.operatorList=o,this._pageIndex=a,this.canvasFactory=l,this.filterFactory=h,this._pdfBug=u,this.pageColors=d,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=c===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new Ub(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=e.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:t=!1,optionalContentConfig:e}){if(this.cancelled)return;if(this._canvas){if(Ai.#e.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");Ai.#e.add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:s,viewport:n,transform:r,background:o}=this.params;this.gfx=new Li(s,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:e},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:r,viewport:n,transparency:t,background:o}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback?.()}cancel(t=null,e=0){this.running=!1,this.cancelled=!0,this.gfx?.endDrawing(),this.#t&&(window.cancelAnimationFrame(this.#t),this.#t=null),Ai.#e.delete(this._canvas),t||=new sl(`Rendering cancelled, page ${this._pageIndex+1}`,e),this.callback(t),this.task.onError?.(t)}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||=this._continueBound;return}this.stepper?.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?this.#t=window.requestAnimationFrame(()=>{this.#t=null,this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),Ai.#e.delete(this._canvas),this.callback())))}}const Wb="5.3.93",zb="cbeef3233";function Xc(i){return Math.floor(Math.max(0,Math.min(1,i))*255).toString(16).padStart(2,"0")}function tn(i){return Math.max(0,Math.min(255,255*i))}class Qc{static CMYK_G([t,e,s,n]){return["G",1-Math.min(1,.3*t+.59*s+.11*e+n)]}static G_CMYK([t]){return["CMYK",0,0,0,1-t]}static G_RGB([t]){return["RGB",t,t,t]}static G_rgb([t]){return t=tn(t),[t,t,t]}static G_HTML([t]){const e=Xc(t);return`#${e}${e}${e}`}static RGB_G([t,e,s]){return["G",.3*t+.59*e+.11*s]}static RGB_rgb(t){return t.map(tn)}static RGB_HTML(t){return`#${t.map(Xc).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([t,e,s,n]){return["RGB",1-Math.min(1,t+n),1-Math.min(1,s+n),1-Math.min(1,e+n)]}static CMYK_rgb([t,e,s,n]){return[tn(1-Math.min(1,t+n)),tn(1-Math.min(1,s+n)),tn(1-Math.min(1,e+n))]}static CMYK_HTML(t){const e=this.CMYK_RGB(t).slice(1);return this.RGB_HTML(e)}static RGB_CMYK([t,e,s]){const n=1-t,r=1-e,o=1-s,a=Math.min(n,r,o);return["CMYK",n,r,o,a]}}class Gb{create(t,e,s=!1){if(t<=0||e<=0)throw new Error("Invalid SVG dimensions");const n=this._createSVG("svg:svg");return n.setAttribute("version","1.1"),s||(n.setAttribute("width",`${t}px`),n.setAttribute("height",`${e}px`)),n.setAttribute("preserveAspectRatio","none"),n.setAttribute("viewBox",`0 0 ${t} ${e}`),n}createElement(t){if(typeof t!="string")throw new Error("Invalid SVG element type");return this._createSVG(t)}_createSVG(t){At("Abstract method `_createSVG` called.")}}class Or extends Gb{_createSVG(t){return document.createElementNS(os,t)}}class Pd{static setupStorage(t,e,s,n,r){const o=n.getValue(e,{value:null});switch(s.name){case"textarea":if(o.value!==null&&(t.textContent=o.value),r==="print")break;t.addEventListener("input",a=>{n.setValue(e,{value:a.target.value})});break;case"input":if(s.attributes.type==="radio"||s.attributes.type==="checkbox"){if(o.value===s.attributes.xfaOn?t.setAttribute("checked",!0):o.value===s.attributes.xfaOff&&t.removeAttribute("checked"),r==="print")break;t.addEventListener("change",a=>{n.setValue(e,{value:a.target.checked?a.target.getAttribute("xfaOn"):a.target.getAttribute("xfaOff")})})}else{if(o.value!==null&&t.setAttribute("value",o.value),r==="print")break;t.addEventListener("input",a=>{n.setValue(e,{value:a.target.value})})}break;case"select":if(o.value!==null){t.setAttribute("value",o.value);for(const a of s.children)a.attributes.value===o.value?a.attributes.selected=!0:a.attributes.hasOwnProperty("selected")&&delete a.attributes.selected}t.addEventListener("input",a=>{const l=a.target.options,h=l.selectedIndex===-1?"":l[l.selectedIndex].value;n.setValue(e,{value:h})});break}}static setAttributes({html:t,element:e,storage:s=null,intent:n,linkService:r}){const{attributes:o}=e,a=t instanceof HTMLAnchorElement;o.type==="radio"&&(o.name=`${o.name}-${n}`);for(const[l,h]of Object.entries(o))if(h!=null)switch(l){case"class":h.length&&t.setAttribute(l,h.join(" "));break;case"dataId":break;case"id":t.setAttribute("data-element-id",h);break;case"style":Object.assign(t.style,h);break;case"textContent":t.textContent=h;break;default:(!a||l!=="href"&&l!=="newWindow")&&t.setAttribute(l,h)}a&&r.addLinkAttributes(t,o.href,o.newWindow),s&&o.dataId&&this.setupStorage(t,o.dataId,e,s)}static render(t){const e=t.annotationStorage,s=t.linkService,n=t.xfaHtml,r=t.intent||"display",o=document.createElement(n.name);n.attributes&&this.setAttributes({html:o,element:n,intent:r,linkService:s});const a=r!=="richText",l=t.div;if(l.append(o),t.viewport){const u=`matrix(${t.viewport.transform.join(",")})`;l.style.transform=u}a&&l.setAttribute("class","xfaLayer xfaFont");const h=[];if(n.children.length===0){if(n.value){const u=document.createTextNode(n.value);o.append(u),a&&In.shouldBuildText(n.name)&&h.push(u)}return{textDivs:h}}const c=[[n,-1,o]];for(;c.length>0;){const[u,d,f]=c.at(-1);if(d+1===u.children.length){c.pop();continue}const g=u.children[++c.at(-1)[1]];if(g===null)continue;const{name:p}=g;if(p==="#text"){const m=document.createTextNode(g.value);h.push(m),f.append(m);continue}const _=g?.attributes?.xmlns?document.createElementNS(g.attributes.xmlns,p):document.createElement(p);if(f.append(_),g.attributes&&this.setAttributes({html:_,element:g,storage:e,intent:r,linkService:s}),g.children?.length>0)c.push([g,-1,_]);else if(g.value){const m=document.createTextNode(g.value);a&&In.shouldBuildText(p)&&h.push(m),_.append(m)}}for(const u of l.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))u.setAttribute("readOnly",!0);return{textDivs:h}}static update(t){const e=`matrix(${t.viewport.transform.join(",")})`;t.div.style.transform=e,t.div.hidden=!1}}const Kb=9,ti=new WeakSet;class Jc{static create(t){switch(t.data.annotationType){case $t.LINK:return new Id(t);case $t.TEXT:return new qb(t);case $t.WIDGET:switch(t.data.fieldType){case"Tx":return new Yb(t);case"Btn":return t.data.radioButton?new Ld(t):t.data.checkBox?new Qb(t):new Jb(t);case"Ch":return new Zb(t);case"Sig":return new Xb(t)}return new ri(t);case $t.POPUP:return new Ca(t);case $t.FREETEXT:return new Md(t);case $t.LINE:return new ev(t);case $t.SQUARE:return new sv(t);case $t.CIRCLE:return new iv(t);case $t.POLYLINE:return new kd(t);case $t.CARET:return new rv(t);case $t.INK:return new dl(t);case $t.POLYGON:return new nv(t);case $t.HIGHLIGHT:return new Od(t);case $t.UNDERLINE:return new ov(t);case $t.SQUIGGLY:return new av(t);case $t.STRIKEOUT:return new lv(t);case $t.STAMP:return new Dd(t);case $t.FILEATTACHMENT:return new cv(t);default:return new Dt(t)}}}class Dt{#t=null;#e=!1;#s=null;constructor(t,{isRenderable:e=!1,ignoreBorder:s=!1,createQuadrilaterals:n=!1}={}){this.isRenderable=e,this.data=t.data,this.layer=t.layer,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderForms=t.renderForms,this.svgFactory=t.svgFactory,this.annotationStorage=t.annotationStorage,this.enableScripting=t.enableScripting,this.hasJSActions=t.hasJSActions,this._fieldObjects=t.fieldObjects,this.parent=t.parent,e&&(this.container=this._createContainer(s)),n&&this._createQuadrilaterals()}static _hasPopupData({contentsObj:t,richText:e}){return!!(t?.str||e?.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return Dt._hasPopupData(this.data)}updateEdited(t){if(!this.container)return;this.#t||={rect:this.data.rect.slice(0)};const{rect:e}=t;e&&this.#i(e),this.#s?.popup.updateEdited(t)}resetEdited(){this.#t&&(this.#i(this.#t.rect),this.#s?.popup.resetEdited(),this.#t=null)}#i(t){const{container:{style:e},data:{rect:s,rotation:n},parent:{viewport:{rawDims:{pageWidth:r,pageHeight:o,pageX:a,pageY:l}}}}=this;s?.splice(0,4,...t),e.left=`${100*(t[0]-a)/r}%`,e.top=`${100*(o-t[3]+l)/o}%`,n===0?(e.width=`${100*(t[2]-t[0])/r}%`,e.height=`${100*(t[3]-t[1])/o}%`):this.setRotation(n)}_createContainer(t){const{data:e,parent:{page:s,viewport:n}}=this,r=document.createElement("section");r.setAttribute("data-annotation-id",e.id),this instanceof ri||(r.tabIndex=0);const{style:o}=r;if(o.zIndex=this.parent.zIndex++,e.alternativeText&&(r.title=e.alternativeText),e.noRotate&&r.classList.add("norotate"),!e.rect||this instanceof Ca){const{rotation:p}=e;return!e.hasOwnCanvas&&p!==0&&this.setRotation(p,r),r}const{width:a,height:l}=this;if(!t&&e.borderStyle.width>0){o.borderWidth=`${e.borderStyle.width}px`;const p=e.borderStyle.horizontalCornerRadius,_=e.borderStyle.verticalCornerRadius;if(p>0||_>0){const y=`calc(${p}px * var(--total-scale-factor)) / calc(${_}px * var(--total-scale-factor))`;o.borderRadius=y}else if(this instanceof Ld){const y=`calc(${a}px * var(--total-scale-factor)) / calc(${l}px * var(--total-scale-factor))`;o.borderRadius=y}switch(e.borderStyle.style){case pi.SOLID:o.borderStyle="solid";break;case pi.DASHED:o.borderStyle="dashed";break;case pi.BEVELED:ot("Unimplemented border style: beveled");break;case pi.INSET:ot("Unimplemented border style: inset");break;case pi.UNDERLINE:o.borderBottomStyle="solid";break}const m=e.borderColor||null;m?(this.#e=!0,o.borderColor=Y.makeHexColor(m[0]|0,m[1]|0,m[2]|0)):o.borderWidth=0}const h=Y.normalizeRect([e.rect[0],s.view[3]-e.rect[1]+s.view[1],e.rect[2],s.view[3]-e.rect[3]+s.view[1]]),{pageWidth:c,pageHeight:u,pageX:d,pageY:f}=n.rawDims;o.left=`${100*(h[0]-d)/c}%`,o.top=`${100*(h[1]-f)/u}%`;const{rotation:g}=e;return e.hasOwnCanvas||g===0?(o.width=`${100*a/c}%`,o.height=`${100*l/u}%`):this.setRotation(g,r),r}setRotation(t,e=this.container){if(!this.data.rect)return;const{pageWidth:s,pageHeight:n}=this.parent.viewport.rawDims;let{width:r,height:o}=this;t%180!==0&&([r,o]=[o,r]),e.style.width=`${100*r/s}%`,e.style.height=`${100*o/n}%`,e.setAttribute("data-main-rotation",(360-t)%360)}get _commonActions(){const t=(e,s,n)=>{const r=n.detail[e],o=r[0],a=r.slice(1);n.target.style[s]=Qc[`${o}_HTML`](a),this.annotationStorage.setValue(this.data.id,{[s]:Qc[`${o}_rgb`](a)})};return ut(this,"_commonActions",{display:e=>{const{display:s}=e.detail,n=s%2===1;this.container.style.visibility=n?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:n,noPrint:s===1||s===2})},print:e=>{this.annotationStorage.setValue(this.data.id,{noPrint:!e.detail.print})},hidden:e=>{const{hidden:s}=e.detail;this.container.style.visibility=s?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:s,noView:s})},focus:e=>{setTimeout(()=>e.target.focus({preventScroll:!1}),0)},userName:e=>{e.target.title=e.detail.userName},readonly:e=>{e.target.disabled=e.detail.readonly},required:e=>{this._setRequired(e.target,e.detail.required)},bgColor:e=>{t("bgColor","backgroundColor",e)},fillColor:e=>{t("fillColor","backgroundColor",e)},fgColor:e=>{t("fgColor","color",e)},textColor:e=>{t("textColor","color",e)},borderColor:e=>{t("borderColor","borderColor",e)},strokeColor:e=>{t("strokeColor","borderColor",e)},rotation:e=>{const s=e.detail.rotation;this.setRotation(s),this.annotationStorage.setValue(this.data.id,{rotation:s})}})}_dispatchEventFromSandbox(t,e){const s=this._commonActions;for(const n of Object.keys(e.detail))(t[n]||s[n])?.(e)}_setDefaultPropertiesFromJS(t){if(!this.enableScripting)return;const e=this.annotationStorage.getRawValue(this.data.id);if(!e)return;const s=this._commonActions;for(const[n,r]of Object.entries(e)){const o=s[n];if(o){const a={detail:{[n]:r},target:t};o(a),delete e[n]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:t}=this.data;if(!t)return;const[e,s,n,r]=this.data.rect.map(p=>Math.fround(p));if(t.length===8){const[p,_,m,y]=t.subarray(2,6);if(n===p&&r===_&&e===m&&s===y)return}const{style:o}=this.container;let a;if(this.#e){const{borderColor:p,borderWidth:_}=o;o.borderWidth=0,a=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${p}" stroke-width="${_}">`],this.container.classList.add("hasBorder")}const l=n-e,h=r-s,{svgFactory:c}=this,u=c.createElement("svg");u.classList.add("quadrilateralsContainer"),u.setAttribute("width",0),u.setAttribute("height",0),u.role="none";const d=c.createElement("defs");u.append(d);const f=c.createElement("clipPath"),g=`clippath_${this.data.id}`;f.setAttribute("id",g),f.setAttribute("clipPathUnits","objectBoundingBox"),d.append(f);for(let p=2,_=t.length;p<_;p+=8){const m=t[p],y=t[p+1],v=t[p+2],b=t[p+3],E=c.createElement("rect"),S=(v-e)/l,T=(r-y)/h,I=(m-v)/l,k=(y-b)/h;E.setAttribute("x",S),E.setAttribute("y",T),E.setAttribute("width",I),E.setAttribute("height",k),f.append(E),a?.push(`<rect vector-effect="non-scaling-stroke" x="${S}" y="${T}" width="${I}" height="${k}"/>`)}this.#e&&(a.push("</g></svg>')"),o.backgroundImage=a.join("")),this.container.append(u),this.container.style.clipPath=`url(#${g})`}_createPopup(){const{data:t}=this,e=this.#s=new Ca({data:{color:t.color,titleObj:t.titleObj,modificationDate:t.modificationDate,contentsObj:t.contentsObj,richText:t.richText,parentRect:t.rect,borderStyle:0,id:`popup_${t.id}`,rotation:t.rotation,noRotate:!0},parent:this.parent,elements:[this]});this.parent.div.append(e.render())}render(){At("Abstract method `AnnotationElement.render` called")}_getElementsByName(t,e=null){const s=[];if(this._fieldObjects){const n=this._fieldObjects[t];if(n)for(const{page:r,id:o,exportValues:a}of n){if(r===-1||o===e)continue;const l=typeof a=="string"?a:null,h=document.querySelector(`[data-element-id="${o}"]`);if(h&&!ti.has(h)){ot(`_getElementsByName - element not allowed: ${o}`);continue}s.push({id:o,exportValue:l,domElement:h})}return s}for(const n of document.getElementsByName(t)){const{exportValue:r}=n,o=n.getAttribute("data-element-id");o!==e&&ti.has(n)&&s.push({id:o,exportValue:r,domElement:n})}return s}show(){this.container&&(this.container.hidden=!1),this.popup?.maybeShow()}hide(){this.container&&(this.container.hidden=!0),this.popup?.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const t=this.getElementsToTriggerPopup();if(Array.isArray(t))for(const e of t)e.classList.add("highlightArea");else t.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:t,data:{id:e}}=this;this.container.addEventListener("dblclick",()=>{this.linkService.eventBus?.dispatch("switchannotationeditormode",{source:this,mode:t,editId:e,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}}class Id extends Dt{constructor(t,e=null){super(t,{isRenderable:!0,ignoreBorder:!!e?.ignoreBorder,createQuadrilaterals:!0}),this.isTooltipOnly=t.data.isTooltipOnly}render(){const{data:t,linkService:e}=this,s=document.createElement("a");s.setAttribute("data-element-id",t.id);let n=!1;return t.url?(e.addLinkAttributes(s,t.url,t.newWindow),n=!0):t.action?(this._bindNamedAction(s,t.action),n=!0):t.attachment?(this.#e(s,t.attachment,t.attachmentDest),n=!0):t.setOCGState?(this.#s(s,t.setOCGState),n=!0):t.dest?(this._bindLink(s,t.dest),n=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(s,t),n=!0),t.resetForm?(this._bindResetFormAction(s,t.resetForm),n=!0):this.isTooltipOnly&&!n&&(this._bindLink(s,""),n=!0)),this.container.classList.add("linkAnnotation"),n&&this.container.append(s),this.container}#t(){this.container.setAttribute("data-internal-link","")}_bindLink(t,e){t.href=this.linkService.getDestinationHash(e),t.onclick=()=>(e&&this.linkService.goToDestination(e),!1),(e||e==="")&&this.#t()}_bindNamedAction(t,e){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(e),!1),this.#t()}#e(t,e,s=null){t.href=this.linkService.getAnchorUrl(""),e.description&&(t.title=e.description),t.onclick=()=>(this.downloadManager?.openOrDownloadData(e.content,e.filename,s),!1),this.#t()}#s(t,e){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(e),!1),this.#t()}_bindJSAction(t,e){t.href=this.linkService.getAnchorUrl("");const s=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const n of Object.keys(e.actions)){const r=s.get(n);r&&(t[r]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e.id,name:n}}),!1))}t.onclick||(t.onclick=()=>!1),this.#t()}_bindResetFormAction(t,e){const s=t.onclick;if(s||(t.href=this.linkService.getAnchorUrl("")),this.#t(),!this._fieldObjects){ot('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),s||(t.onclick=()=>!1);return}t.onclick=()=>{s?.();const{fields:n,refs:r,include:o}=e,a=[];if(n.length!==0||r.length!==0){const c=new Set(r);for(const u of n){const d=this._fieldObjects[u]||[];for(const{id:f}of d)c.add(f)}for(const u of Object.values(this._fieldObjects))for(const d of u)c.has(d.id)===o&&a.push(d)}else for(const c of Object.values(this._fieldObjects))a.push(...c);const l=this.annotationStorage,h=[];for(const c of a){const{id:u}=c;switch(h.push(u),c.type){case"text":{const f=c.defaultValue||"";l.setValue(u,{value:f});break}case"checkbox":case"radiobutton":{const f=c.defaultValue===c.exportValues;l.setValue(u,{value:f});break}case"combobox":case"listbox":{const f=c.defaultValue||"";l.setValue(u,{value:f});break}default:continue}const d=document.querySelector(`[data-element-id="${u}"]`);if(d){if(!ti.has(d)){ot(`_bindResetFormAction - element not allowed: ${u}`);continue}}else continue;d.dispatchEvent(new Event("resetform"))}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:h,name:"ResetForm"}}),!1}}}class qb extends Dt{constructor(t){super(t,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const t=document.createElement("img");return t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),t.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(t),this.container}}class ri extends Dt{render(){return this.container}showElementAndHideCanvas(t){this.data.hasOwnCanvas&&(t.previousSibling?.nodeName==="CANVAS"&&(t.previousSibling.hidden=!0),t.hidden=!1)}_getKeyModifier(t){return Yt.platform.isMac?t.metaKey:t.ctrlKey}_setEventListener(t,e,s,n,r){s.includes("mouse")?t.addEventListener(s,o=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:n,value:r(o),shift:o.shiftKey,modifier:this._getKeyModifier(o)}})}):t.addEventListener(s,o=>{if(s==="blur"){if(!e.focused||!o.relatedTarget)return;e.focused=!1}else if(s==="focus"){if(e.focused)return;e.focused=!0}r&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:n,value:r(o)}})})}_setEventListeners(t,e,s,n){for(const[r,o]of s)(o==="Action"||this.data.actions?.[o])&&((o==="Focus"||o==="Blur")&&(e||={focused:!1}),this._setEventListener(t,e,r,o,n),o==="Focus"&&!this.data.actions?.Blur?this._setEventListener(t,e,"blur","Blur",null):o==="Blur"&&!this.data.actions?.Focus&&this._setEventListener(t,e,"focus","Focus",null))}_setBackgroundColor(t){const e=this.data.backgroundColor||null;t.style.backgroundColor=e===null?"transparent":Y.makeHexColor(e[0],e[1],e[2])}_setTextStyle(t){const e=["left","center","right"],{fontColor:s}=this.data.defaultAppearanceData,n=this.data.defaultAppearanceData.fontSize||Kb,r=t.style;let o;const a=2,l=h=>Math.round(10*h)/10;if(this.data.multiLine){const h=Math.abs(this.data.rect[3]-this.data.rect[1]-a),c=Math.round(h/(Io*n))||1,u=h/c;o=Math.min(n,l(u/Io))}else{const h=Math.abs(this.data.rect[3]-this.data.rect[1]-a);o=Math.min(n,l(h/Io))}r.fontSize=`calc(${o}px * var(--total-scale-factor))`,r.color=Y.makeHexColor(s[0],s[1],s[2]),this.data.textAlignment!==null&&(r.textAlign=e[this.data.textAlignment])}_setRequired(t,e){e?t.setAttribute("required",!0):t.removeAttribute("required"),t.setAttribute("aria-required",e)}}class Yb extends ri{constructor(t){const e=t.renderForms||t.data.hasOwnCanvas||!t.data.hasAppearance&&!!t.data.fieldValue;super(t,{isRenderable:e})}setPropertyOnSiblings(t,e,s,n){const r=this.annotationStorage;for(const o of this._getElementsByName(t.name,t.id))o.domElement&&(o.domElement[e]=s),r.setValue(o.id,{[n]:s})}render(){const t=this.annotationStorage,e=this.data.id;this.container.classList.add("textWidgetAnnotation");let s=null;if(this.renderForms){const n=t.getValue(e,{value:this.data.fieldValue});let r=n.value||"";const o=t.getValue(e,{charLimit:this.data.maxLen}).charLimit;o&&r.length>o&&(r=r.slice(0,o));let a=n.formattedValue||this.data.textContent?.join(`
`)||null;a&&this.data.comb&&(a=a.replaceAll(/\s+/g,""));const l={userValue:r,formattedValue:a,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(s=document.createElement("textarea"),s.textContent=a??r,this.data.doNotScroll&&(s.style.overflowY="hidden")):(s=document.createElement("input"),s.type=this.data.password?"password":"text",s.setAttribute("value",a??r),this.data.doNotScroll&&(s.style.overflowX="hidden")),this.data.hasOwnCanvas&&(s.hidden=!0),ti.add(s),s.setAttribute("data-element-id",e),s.disabled=this.data.readOnly,s.name=this.data.fieldName,s.tabIndex=0;const h=this.data.dateFormat||this.data.timeFormat;h&&(s.title=h),this._setRequired(s,this.data.required),o&&(s.maxLength=o),s.addEventListener("input",u=>{t.setValue(e,{value:u.target.value}),this.setPropertyOnSiblings(s,"value",u.target.value,"value"),l.formattedValue=null}),s.addEventListener("resetform",u=>{const d=this.data.defaultFieldValue??"";s.value=l.userValue=d,l.formattedValue=null});let c=u=>{const{formattedValue:d}=l;d!=null&&(u.target.value=d),u.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){s.addEventListener("focus",d=>{if(l.focused)return;const{target:f}=d;l.userValue&&(f.value=l.userValue),l.lastCommittedValue=f.value,l.commitKey=1,this.data.actions?.Focus||(l.focused=!0)}),s.addEventListener("updatefromsandbox",d=>{this.showElementAndHideCanvas(d.target);const f={value(g){l.userValue=g.detail.value??"",t.setValue(e,{value:l.userValue.toString()}),g.target.value=l.userValue},formattedValue(g){const{formattedValue:p}=g.detail;l.formattedValue=p,p!=null&&g.target!==document.activeElement&&(g.target.value=p),t.setValue(e,{formattedValue:p})},selRange(g){g.target.setSelectionRange(...g.detail.selRange)},charLimit:g=>{const{charLimit:p}=g.detail,{target:_}=g;if(p===0){_.removeAttribute("maxLength");return}_.setAttribute("maxLength",p);let m=l.userValue;!m||m.length<=p||(m=m.slice(0,p),_.value=l.userValue=m,t.setValue(e,{value:m}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:m,willCommit:!0,commitKey:1,selStart:_.selectionStart,selEnd:_.selectionEnd}}))}};this._dispatchEventFromSandbox(f,d)}),s.addEventListener("keydown",d=>{l.commitKey=1;let f=-1;if(d.key==="Escape"?f=0:d.key==="Enter"&&!this.data.multiLine?f=2:d.key==="Tab"&&(l.commitKey=3),f===-1)return;const{value:g}=d.target;l.lastCommittedValue!==g&&(l.lastCommittedValue=g,l.userValue=g,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:g,willCommit:!0,commitKey:f,selStart:d.target.selectionStart,selEnd:d.target.selectionEnd}}))});const u=c;c=null,s.addEventListener("blur",d=>{if(!l.focused||!d.relatedTarget)return;this.data.actions?.Blur||(l.focused=!1);const{value:f}=d.target;l.userValue=f,l.lastCommittedValue!==f&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:f,willCommit:!0,commitKey:l.commitKey,selStart:d.target.selectionStart,selEnd:d.target.selectionEnd}}),u(d)}),this.data.actions?.Keystroke&&s.addEventListener("beforeinput",d=>{l.lastCommittedValue=null;const{data:f,target:g}=d,{value:p,selectionStart:_,selectionEnd:m}=g;let y=_,v=m;switch(d.inputType){case"deleteWordBackward":{const b=p.substring(0,_).match(/\w*[^\w]*$/);b&&(y-=b[0].length);break}case"deleteWordForward":{const b=p.substring(_).match(/^[^\w]*\w*/);b&&(v+=b[0].length);break}case"deleteContentBackward":_===m&&(y-=1);break;case"deleteContentForward":_===m&&(v+=1);break}d.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:p,change:f||"",willCommit:!1,selStart:y,selEnd:v}})}),this._setEventListeners(s,l,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],d=>d.target.value)}if(c&&s.addEventListener("blur",c),this.data.comb){const d=(this.data.rect[2]-this.data.rect[0])/o;s.classList.add("comb"),s.style.letterSpacing=`calc(${d}px * var(--total-scale-factor) - 1ch)`}}else s=document.createElement("div"),s.textContent=this.data.fieldValue,s.style.verticalAlign="middle",s.style.display="table-cell",this.data.hasOwnCanvas&&(s.hidden=!0);return this._setTextStyle(s),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class Xb extends ri{constructor(t){super(t,{isRenderable:!!t.data.hasOwnCanvas})}}class Qb extends ri{constructor(t){super(t,{isRenderable:t.renderForms})}render(){const t=this.annotationStorage,e=this.data,s=e.id;let n=t.getValue(s,{value:e.exportValue===e.fieldValue}).value;typeof n=="string"&&(n=n!=="Off",t.setValue(s,{value:n})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const r=document.createElement("input");return ti.add(r),r.setAttribute("data-element-id",s),r.disabled=e.readOnly,this._setRequired(r,this.data.required),r.type="checkbox",r.name=e.fieldName,n&&r.setAttribute("checked",!0),r.setAttribute("exportValue",e.exportValue),r.tabIndex=0,r.addEventListener("change",o=>{const{name:a,checked:l}=o.target;for(const h of this._getElementsByName(a,s)){const c=l&&h.exportValue===e.exportValue;h.domElement&&(h.domElement.checked=c),t.setValue(h.id,{value:c})}t.setValue(s,{value:l})}),r.addEventListener("resetform",o=>{const a=e.defaultFieldValue||"Off";o.target.checked=a===e.exportValue}),this.enableScripting&&this.hasJSActions&&(r.addEventListener("updatefromsandbox",o=>{const a={value(l){l.target.checked=l.detail.value!=="Off",t.setValue(s,{value:l.target.checked})}};this._dispatchEventFromSandbox(a,o)}),this._setEventListeners(r,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],o=>o.target.checked)),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class Ld extends ri{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const t=this.annotationStorage,e=this.data,s=e.id;let n=t.getValue(s,{value:e.fieldValue===e.buttonValue}).value;if(typeof n=="string"&&(n=n!==e.buttonValue,t.setValue(s,{value:n})),n)for(const o of this._getElementsByName(e.fieldName,s))t.setValue(o.id,{value:!1});const r=document.createElement("input");if(ti.add(r),r.setAttribute("data-element-id",s),r.disabled=e.readOnly,this._setRequired(r,this.data.required),r.type="radio",r.name=e.fieldName,n&&r.setAttribute("checked",!0),r.tabIndex=0,r.addEventListener("change",o=>{const{name:a,checked:l}=o.target;for(const h of this._getElementsByName(a,s))t.setValue(h.id,{value:!1});t.setValue(s,{value:l})}),r.addEventListener("resetform",o=>{const a=e.defaultFieldValue;o.target.checked=a!=null&&a===e.buttonValue}),this.enableScripting&&this.hasJSActions){const o=e.buttonValue;r.addEventListener("updatefromsandbox",a=>{const l={value:h=>{const c=o===h.detail.value;for(const u of this._getElementsByName(h.target.name)){const d=c&&u.id===s;u.domElement&&(u.domElement.checked=d),t.setValue(u.id,{value:d})}}};this._dispatchEventFromSandbox(l,a)}),this._setEventListeners(r,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],a=>a.target.checked)}return this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class Jb extends Id{constructor(t){super(t,{ignoreBorder:t.data.hasAppearance})}render(){const t=super.render();t.classList.add("buttonWidgetAnnotation","pushButton");const e=t.lastChild;return this.enableScripting&&this.hasJSActions&&e&&(this._setDefaultPropertiesFromJS(e),e.addEventListener("updatefromsandbox",s=>{this._dispatchEventFromSandbox({},s)})),t}}class Zb extends ri{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const t=this.annotationStorage,e=this.data.id,s=t.getValue(e,{value:this.data.fieldValue}),n=document.createElement("select");ti.add(n),n.setAttribute("data-element-id",e),n.disabled=this.data.readOnly,this._setRequired(n,this.data.required),n.name=this.data.fieldName,n.tabIndex=0;let r=this.data.combo&&this.data.options.length>0;this.data.combo||(n.size=this.data.options.length,this.data.multiSelect&&(n.multiple=!0)),n.addEventListener("resetform",c=>{const u=this.data.defaultFieldValue;for(const d of n.options)d.selected=d.value===u});for(const c of this.data.options){const u=document.createElement("option");u.textContent=c.displayValue,u.value=c.exportValue,s.value.includes(c.exportValue)&&(u.setAttribute("selected",!0),r=!1),n.append(u)}let o=null;if(r){const c=document.createElement("option");c.value=" ",c.setAttribute("hidden",!0),c.setAttribute("selected",!0),n.prepend(c),o=()=>{c.remove(),n.removeEventListener("input",o),o=null},n.addEventListener("input",o)}const a=c=>{const u=c?"value":"textContent",{options:d,multiple:f}=n;return f?Array.prototype.filter.call(d,g=>g.selected).map(g=>g[u]):d.selectedIndex===-1?null:d[d.selectedIndex][u]};let l=a(!1);const h=c=>{const u=c.target.options;return Array.prototype.map.call(u,d=>({displayValue:d.textContent,exportValue:d.value}))};return this.enableScripting&&this.hasJSActions?(n.addEventListener("updatefromsandbox",c=>{const u={value(d){o?.();const f=d.detail.value,g=new Set(Array.isArray(f)?f:[f]);for(const p of n.options)p.selected=g.has(p.value);t.setValue(e,{value:a(!0)}),l=a(!1)},multipleSelection(d){n.multiple=!0},remove(d){const f=n.options,g=d.detail.remove;f[g].selected=!1,n.remove(g),f.length>0&&Array.prototype.findIndex.call(f,_=>_.selected)===-1&&(f[0].selected=!0),t.setValue(e,{value:a(!0),items:h(d)}),l=a(!1)},clear(d){for(;n.length!==0;)n.remove(0);t.setValue(e,{value:null,items:[]}),l=a(!1)},insert(d){const{index:f,displayValue:g,exportValue:p}=d.detail.insert,_=n.children[f],m=document.createElement("option");m.textContent=g,m.value=p,_?_.before(m):n.append(m),t.setValue(e,{value:a(!0),items:h(d)}),l=a(!1)},items(d){const{items:f}=d.detail;for(;n.length!==0;)n.remove(0);for(const g of f){const{displayValue:p,exportValue:_}=g,m=document.createElement("option");m.textContent=p,m.value=_,n.append(m)}n.options.length>0&&(n.options[0].selected=!0),t.setValue(e,{value:a(!0),items:h(d)}),l=a(!1)},indices(d){const f=new Set(d.detail.indices);for(const g of d.target.options)g.selected=f.has(g.index);t.setValue(e,{value:a(!0)}),l=a(!1)},editable(d){d.target.disabled=!d.detail.editable}};this._dispatchEventFromSandbox(u,c)}),n.addEventListener("input",c=>{const u=a(!0),d=a(!1);t.setValue(e,{value:u}),c.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:l,change:d,changeEx:u,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(n,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],c=>c.target.value)):n.addEventListener("input",function(c){t.setValue(e,{value:a(!0)})}),this.data.combo&&this._setTextStyle(n),this._setBackgroundColor(n),this._setDefaultPropertiesFromJS(n),this.container.append(n),this.container}}class Ca extends Dt{constructor(t){const{data:e,elements:s}=t;super(t,{isRenderable:Dt._hasPopupData(e)}),this.elements=s,this.popup=null}render(){const{container:t}=this;t.classList.add("popupAnnotation"),t.role="comment";const e=this.popup=new tv({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),s=[];for(const n of this.elements)n.popup=e,n.container.ariaHasPopup="dialog",s.push(n.data.id),n.addHighlightArea();return this.container.setAttribute("aria-controls",s.map(n=>`${el}${n}`).join(",")),this.container}}class tv{#t=this.#x.bind(this);#e=this.#T.bind(this);#s=this.#R.bind(this);#i=this.#E.bind(this);#r=null;#n=null;#a=null;#o=null;#u=null;#l=null;#d=null;#h=!1;#f=null;#p=null;#g=null;#c=null;#m=null;#_=null;#b=!1;constructor({container:t,color:e,elements:s,titleObj:n,modificationDate:r,contentsObj:o,richText:a,parent:l,rect:h,parentRect:c,open:u}){this.#n=t,this.#m=n,this.#a=o,this.#c=a,this.#l=l,this.#r=e,this.#g=h,this.#d=c,this.#u=s,this.#o=cd.toDateObject(r),this.trigger=s.flatMap(d=>d.getElementsToTriggerPopup());for(const d of this.trigger)d.addEventListener("click",this.#i),d.addEventListener("mouseenter",this.#s),d.addEventListener("mouseleave",this.#e),d.classList.add("popupTriggerArea");for(const d of s)d.container?.addEventListener("keydown",this.#t);this.#n.hidden=!0,u&&this.#E()}render(){if(this.#f)return;const t=this.#f=document.createElement("div");if(t.className="popup",this.#r){const r=t.style.outlineColor=Y.makeHexColor(...this.#r);t.style.backgroundColor=`color-mix(in srgb, ${r} 30%, white)`}const e=document.createElement("span");e.className="header";const s=document.createElement("h1");if(e.append(s),{dir:s.dir,str:s.textContent}=this.#m,t.append(e),this.#o){const r=document.createElement("time");r.classList.add("popupDate"),r.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),r.setAttribute("data-l10n-args",JSON.stringify({dateObj:this.#o.valueOf()})),r.dateTime=this.#o.toISOString(),e.append(r)}const n=this.#y;if(n)Pd.render({xfaHtml:n,intent:"richText",div:t}),t.lastChild.classList.add("richText","popupContent");else{const r=this._formatContents(this.#a);t.append(r)}this.#n.append(t)}get#y(){const t=this.#c,e=this.#a;return t?.str&&(!e?.str||e.str===t.str)&&this.#c.html||null}get#A(){return this.#y?.attributes?.style?.fontSize||0}get#w(){return this.#y?.attributes?.style?.color||null}#C(t){const e=[],s={str:t,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:e}]}},n={style:{color:this.#w,fontSize:this.#A?`calc(${this.#A}px * var(--total-scale-factor))`:""}};for(const r of t.split(`
`))e.push({name:"span",value:r,attributes:n});return s}_formatContents({str:t,dir:e}){const s=document.createElement("p");s.classList.add("popupContent"),s.dir=e;const n=t.split(/(?:\r\n?|\n)/);for(let r=0,o=n.length;r<o;++r){const a=n[r];s.append(document.createTextNode(a)),r<o-1&&s.append(document.createElement("br"))}return s}#x(t){t.altKey||t.shiftKey||t.ctrlKey||t.metaKey||(t.key==="Enter"||t.key==="Escape"&&this.#h)&&this.#E()}updateEdited({rect:t,popupContent:e}){this.#_||={contentsObj:this.#a,richText:this.#c},t&&(this.#p=null),e&&(this.#c=this.#C(e),this.#a=null),this.#f?.remove(),this.#f=null}resetEdited(){this.#_&&({contentsObj:this.#a,richText:this.#c}=this.#_,this.#_=null,this.#f?.remove(),this.#f=null,this.#p=null)}#P(){if(this.#p!==null)return;const{page:{view:t},viewport:{rawDims:{pageWidth:e,pageHeight:s,pageX:n,pageY:r}}}=this.#l;let o=!!this.#d,a=o?this.#d:this.#g;for(const g of this.#u)if(!a||Y.intersect(g.data.rect,a)!==null){a=g.data.rect,o=!0;break}const l=Y.normalizeRect([a[0],t[3]-a[1]+t[1],a[2],t[3]-a[3]+t[1]]),c=o?a[2]-a[0]+5:0,u=l[0]+c,d=l[1];this.#p=[100*(u-n)/e,100*(d-r)/s];const{style:f}=this.#n;f.left=`${this.#p[0]}%`,f.top=`${this.#p[1]}%`}#E(){this.#h=!this.#h,this.#h?(this.#R(),this.#n.addEventListener("click",this.#i),this.#n.addEventListener("keydown",this.#t)):(this.#T(),this.#n.removeEventListener("click",this.#i),this.#n.removeEventListener("keydown",this.#t))}#R(){this.#f||this.render(),this.isVisible?this.#h&&this.#n.classList.add("focused"):(this.#P(),this.#n.hidden=!1,this.#n.style.zIndex=parseInt(this.#n.style.zIndex)+1e3)}#T(){this.#n.classList.remove("focused"),!(this.#h||!this.isVisible)&&(this.#n.hidden=!0,this.#n.style.zIndex=parseInt(this.#n.style.zIndex)-1e3)}forceHide(){this.#b=this.isVisible,this.#b&&(this.#n.hidden=!0)}maybeShow(){this.#b&&(this.#f||this.#R(),this.#b=!1,this.#n.hidden=!1)}get isVisible(){return this.#n.hidden===!1}}class Md extends Dt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.textContent=t.data.textContent,this.textPosition=t.data.textPosition,this.annotationEditorType=rt.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const t=document.createElement("div");t.classList.add("annotationTextContent"),t.setAttribute("role","comment");for(const e of this.textContent){const s=document.createElement("span");s.textContent=e,t.append(s)}this.container.append(t)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}class ev extends Dt{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("lineAnnotation");const{data:t,width:e,height:s}=this,n=this.svgFactory.create(e,s,!0),r=this.#t=this.svgFactory.createElement("svg:line");return r.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),r.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),r.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),r.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),r.setAttribute("stroke-width",t.borderStyle.width||1),r.setAttribute("stroke","transparent"),r.setAttribute("fill","transparent"),n.append(r),this.container.append(n),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class sv extends Dt{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("squareAnnotation");const{data:t,width:e,height:s}=this,n=this.svgFactory.create(e,s,!0),r=t.borderStyle.width,o=this.#t=this.svgFactory.createElement("svg:rect");return o.setAttribute("x",r/2),o.setAttribute("y",r/2),o.setAttribute("width",e-r),o.setAttribute("height",s-r),o.setAttribute("stroke-width",r||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),n.append(o),this.container.append(n),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class iv extends Dt{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("circleAnnotation");const{data:t,width:e,height:s}=this,n=this.svgFactory.create(e,s,!0),r=t.borderStyle.width,o=this.#t=this.svgFactory.createElement("svg:ellipse");return o.setAttribute("cx",e/2),o.setAttribute("cy",s/2),o.setAttribute("rx",e/2-r/2),o.setAttribute("ry",s/2-r/2),o.setAttribute("stroke-width",r||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),n.append(o),this.container.append(n),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class kd extends Dt{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,vertices:e,borderStyle:s,popupRef:n},width:r,height:o}=this;if(!e)return this.container;const a=this.svgFactory.create(r,o,!0);let l=[];for(let c=0,u=e.length;c<u;c+=2){const d=e[c]-t[0],f=t[3]-e[c+1];l.push(`${d},${f}`)}l=l.join(" ");const h=this.#t=this.svgFactory.createElement(this.svgElementName);return h.setAttribute("points",l),h.setAttribute("stroke-width",s.width||1),h.setAttribute("stroke","transparent"),h.setAttribute("fill","transparent"),a.append(h),this.container.append(a),!n&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class nv extends kd{constructor(t){super(t),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class rv extends Dt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class dl extends Dt{#t=null;#e=[];constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?rt.HIGHLIGHT:rt.INK}#s(t,e){switch(t){case 90:return{transform:`rotate(90) translate(${-e[0]},${e[1]}) scale(1,-1)`,width:e[3]-e[1],height:e[2]-e[0]};case 180:return{transform:`rotate(180) translate(${-e[2]},${e[1]}) scale(1,-1)`,width:e[2]-e[0],height:e[3]-e[1]};case 270:return{transform:`rotate(270) translate(${-e[2]},${e[3]}) scale(1,-1)`,width:e[3]-e[1],height:e[2]-e[0]};default:return{transform:`translate(${-e[0]},${e[3]}) scale(1,-1)`,width:e[2]-e[0],height:e[3]-e[1]}}}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,rotation:e,inkLists:s,borderStyle:n,popupRef:r}}=this,{transform:o,width:a,height:l}=this.#s(e,t),h=this.svgFactory.create(a,l,!0),c=this.#t=this.svgFactory.createElement("svg:g");h.append(c),c.setAttribute("stroke-width",n.width||1),c.setAttribute("stroke-linecap","round"),c.setAttribute("stroke-linejoin","round"),c.setAttribute("stroke-miterlimit",10),c.setAttribute("stroke","transparent"),c.setAttribute("fill","transparent"),c.setAttribute("transform",o);for(let u=0,d=s.length;u<d;u++){const f=this.svgFactory.createElement(this.svgElementName);this.#e.push(f),f.setAttribute("points",s[u].join(",")),c.append(f)}return!r&&this.hasPopupData&&this._createPopup(),this.container.append(h),this._editOnDoubleClick(),this.container}updateEdited(t){super.updateEdited(t);const{thickness:e,points:s,rect:n}=t,r=this.#t;if(e>=0&&r.setAttribute("stroke-width",e||1),s)for(let o=0,a=this.#e.length;o<a;o++)this.#e[o].setAttribute("points",s[o].join(","));if(n){const{transform:o,width:a,height:l}=this.#s(this.data.rotation,n);r.parentElement.setAttribute("viewBox",`0 0 ${a} ${l}`),r.setAttribute("transform",o)}}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class Od extends Dt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=rt.HIGHLIGHT}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),t){const s=document.createElement("mark");s.classList.add("overlaidText"),s.textContent=t,this.container.append(s)}return this.container}}class ov extends Dt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),t){const s=document.createElement("u");s.classList.add("overlaidText"),s.textContent=t,this.container.append(s)}return this.container}}class av extends Dt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),t){const s=document.createElement("u");s.classList.add("overlaidText"),s.textContent=t,this.container.append(s)}return this.container}}class lv extends Dt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),t){const s=document.createElement("s");s.classList.add("overlaidText"),s.textContent=t,this.container.append(s)}return this.container}}class Dd extends Dt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=rt.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}class cv extends Dt{#t=null;constructor(t){super(t,{isRenderable:!0});const{file:e}=this.data;this.filename=e.filename,this.content=e.content,this.linkService.eventBus?.dispatch("fileattachmentannotation",{source:this,...e})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:t,data:e}=this;let s;e.hasAppearance||e.fillAlpha===0?s=document.createElement("div"):(s=document.createElement("img"),s.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(e.name)?"paperclip":"pushpin"}.svg`,e.fillAlpha&&e.fillAlpha<1&&(s.style=`filter: opacity(${Math.round(e.fillAlpha*100)}%);`)),s.addEventListener("dblclick",this.#e.bind(this)),this.#t=s;const{isMac:n}=Yt.platform;return t.addEventListener("keydown",r=>{r.key==="Enter"&&(n?r.metaKey:r.ctrlKey)&&this.#e()}),!e.popupRef&&this.hasPopupData?this._createPopup():s.classList.add("popupTriggerArea"),t.append(s),t}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}#e(){this.downloadManager?.openOrDownloadData(this.content,this.filename)}}class fl{#t=null;#e=null;#s=new Map;#i=null;constructor({div:t,accessibilityManager:e,annotationCanvasMap:s,annotationEditorUIManager:n,page:r,viewport:o,structTreeLayer:a}){this.div=t,this.#t=e,this.#e=s,this.#i=a||null,this.page=r,this.viewport=o,this.zIndex=0,this._annotationEditorUIManager=n}hasEditableAnnotations(){return this.#s.size>0}async#r(t,e,s){const n=t.firstChild||t,r=n.id=`${el}${e}`,o=await this.#i?.getAriaAttributes(r);if(o)for(const[a,l]of o)n.setAttribute(a,l);s?s.at(-1).container.after(t):(this.div.append(t),this.#t?.moveElementInDOM(this.div,t,n,!1))}async render(t){const{annotations:e}=t,s=this.div;Zs(s,this.viewport);const n=new Map,r={data:null,layer:s,linkService:t.linkService,downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderForms:t.renderForms!==!1,svgFactory:new Or,annotationStorage:t.annotationStorage||new al,enableScripting:t.enableScripting===!0,hasJSActions:t.hasJSActions,fieldObjects:t.fieldObjects,parent:this,elements:null};for(const o of e){if(o.noHTML)continue;const a=o.annotationType===$t.POPUP;if(a){const c=n.get(o.id);if(!c)continue;r.elements=c}else if(o.rect[2]===o.rect[0]||o.rect[3]===o.rect[1])continue;r.data=o;const l=Jc.create(r);if(!l.isRenderable)continue;if(!a&&o.popupRef){const c=n.get(o.popupRef);c?c.push(l):n.set(o.popupRef,[l])}const h=l.render();o.hidden&&(h.style.visibility="hidden"),await this.#r(h,o.id,r.elements),l._isEditable&&(this.#s.set(l.data.id,l),this._annotationEditorUIManager?.renderAnnotationElement(l))}this.#n()}async addLinkAnnotations(t,e){const s={data:null,layer:this.div,linkService:e,svgFactory:new Or,parent:this};for(const n of t){n.borderStyle||=fl._defaultBorderStyle,s.data=n;const r=Jc.create(s);if(!r.isRenderable)continue;const o=r.render();await this.#r(o,n.id,null)}}update({viewport:t}){const e=this.div;this.viewport=t,Zs(e,{rotation:t.rotation}),this.#n(),e.hidden=!1}#n(){if(!this.#e)return;const t=this.div;for(const[e,s]of this.#e){const n=t.querySelector(`[data-annotation-id="${e}"]`);if(!n)continue;s.className="annotationContent";const{firstChild:r}=n;r?r.nodeName==="CANVAS"?r.replaceWith(s):r.classList.contains("annotationContent")?r.after(s):r.before(s):n.append(s);const o=this.#s.get(e);o&&(o._hasNoCanvas?(this._annotationEditorUIManager?.setMissingCanvas(e,n.id,s),o._hasNoCanvas=!1):o.canvas=s)}this.#e.clear()}getEditableAnnotations(){return Array.from(this.#s.values())}getEditableAnnotation(t){return this.#s.get(t)}static get _defaultBorderStyle(){return ut(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:pi.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}}const rr=/\r\n?|\n/g;class Vt extends J{#t;#e="";#s=`${this.id}-editor`;#i=null;#r;static _freeTextDefaultContent="";static _internalPadding=0;static _defaultColor=null;static _defaultFontSize=10;static get _keyboardManager(){const t=Vt.prototype,e=r=>r.isEmpty(),s=Ls.TRANSLATE_SMALL,n=Ls.TRANSLATE_BIG;return ut(this,"_keyboardManager",new Vn([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-s,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-n,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[s,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[n,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-s],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-n],checker:e}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,s],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,n],checker:e}]]))}static _type="freetext";static _editorType=rt.FREETEXT;constructor(t){super({...t,name:"freeTextEditor"}),this.#t=t.color||Vt._defaultColor||J._defaultLineColor,this.#r=t.fontSize||Vt._defaultFontSize,this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert")}static initialize(t,e){J.initialize(t,e);const s=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(s.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,e){switch(t){case ft.FREETEXT_SIZE:Vt._defaultFontSize=e;break;case ft.FREETEXT_COLOR:Vt._defaultColor=e;break}}updateParams(t,e){switch(t){case ft.FREETEXT_SIZE:this.#n(e);break;case ft.FREETEXT_COLOR:this.#a(e);break}}static get defaultPropertiesToUpdate(){return[[ft.FREETEXT_SIZE,Vt._defaultFontSize],[ft.FREETEXT_COLOR,Vt._defaultColor||J._defaultLineColor]]}get propertiesToUpdate(){return[[ft.FREETEXT_SIZE,this.#r],[ft.FREETEXT_COLOR,this.#t]]}#n(t){const e=n=>{this.editorDiv.style.fontSize=`calc(${n}px * var(--total-scale-factor))`,this.translate(0,-(n-this.#r)*this.parentScale),this.#r=n,this.#u()},s=this.#r;this.addCommands({cmd:e.bind(this,t),undo:e.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ft.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}#a(t){const e=n=>{this.#t=this.editorDiv.style.color=n},s=this.#t;this.addCommands({cmd:e.bind(this,t),undo:e.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ft.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}_translateEmpty(t,e){this._uiManager.translateSelectedEditors(t,e,!0)}getInitialTranslation(){const t=this.parentScale;return[-Vt._internalPadding*t,-(Vt._internalPadding+this.#r)*t]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.#i=new AbortController;const t=this._uiManager.combinedSignal(this.#i);return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:t}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:t}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:t}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:t}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:t}),!0}disableEditMode(){return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",this.#s),this._isDraggable=!0,this.#i?.abort(),this.#i=null,this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(t){this.width||(this.enableEditMode(),t&&this.editorDiv.focus(),this._initialOptions?.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}#o(){const t=[];this.editorDiv.normalize();let e=null;for(const s of this.editorDiv.childNodes)e?.nodeType===Node.TEXT_NODE&&s.nodeName==="BR"||(t.push(Vt.#l(s)),e=s);return t.join(`
`)}#u(){const[t,e]=this.parentDimensions;let s;if(this.isAttachedToDOM)s=this.div.getBoundingClientRect();else{const{currentLayer:n,div:r}=this,o=r.style.display,a=r.classList.contains("hidden");r.classList.remove("hidden"),r.style.display="hidden",n.div.append(this.div),s=r.getBoundingClientRect(),r.remove(),r.style.display=o,r.classList.toggle("hidden",a)}this.rotation%180===this.parentRotation%180?(this.width=s.width/t,this.height=s.height/e):(this.width=s.height/t,this.height=s.width/e),this.fixAndSetPosition()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const t=this.#e,e=this.#e=this.#o().trimEnd();if(t===e)return;const s=n=>{if(this.#e=n,!n){this.remove();return}this.#d(),this._uiManager.rebuild(this),this.#u()};this.addCommands({cmd:()=>{s(e)},undo:()=>{s(t)},mustExec:!1}),this.#u()}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(t){t.target===this.div&&t.key==="Enter"&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(t){Vt._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let t,e;(this._isCopy||this.annotationElementId)&&(t=this.x,e=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",this.#s),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:s}=this.editorDiv;if(s.fontSize=`calc(${this.#r}px * var(--total-scale-factor))`,s.color=this.#t,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[n,r]=this.parentDimensions;if(this.annotationElementId){const{position:o}=this._initialData;let[a,l]=this.getInitialTranslation();[a,l]=this.pageTranslationToScreen(a,l);const[h,c]=this.pageDimensions,[u,d]=this.pageTranslation;let f,g;switch(this.rotation){case 0:f=t+(o[0]-u)/h,g=e+this.height-(o[1]-d)/c;break;case 90:f=t+(o[0]-u)/h,g=e-(o[1]-d)/c,[a,l]=[l,-a];break;case 180:f=t-this.width+(o[0]-u)/h,g=e-(o[1]-d)/c,[a,l]=[-a,-l];break;case 270:f=t+(o[0]-u-this.height*c)/h,g=e+(o[1]-d-this.width*h)/c,[a,l]=[-l,a];break}this.setAt(f*n,g*r,a,l)}else this._moveAfterPaste(t,e);this.#d(),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}static#l(t){return(t.nodeType===Node.TEXT_NODE?t.nodeValue:t.innerText).replaceAll(rr,"")}editorDivPaste(t){const e=t.clipboardData||window.clipboardData,{types:s}=e;if(s.length===1&&s[0]==="text/plain")return;t.preventDefault();const n=Vt.#f(e.getData("text")||"").replaceAll(rr,`
`);if(!n)return;const r=window.getSelection();if(!r.rangeCount)return;this.editorDiv.normalize(),r.deleteFromDocument();const o=r.getRangeAt(0);if(!n.includes(`
`)){o.insertNode(document.createTextNode(n)),this.editorDiv.normalize(),r.collapseToStart();return}const{startContainer:a,startOffset:l}=o,h=[],c=[];if(a.nodeType===Node.TEXT_NODE){const f=a.parentElement;if(c.push(a.nodeValue.slice(l).replaceAll(rr,"")),f!==this.editorDiv){let g=h;for(const p of this.editorDiv.childNodes){if(p===f){g=c;continue}g.push(Vt.#l(p))}}h.push(a.nodeValue.slice(0,l).replaceAll(rr,""))}else if(a===this.editorDiv){let f=h,g=0;for(const p of this.editorDiv.childNodes)g++===l&&(f=c),f.push(Vt.#l(p))}this.#e=`${h.join(`
`)}${n}${c.join(`
`)}`,this.#d();const u=new Range;let d=Math.sumPrecise(h.map(f=>f.length));for(const{firstChild:f}of this.editorDiv.childNodes)if(f.nodeType===Node.TEXT_NODE){const g=f.nodeValue.length;if(d<=g){u.setStart(f,d),u.setEnd(f,d);break}d-=g}r.removeAllRanges(),r.addRange(u)}#d(){if(this.editorDiv.replaceChildren(),!!this.#e)for(const t of this.#e.split(`
`)){const e=document.createElement("div");e.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(e)}}#h(){return this.#e.replaceAll(""," ")}static#f(t){return t.replaceAll(" ","")}get contentDiv(){return this.editorDiv}static async deserialize(t,e,s){let n=null;if(t instanceof Md){const{data:{defaultAppearanceData:{fontSize:o,fontColor:a},rect:l,rotation:h,id:c,popupRef:u},textContent:d,textPosition:f,parent:{page:{pageNumber:g}}}=t;if(!d||d.length===0)return null;n=t={annotationType:rt.FREETEXT,color:Array.from(a),fontSize:o,value:d.join(`
`),position:f,pageIndex:g-1,rect:l.slice(0),rotation:h,annotationElementId:c,id:c,deleted:!1,popupRef:u}}const r=await super.deserialize(t,e,s);return r.#r=t.fontSize,r.#t=Y.makeHexColor(...t.color),r.#e=Vt.#f(t.value),r._initialData=n,r}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const e=Vt._internalPadding*this.parentScale,s=this.getRect(e,e),n=J._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.#t),r={annotationType:rt.FREETEXT,color:n,fontSize:this.#r,value:this.#h(),pageIndex:this.pageIndex,rect:s,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return t?(r.isCopy=!0,r):this.annotationElementId&&!this.#p(r)?null:(r.id=this.annotationElementId,r)}#p(t){const{value:e,fontSize:s,color:n,pageIndex:r}=this._initialData;return this._hasBeenMoved||t.value!==e||t.fontSize!==s||t.color.some((o,a)=>o!==n[a])||t.pageIndex!==r}renderAnnotationElement(t){const e=super.renderAnnotationElement(t);if(this.deleted)return e;const{style:s}=e;s.fontSize=`calc(${this.#r}px * var(--total-scale-factor))`,s.color=this.#t,e.replaceChildren();for(const r of this.#e.split(`
`)){const o=document.createElement("div");o.append(r?document.createTextNode(r):document.createElement("br")),e.append(o)}const n=Vt._internalPadding*this.parentScale;return t.updateEdited({rect:this.getRect(n,n),popupContent:this.#e}),e}resetAnnotationElement(t){super.resetAnnotationElement(t),t.resetEdited()}}class z{static PRECISION=1e-4;toSVGPath(){At("Abstract method `toSVGPath` must be implemented.")}get box(){At("Abstract getter `box` must be implemented.")}serialize(t,e){At("Abstract method `serialize` must be implemented.")}static _rescale(t,e,s,n,r,o){o||=new Float32Array(t.length);for(let a=0,l=t.length;a<l;a+=2)o[a]=e+t[a]*n,o[a+1]=s+t[a+1]*r;return o}static _rescaleAndSwap(t,e,s,n,r,o){o||=new Float32Array(t.length);for(let a=0,l=t.length;a<l;a+=2)o[a]=e+t[a+1]*n,o[a+1]=s+t[a]*r;return o}static _translate(t,e,s,n){n||=new Float32Array(t.length);for(let r=0,o=t.length;r<o;r+=2)n[r]=e+t[r],n[r+1]=s+t[r+1];return n}static svgRound(t){return Math.round(t*1e4)}static _normalizePoint(t,e,s,n,r){switch(r){case 90:return[1-e/s,t/n];case 180:return[1-t/s,1-e/n];case 270:return[e/s,1-t/n];default:return[t/s,e/n]}}static _normalizePagePoint(t,e,s){switch(s){case 90:return[1-e,t];case 180:return[1-t,1-e];case 270:return[e,1-t];default:return[t,e]}}static createBezierPoints(t,e,s,n,r,o){return[(t+5*s)/6,(e+5*n)/6,(5*s+r)/6,(5*n+o)/6,(s+r)/2,(n+o)/2]}}class js{#t;#e=[];#s;#i;#r=[];#n=new Float32Array(18);#a;#o;#u;#l;#d;#h;#f=[];static#p=8;static#g=2;static#c=js.#p+js.#g;constructor({x:t,y:e},s,n,r,o,a=0){this.#t=s,this.#h=r*n,this.#i=o,this.#n.set([NaN,NaN,NaN,NaN,t,e],6),this.#s=a,this.#l=js.#p*n,this.#u=js.#c*n,this.#d=n,this.#f.push(t,e)}isEmpty(){return isNaN(this.#n[8])}#m(){const t=this.#n.subarray(4,6),e=this.#n.subarray(16,18),[s,n,r,o]=this.#t;return[(this.#a+(t[0]-e[0])/2-s)/r,(this.#o+(t[1]-e[1])/2-n)/o,(this.#a+(e[0]-t[0])/2-s)/r,(this.#o+(e[1]-t[1])/2-n)/o]}add({x:t,y:e}){this.#a=t,this.#o=e;const[s,n,r,o]=this.#t;let[a,l,h,c]=this.#n.subarray(8,12);const u=t-h,d=e-c,f=Math.hypot(u,d);if(f<this.#u)return!1;const g=f-this.#l,p=g/f,_=p*u,m=p*d;let y=a,v=l;a=h,l=c,h+=_,c+=m,this.#f?.push(t,e);const b=-m/g,E=_/g,S=b*this.#h,T=E*this.#h;return this.#n.set(this.#n.subarray(2,8),0),this.#n.set([h+S,c+T],4),this.#n.set(this.#n.subarray(14,18),12),this.#n.set([h-S,c-T],16),isNaN(this.#n[6])?(this.#r.length===0&&(this.#n.set([a+S,l+T],2),this.#r.push(NaN,NaN,NaN,NaN,(a+S-s)/r,(l+T-n)/o),this.#n.set([a-S,l-T],14),this.#e.push(NaN,NaN,NaN,NaN,(a-S-s)/r,(l-T-n)/o)),this.#n.set([y,v,a,l,h,c],6),!this.isEmpty()):(this.#n.set([y,v,a,l,h,c],6),Math.abs(Math.atan2(v-l,y-a)-Math.atan2(m,_))<Math.PI/2?([a,l,h,c]=this.#n.subarray(2,6),this.#r.push(NaN,NaN,NaN,NaN,((a+h)/2-s)/r,((l+c)/2-n)/o),[a,l,y,v]=this.#n.subarray(14,18),this.#e.push(NaN,NaN,NaN,NaN,((y+a)/2-s)/r,((v+l)/2-n)/o),!0):([y,v,a,l,h,c]=this.#n.subarray(0,6),this.#r.push(((y+5*a)/6-s)/r,((v+5*l)/6-n)/o,((5*a+h)/6-s)/r,((5*l+c)/6-n)/o,((a+h)/2-s)/r,((l+c)/2-n)/o),[h,c,a,l,y,v]=this.#n.subarray(12,18),this.#e.push(((y+5*a)/6-s)/r,((v+5*l)/6-n)/o,((5*a+h)/6-s)/r,((5*l+c)/6-n)/o,((a+h)/2-s)/r,((l+c)/2-n)/o),!0))}toSVGPath(){if(this.isEmpty())return"";const t=this.#r,e=this.#e;if(isNaN(this.#n[6])&&!this.isEmpty())return this.#_();const s=[];s.push(`M${t[4]} ${t[5]}`);for(let n=6;n<t.length;n+=6)isNaN(t[n])?s.push(`L${t[n+4]} ${t[n+5]}`):s.push(`C${t[n]} ${t[n+1]} ${t[n+2]} ${t[n+3]} ${t[n+4]} ${t[n+5]}`);this.#y(s);for(let n=e.length-6;n>=6;n-=6)isNaN(e[n])?s.push(`L${e[n+4]} ${e[n+5]}`):s.push(`C${e[n]} ${e[n+1]} ${e[n+2]} ${e[n+3]} ${e[n+4]} ${e[n+5]}`);return this.#b(s),s.join(" ")}#_(){const[t,e,s,n]=this.#t,[r,o,a,l]=this.#m();return`M${(this.#n[2]-t)/s} ${(this.#n[3]-e)/n} L${(this.#n[4]-t)/s} ${(this.#n[5]-e)/n} L${r} ${o} L${a} ${l} L${(this.#n[16]-t)/s} ${(this.#n[17]-e)/n} L${(this.#n[14]-t)/s} ${(this.#n[15]-e)/n} Z`}#b(t){const e=this.#e;t.push(`L${e[4]} ${e[5]} Z`)}#y(t){const[e,s,n,r]=this.#t,o=this.#n.subarray(4,6),a=this.#n.subarray(16,18),[l,h,c,u]=this.#m();t.push(`L${(o[0]-e)/n} ${(o[1]-s)/r} L${l} ${h} L${c} ${u} L${(a[0]-e)/n} ${(a[1]-s)/r}`)}newFreeDrawOutline(t,e,s,n,r,o){return new Nd(t,e,s,n,r,o)}getOutlines(){const t=this.#r,e=this.#e,s=this.#n,[n,r,o,a]=this.#t,l=new Float32Array((this.#f?.length??0)+2);for(let u=0,d=l.length-2;u<d;u+=2)l[u]=(this.#f[u]-n)/o,l[u+1]=(this.#f[u+1]-r)/a;if(l[l.length-2]=(this.#a-n)/o,l[l.length-1]=(this.#o-r)/a,isNaN(s[6])&&!this.isEmpty())return this.#A(l);const h=new Float32Array(this.#r.length+24+this.#e.length);let c=t.length;for(let u=0;u<c;u+=2){if(isNaN(t[u])){h[u]=h[u+1]=NaN;continue}h[u]=t[u],h[u+1]=t[u+1]}c=this.#C(h,c);for(let u=e.length-6;u>=6;u-=6)for(let d=0;d<6;d+=2){if(isNaN(e[u+d])){h[c]=h[c+1]=NaN,c+=2;continue}h[c]=e[u+d],h[c+1]=e[u+d+1],c+=2}return this.#w(h,c),this.newFreeDrawOutline(h,l,this.#t,this.#d,this.#s,this.#i)}#A(t){const e=this.#n,[s,n,r,o]=this.#t,[a,l,h,c]=this.#m(),u=new Float32Array(36);return u.set([NaN,NaN,NaN,NaN,(e[2]-s)/r,(e[3]-n)/o,NaN,NaN,NaN,NaN,(e[4]-s)/r,(e[5]-n)/o,NaN,NaN,NaN,NaN,a,l,NaN,NaN,NaN,NaN,h,c,NaN,NaN,NaN,NaN,(e[16]-s)/r,(e[17]-n)/o,NaN,NaN,NaN,NaN,(e[14]-s)/r,(e[15]-n)/o],0),this.newFreeDrawOutline(u,t,this.#t,this.#d,this.#s,this.#i)}#w(t,e){const s=this.#e;return t.set([NaN,NaN,NaN,NaN,s[4],s[5]],e),e+=6}#C(t,e){const s=this.#n.subarray(4,6),n=this.#n.subarray(16,18),[r,o,a,l]=this.#t,[h,c,u,d]=this.#m();return t.set([NaN,NaN,NaN,NaN,(s[0]-r)/a,(s[1]-o)/l,NaN,NaN,NaN,NaN,h,c,NaN,NaN,NaN,NaN,u,d,NaN,NaN,NaN,NaN,(n[0]-r)/a,(n[1]-o)/l],e),e+=24}}class Nd extends z{#t;#e=new Float32Array(4);#s;#i;#r;#n;#a;constructor(t,e,s,n,r,o){super(),this.#a=t,this.#r=e,this.#t=s,this.#n=n,this.#s=r,this.#i=o,this.lastPoint=[NaN,NaN],this.#o(o);const[a,l,h,c]=this.#e;for(let u=0,d=t.length;u<d;u+=2)t[u]=(t[u]-a)/h,t[u+1]=(t[u+1]-l)/c;for(let u=0,d=e.length;u<d;u+=2)e[u]=(e[u]-a)/h,e[u+1]=(e[u+1]-l)/c}toSVGPath(){const t=[`M${this.#a[4]} ${this.#a[5]}`];for(let e=6,s=this.#a.length;e<s;e+=6){if(isNaN(this.#a[e])){t.push(`L${this.#a[e+4]} ${this.#a[e+5]}`);continue}t.push(`C${this.#a[e]} ${this.#a[e+1]} ${this.#a[e+2]} ${this.#a[e+3]} ${this.#a[e+4]} ${this.#a[e+5]}`)}return t.push("Z"),t.join(" ")}serialize([t,e,s,n],r){const o=s-t,a=n-e;let l,h;switch(r){case 0:l=z._rescale(this.#a,t,n,o,-a),h=z._rescale(this.#r,t,n,o,-a);break;case 90:l=z._rescaleAndSwap(this.#a,t,e,o,a),h=z._rescaleAndSwap(this.#r,t,e,o,a);break;case 180:l=z._rescale(this.#a,s,e,-o,a),h=z._rescale(this.#r,s,e,-o,a);break;case 270:l=z._rescaleAndSwap(this.#a,s,n,-o,-a),h=z._rescaleAndSwap(this.#r,s,n,-o,-a);break}return{outline:Array.from(l),points:[Array.from(h)]}}#o(t){const e=this.#a;let s=e[4],n=e[5];const r=[s,n,s,n];let o=s,a=n;const l=t?Math.max:Math.min;for(let c=6,u=e.length;c<u;c+=6){const d=e[c+4],f=e[c+5];if(isNaN(e[c]))Y.pointBoundingBox(d,f,r),a<f?(o=d,a=f):a===f&&(o=l(o,d));else{const g=[1/0,1/0,-1/0,-1/0];Y.bezierBoundingBox(s,n,...e.slice(c,c+6),g),Y.rectBoundingBox(...g,r),a<g[3]?(o=g[2],a=g[3]):a===g[3]&&(o=l(o,g[2]))}s=d,n=f}const h=this.#e;h[0]=r[0]-this.#s,h[1]=r[1]-this.#s,h[2]=r[2]-r[0]+2*this.#s,h[3]=r[3]-r[1]+2*this.#s,this.lastPoint=[o,a]}get box(){return this.#e}newOutliner(t,e,s,n,r,o=0){return new js(t,e,s,n,r,o)}getNewOutline(t,e){const[s,n,r,o]=this.#e,[a,l,h,c]=this.#t,u=r*h,d=o*c,f=s*h+a,g=n*c+l,p=this.newOutliner({x:this.#r[0]*u+f,y:this.#r[1]*d+g},this.#t,this.#n,t,this.#i,e??this.#s);for(let _=2;_<this.#r.length;_+=2)p.add({x:this.#r[_]*u+f,y:this.#r[_+1]*d+g});return p.getOutlines()}}class Ta{#t;#e;#s=[];#i=[];constructor(t,e=0,s=0,n=!0){const r=[1/0,1/0,-1/0,-1/0],o=10**-4;for(const{x:f,y:g,width:p,height:_}of t){const m=Math.floor((f-e)/o)*o,y=Math.ceil((f+p+e)/o)*o,v=Math.floor((g-e)/o)*o,b=Math.ceil((g+_+e)/o)*o,E=[m,v,b,!0],S=[y,v,b,!1];this.#s.push(E,S),Y.rectBoundingBox(m,v,y,b,r)}const a=r[2]-r[0]+2*s,l=r[3]-r[1]+2*s,h=r[0]-s,c=r[1]-s,u=this.#s.at(n?-1:-2),d=[u[0],u[2]];for(const f of this.#s){const[g,p,_]=f;f[0]=(g-h)/a,f[1]=(p-c)/l,f[2]=(_-c)/l}this.#t=new Float32Array([h,c,a,l]),this.#e=d}getOutlines(){this.#s.sort((e,s)=>e[0]-s[0]||e[1]-s[1]||e[2]-s[2]);const t=[];for(const e of this.#s)e[3]?(t.push(...this.#u(e)),this.#a(e)):(this.#o(e),t.push(...this.#u(e)));return this.#r(t)}#r(t){const e=[],s=new Set;for(const o of t){const[a,l,h]=o;e.push([a,l,o],[a,h,o])}e.sort((o,a)=>o[1]-a[1]||o[0]-a[0]);for(let o=0,a=e.length;o<a;o+=2){const l=e[o][2],h=e[o+1][2];l.push(h),h.push(l),s.add(l),s.add(h)}const n=[];let r;for(;s.size>0;){const o=s.values().next().value;let[a,l,h,c,u]=o;s.delete(o);let d=a,f=l;for(r=[a,h],n.push(r);;){let g;if(s.has(c))g=c;else if(s.has(u))g=u;else break;s.delete(g),[a,l,h,c,u]=g,d!==a&&(r.push(d,f,a,f===l?l:h),d=a),f=f===l?h:l}r.push(d,f)}return new hv(n,this.#t,this.#e)}#n(t){const e=this.#i;let s=0,n=e.length-1;for(;s<=n;){const r=s+n>>1,o=e[r][0];if(o===t)return r;o<t?s=r+1:n=r-1}return n+1}#a([,t,e]){const s=this.#n(t);this.#i.splice(s,0,[t,e])}#o([,t,e]){const s=this.#n(t);for(let n=s;n<this.#i.length;n++){const[r,o]=this.#i[n];if(r!==t)break;if(r===t&&o===e){this.#i.splice(n,1);return}}for(let n=s-1;n>=0;n--){const[r,o]=this.#i[n];if(r!==t)break;if(r===t&&o===e){this.#i.splice(n,1);return}}}#u(t){const[e,s,n]=t,r=[[e,s,n]],o=this.#n(n);for(let a=0;a<o;a++){const[l,h]=this.#i[a];for(let c=0,u=r.length;c<u;c++){const[,d,f]=r[c];if(!(h<=d||f<=l)){if(d>=l){if(f>h)r[c][1]=h;else{if(u===1)return[];r.splice(c,1),c--,u--}continue}r[c][2]=l,f>h&&r.push([e,h,f])}}}return r}}class hv extends z{#t;#e;constructor(t,e,s){super(),this.#e=t,this.#t=e,this.lastPoint=s}toSVGPath(){const t=[];for(const e of this.#e){let[s,n]=e;t.push(`M${s} ${n}`);for(let r=2;r<e.length;r+=2){const o=e[r],a=e[r+1];o===s?(t.push(`V${a}`),n=a):a===n&&(t.push(`H${o}`),s=o)}t.push("Z")}return t.join(" ")}serialize([t,e,s,n],r){const o=[],a=s-t,l=n-e;for(const h of this.#e){const c=new Array(h.length);for(let u=0;u<h.length;u+=2)c[u]=t+h[u]*a,c[u+1]=n-h[u+1]*l;o.push(c)}return o}get box(){return this.#t}get classNamesForOutlining(){return["highlightOutline"]}}class xa extends js{newFreeDrawOutline(t,e,s,n,r,o){return new uv(t,e,s,n,r,o)}}class uv extends Nd{newOutliner(t,e,s,n,r,o=0){return new xa(t,e,s,n,r,o)}}class Re{#t=null;#e=null;#s;#i=null;#r=!1;#n=!1;#a=null;#o;#u=null;#l=null;#d;static#h=null;static get _keyboardManager(){return ut(this,"_keyboardManager",new Vn([[["Escape","mac+Escape"],Re.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],Re.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],Re.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],Re.prototype._moveToPrevious],[["Home","mac+Home"],Re.prototype._moveToBeginning],[["End","mac+End"],Re.prototype._moveToEnd]]))}constructor({editor:t=null,uiManager:e=null}){t?(this.#n=!1,this.#d=ft.HIGHLIGHT_COLOR,this.#a=t):(this.#n=!0,this.#d=ft.HIGHLIGHT_DEFAULT_COLOR),this.#l=t?._uiManager||e,this.#o=this.#l._eventBus,this.#s=t?.color?.toUpperCase()||this.#l?.highlightColors.values().next().value||"#FFFF98",Re.#h||=Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"})}renderButton(){const t=this.#t=document.createElement("button");t.className="colorPicker",t.tabIndex="0",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),t.ariaHasPopup="true",this.#a&&(t.ariaControls=`${this.#a.id}_colorpicker_dropdown`);const e=this.#l._signal;t.addEventListener("click",this.#c.bind(this),{signal:e}),t.addEventListener("keydown",this.#g.bind(this),{signal:e});const s=this.#e=document.createElement("span");return s.className="swatch",s.ariaHidden="true",s.style.backgroundColor=this.#s,t.append(s),t}renderMainDropdown(){const t=this.#i=this.#f();return t.ariaOrientation="horizontal",t.ariaLabelledBy="highlightColorPickerLabel",t}#f(){const t=document.createElement("div"),e=this.#l._signal;t.addEventListener("contextmenu",Be,{signal:e}),t.className="dropdown",t.role="listbox",t.ariaMultiSelectable="false",t.ariaOrientation="vertical",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),this.#a&&(t.id=`${this.#a.id}_colorpicker_dropdown`);for(const[s,n]of this.#l.highlightColors){const r=document.createElement("button");r.tabIndex="0",r.role="option",r.setAttribute("data-color",n),r.title=s,r.setAttribute("data-l10n-id",Re.#h[s]);const o=document.createElement("span");r.append(o),o.className="swatch",o.style.backgroundColor=n,r.ariaSelected=n===this.#s,r.addEventListener("click",this.#p.bind(this,n),{signal:e}),t.append(r)}return t.addEventListener("keydown",this.#g.bind(this),{signal:e}),t}#p(t,e){e.stopPropagation(),this.#o.dispatch("switchannotationeditorparams",{source:this,type:this.#d,value:t})}_colorSelectFromKeyboard(t){if(t.target===this.#t){this.#c(t);return}const e=t.target.getAttribute("data-color");e&&this.#p(e,t)}_moveToNext(t){if(!this.#_){this.#c(t);return}if(t.target===this.#t){this.#i.firstChild?.focus();return}t.target.nextSibling?.focus()}_moveToPrevious(t){if(t.target===this.#i?.firstChild||t.target===this.#t){this.#_&&this._hideDropdownFromKeyboard();return}this.#_||this.#c(t),t.target.previousSibling?.focus()}_moveToBeginning(t){if(!this.#_){this.#c(t);return}this.#i.firstChild?.focus()}_moveToEnd(t){if(!this.#_){this.#c(t);return}this.#i.lastChild?.focus()}#g(t){Re._keyboardManager.exec(this,t)}#c(t){if(this.#_){this.hideDropdown();return}if(this.#r=t.detail===0,this.#u||(this.#u=new AbortController,window.addEventListener("pointerdown",this.#m.bind(this),{signal:this.#l.combinedSignal(this.#u)})),this.#t.ariaExpanded="true",this.#i){this.#i.classList.remove("hidden");return}const e=this.#i=this.#f();this.#t.append(e)}#m(t){this.#i?.contains(t.target)||this.hideDropdown()}hideDropdown(){this.#i?.classList.add("hidden"),this.#t.ariaExpanded="false",this.#u?.abort(),this.#u=null}get#_(){return this.#i&&!this.#i.classList.contains("hidden")}_hideDropdownFromKeyboard(){if(!this.#n){if(!this.#_){this.#a?.unselect();return}this.hideDropdown(),this.#t.focus({preventScroll:!0,focusVisible:this.#r})}}updateColor(t){if(this.#e&&(this.#e.style.backgroundColor=t),!this.#i)return;const e=this.#l.highlightColors.values();for(const s of this.#i.children)s.ariaSelected=e.next().value===t.toUpperCase()}destroy(){this.#t?.remove(),this.#t=null,this.#e=null,this.#i?.remove(),this.#i=null}}class Ot extends J{#t=null;#e=0;#s;#i=null;#r=null;#n=null;#a=null;#o=0;#u=null;#l=null;#d=null;#h=!1;#f=null;#p;#g=null;#c="";#m;#_="";static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=12;static _type="highlight";static _editorType=rt.HIGHLIGHT;static _freeHighlightId=-1;static _freeHighlight=null;static _freeHighlightClipId="";static get _keyboardManager(){const t=Ot.prototype;return ut(this,"_keyboardManager",new Vn([[["ArrowLeft","mac+ArrowLeft"],t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],t._moveCaret,{args:[3]}]]))}constructor(t){super({...t,name:"highlightEditor"}),this.color=t.color||Ot._defaultColor,this.#m=t.thickness||Ot._defaultThickness,this.#p=t.opacity||Ot._defaultOpacity,this.#s=t.boxes||null,this.#_=t.methodOfCreation||"",this.#c=t.text||"",this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",t.highlightId>-1?(this.#h=!0,this.#y(t),this.#P()):this.#s&&(this.#t=t.anchorNode,this.#e=t.anchorOffset,this.#a=t.focusNode,this.#o=t.focusOffset,this.#b(),this.#P(),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}get telemetryInitialData(){return{action:"added",type:this.#h?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:this.#m,methodOfCreation:this.#_}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(t){return{numberOfColors:t.get("color").size}}#b(){const t=new Ta(this.#s,.001);this.#l=t.getOutlines(),[this.x,this.y,this.width,this.height]=this.#l.box;const e=new Ta(this.#s,.0025,.001,this._uiManager.direction==="ltr");this.#n=e.getOutlines();const{lastPoint:s}=this.#n;this.#f=[(s[0]-this.x)/this.width,(s[1]-this.y)/this.height]}#y({highlightOutlines:t,highlightId:e,clipPathId:s}){this.#l=t;const n=1.5;if(this.#n=t.getNewOutline(this.#m/2+n,.0025),e>=0)this.#d=e,this.#i=s,this.parent.drawLayer.finalizeDraw(e,{bbox:t.box,path:{d:t.toSVGPath()}}),this.#g=this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:this.#n.box,path:{d:this.#n.toSVGPath()}},!0);else if(this.parent){const c=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(this.#d,{bbox:Ot.#E(this.#l.box,(c-this.rotation+360)%360),path:{d:t.toSVGPath()}}),this.parent.drawLayer.updateProperties(this.#g,{bbox:Ot.#E(this.#n.box,c),path:{d:this.#n.toSVGPath()}})}const[r,o,a,l]=t.box;switch(this.rotation){case 0:this.x=r,this.y=o,this.width=a,this.height=l;break;case 90:{const[c,u]=this.parentDimensions;this.x=o,this.y=1-r,this.width=a*u/c,this.height=l*c/u;break}case 180:this.x=1-r,this.y=1-o,this.width=a,this.height=l;break;case 270:{const[c,u]=this.parentDimensions;this.x=1-o,this.y=r,this.width=a*u/c,this.height=l*c/u;break}}const{lastPoint:h}=this.#n;this.#f=[(h[0]-r)/a,(h[1]-o)/l]}static initialize(t,e){J.initialize(t,e),Ot._defaultColor||=e.highlightColors?.values().next().value||"#fff066"}static updateDefaultParams(t,e){switch(t){case ft.HIGHLIGHT_DEFAULT_COLOR:Ot._defaultColor=e;break;case ft.HIGHLIGHT_THICKNESS:Ot._defaultThickness=e;break}}translateInPage(t,e){}get toolbarPosition(){return this.#f}updateParams(t,e){switch(t){case ft.HIGHLIGHT_COLOR:this.#A(e);break;case ft.HIGHLIGHT_THICKNESS:this.#w(e);break}}static get defaultPropertiesToUpdate(){return[[ft.HIGHLIGHT_DEFAULT_COLOR,Ot._defaultColor],[ft.HIGHLIGHT_THICKNESS,Ot._defaultThickness]]}get propertiesToUpdate(){return[[ft.HIGHLIGHT_COLOR,this.color||Ot._defaultColor],[ft.HIGHLIGHT_THICKNESS,this.#m||Ot._defaultThickness],[ft.HIGHLIGHT_FREE,this.#h]]}#A(t){const e=(r,o)=>{this.color=r,this.#p=o,this.parent?.drawLayer.updateProperties(this.#d,{root:{fill:r,"fill-opacity":o}}),this.#r?.updateColor(r)},s=this.color,n=this.#p;this.addCommands({cmd:e.bind(this,t,Ot._defaultOpacity),undo:e.bind(this,s,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ft.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(t)},!0)}#w(t){const e=this.#m,s=n=>{this.#m=n,this.#C(n)};this.addCommands({cmd:s.bind(this,t),undo:s.bind(this,e),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ft.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:t},!0)}get toolbarButtons(){return this._uiManager.highlightColors?[["colorPicker",this.#r=new Re({editor:this})]]:super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(this.#L())}getBaseTranslation(){return[0,0]}getRect(t,e){return super.getRect(t,e,this.#L())}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),t&&this.div.focus()}remove(){this.#x(),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#P(),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){let e=!1;this.parent&&!t?this.#x():t&&(this.#P(t),e=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(t),this.show(this._isVisible),e&&this.select()}#C(t){if(!this.#h)return;this.#y({highlightOutlines:this.#l.getNewOutline(t/2)}),this.fixAndSetPosition();const[e,s]=this.parentDimensions;this.setDims(this.width*e,this.height*s)}#x(){this.#d===null||!this.parent||(this.parent.drawLayer.remove(this.#d),this.#d=null,this.parent.drawLayer.remove(this.#g),this.#g=null)}#P(t=this.parent){this.#d===null&&({id:this.#d,clipPathId:this.#i}=t.drawLayer.draw({bbox:this.#l.box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":this.#p},rootClass:{highlight:!0,free:this.#h},path:{d:this.#l.toSVGPath()}},!1,!0),this.#g=t.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:this.#h},bbox:this.#n.box,path:{d:this.#n.toSVGPath()}},this.#h),this.#u&&(this.#u.style.clipPath=this.#i))}static#E([t,e,s,n],r){switch(r){case 90:return[1-e-n,t,n,s];case 180:return[1-t-s,1-e-n,s,n];case 270:return[e,1-t-s,n,s]}return[t,e,s,n]}rotate(t){const{drawLayer:e}=this.parent;let s;this.#h?(t=(t-this.rotation+360)%360,s=Ot.#E(this.#l.box,t)):s=Ot.#E([this.x,this.y,this.width,this.height],t),e.updateProperties(this.#d,{bbox:s,root:{"data-main-rotation":t}}),e.updateProperties(this.#g,{bbox:Ot.#E(this.#n.box,t),root:{"data-main-rotation":t}})}render(){if(this.div)return this.div;const t=super.render();this.#c&&(t.setAttribute("aria-label",this.#c),t.setAttribute("role","mark")),this.#h?t.classList.add("free"):this.div.addEventListener("keydown",this.#R.bind(this),{signal:this._uiManager._signal});const e=this.#u=document.createElement("div");t.append(e),e.setAttribute("aria-hidden","true"),e.className="internal",e.style.clipPath=this.#i;const[s,n]=this.parentDimensions;return this.setDims(this.width*s,this.height*n),hd(this,this.#u,["pointerover","pointerleave"]),this.enableEditing(),t}pointerover(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#g,{rootClass:{hovered:!0}})}pointerleave(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#g,{rootClass:{hovered:!1}})}#R(t){Ot._keyboardManager.exec(this,t)}_moveCaret(t){switch(this.parent.unselect(this),t){case 0:case 2:this.#T(!0);break;case 1:case 3:this.#T(!1);break}}#T(t){if(!this.#t)return;const e=window.getSelection();t?e.setPosition(this.#t,this.#e):e.setPosition(this.#a,this.#o)}select(){super.select(),this.#g&&this.parent?.drawLayer.updateProperties(this.#g,{rootClass:{hovered:!1,selected:!0}})}unselect(){super.unselect(),this.#g&&(this.parent?.drawLayer.updateProperties(this.#g,{rootClass:{selected:!1}}),this.#h||this.#T(!1))}get _mustFixPosition(){return!this.#h}show(t=this._isVisible){super.show(t),this.parent&&(this.parent.drawLayer.updateProperties(this.#d,{rootClass:{hidden:!t}}),this.parent.drawLayer.updateProperties(this.#g,{rootClass:{hidden:!t}}))}#L(){return this.#h?this.rotation:0}#M(){if(this.#h)return null;const[t,e]=this.pageDimensions,[s,n]=this.pageTranslation,r=this.#s,o=new Float32Array(r.length*8);let a=0;for(const{x:l,y:h,width:c,height:u}of r){const d=l*t+s,f=(1-h)*e+n;o[a]=o[a+4]=d,o[a+1]=o[a+3]=f,o[a+2]=o[a+6]=d+c*t,o[a+5]=o[a+7]=f-u*e,a+=8}return o}#k(t){return this.#l.serialize(t,this.#L())}static startHighlighting(t,e,{target:s,x:n,y:r}){const{x:o,y:a,width:l,height:h}=s.getBoundingClientRect(),c=new AbortController,u=t.combinedSignal(c),d=f=>{c.abort(),this.#S(t,f)};window.addEventListener("blur",d,{signal:u}),window.addEventListener("pointerup",d,{signal:u}),window.addEventListener("pointerdown",Bt,{capture:!0,passive:!1,signal:u}),window.addEventListener("contextmenu",Be,{signal:u}),s.addEventListener("pointermove",this.#H.bind(this,t),{signal:u}),this._freeHighlight=new xa({x:n,y:r},[o,a,l,h],t.scale,this._defaultThickness/2,e,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static#H(t,e){this._freeHighlight.add(e)&&t.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})}static#S(t,e){this._freeHighlight.isEmpty()?t.drawLayer.remove(this._freeHighlightId):t.createAndAddNewEditor(e,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""}static async deserialize(t,e,s){let n=null;if(t instanceof Od){const{data:{quadPoints:g,rect:p,rotation:_,id:m,color:y,opacity:v,popupRef:b},parent:{page:{pageNumber:E}}}=t;n=t={annotationType:rt.HIGHLIGHT,color:Array.from(y),opacity:v,quadPoints:g,boxes:null,pageIndex:E-1,rect:p.slice(0),rotation:_,annotationElementId:m,id:m,deleted:!1,popupRef:b}}else if(t instanceof dl){const{data:{inkLists:g,rect:p,rotation:_,id:m,color:y,borderStyle:{rawWidth:v},popupRef:b},parent:{page:{pageNumber:E}}}=t;n=t={annotationType:rt.HIGHLIGHT,color:Array.from(y),thickness:v,inkLists:g,boxes:null,pageIndex:E-1,rect:p.slice(0),rotation:_,annotationElementId:m,id:m,deleted:!1,popupRef:b}}const{color:r,quadPoints:o,inkLists:a,opacity:l}=t,h=await super.deserialize(t,e,s);h.color=Y.makeHexColor(...r),h.#p=l||1,a&&(h.#m=t.thickness),h._initialData=n;const[c,u]=h.pageDimensions,[d,f]=h.pageTranslation;if(o){const g=h.#s=[];for(let p=0;p<o.length;p+=8)g.push({x:(o[p]-d)/c,y:1-(o[p+1]-f)/u,width:(o[p+2]-o[p])/c,height:(o[p+1]-o[p+5])/u});h.#b(),h.#P(),h.rotate(h.rotation)}else if(a){h.#h=!0;const g=a[0],p={x:g[0]-d,y:u-(g[1]-f)},_=new xa(p,[0,0,c,u],1,h.#m/2,!0,.001);for(let v=0,b=g.length;v<b;v+=2)p.x=g[v]-d,p.y=u-(g[v+1]-f),_.add(p);const{id:m,clipPathId:y}=e.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:h.color,"fill-opacity":h._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:_.toSVGPath()}},!0,!0);h.#y({highlightOutlines:_.getOutlines(),highlightId:m,clipPathId:y}),h.#P(),h.rotate(h.parentRotation)}return h}serialize(t=!1){if(this.isEmpty()||t)return null;if(this.deleted)return this.serializeDeleted();const e=this.getRect(0,0),s=J._colorManager.convert(this.color),n={annotationType:rt.HIGHLIGHT,color:s,opacity:this.#p,thickness:this.#m,quadPoints:this.#M(),outlines:this.#k(e),pageIndex:this.pageIndex,rect:e,rotation:this.#L(),structTreeParentId:this._structTreeParentId};return this.annotationElementId&&!this.#v(n)?null:(n.id=this.annotationElementId,n)}#v(t){const{color:e}=this._initialData;return t.color.some((s,n)=>s!==e[n])}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}}class Fd{#t=Object.create(null);updateProperty(t,e){this[t]=e,this.updateSVGProperty(t,e)}updateProperties(t){if(t)for(const[e,s]of Object.entries(t))e.startsWith("_")||this.updateProperty(e,s)}updateSVGProperty(t,e){this.#t[t]=e}toSVGProperties(){const t=this.#t;return this.#t=Object.create(null),{root:t}}reset(){this.#t=Object.create(null)}updateAll(t=this){this.updateProperties(t)}clone(){At("Not implemented")}}class tt extends J{#t=null;#e;_drawId=null;static _currentDrawId=-1;static _currentParent=null;static#s=null;static#i=null;static#r=null;static#n=NaN;static#a=null;static#o=null;static#u=NaN;static _INNER_MARGIN=3;constructor(t){super(t),this.#e=t.mustBeCommitted||!1,this._addOutlines(t)}_addOutlines(t){t.drawOutlines&&(this.#l(t),this.#f())}#l({drawOutlines:t,drawId:e,drawingOptions:s}){this.#t=t,this._drawingOptions||=s,this.annotationElementId||this._uiManager.a11yAlert(`pdfjs-editor-${this.editorType}-added-alert`),e>=0?(this._drawId=e,this.parent.drawLayer.finalizeDraw(e,t.defaultProperties)):this._drawId=this.#d(t,this.parent),this.#c(t.box)}#d(t,e){const{id:s}=e.drawLayer.draw(tt._mergeSVGProperties(this._drawingOptions.toSVGProperties(),t.defaultSVGProperties),!1,!1);return s}static _mergeSVGProperties(t,e){const s=new Set(Object.keys(t));for(const[n,r]of Object.entries(e))s.has(n)?Object.assign(t[n],r):t[n]=r;return t}static getDefaultDrawingOptions(t){At("Not implemented")}static get typesMap(){At("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(t,e){const s=this.typesMap.get(t);s&&this._defaultDrawingOptions.updateProperty(s,e),this._currentParent&&(tt.#s.updateProperty(s,e),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(t,e){const s=this.constructor.typesMap.get(t);s&&this._updateProperty(t,s,e)}static get defaultPropertiesToUpdate(){const t=[],e=this._defaultDrawingOptions;for(const[s,n]of this.typesMap)t.push([s,e[n]]);return t}get propertiesToUpdate(){const t=[],{_drawingOptions:e}=this;for(const[s,n]of this.constructor.typesMap)t.push([s,e[n]]);return t}_updateProperty(t,e,s){const n=this._drawingOptions,r=n[e],o=a=>{n.updateProperty(e,a);const l=this.#t.updateProperty(e,a);l&&this.#c(l),this.parent?.drawLayer.updateProperties(this._drawId,n.toSVGProperties())};this.addCommands({cmd:o.bind(this,s),undo:o.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:t,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){this.parent?.drawLayer.updateProperties(this._drawId,tt._mergeSVGProperties(this.#t.getPathResizingSVGProperties(this.#g()),{bbox:this.#m()}))}_onResized(){this.parent?.drawLayer.updateProperties(this._drawId,tt._mergeSVGProperties(this.#t.getPathResizedSVGProperties(this.#g()),{bbox:this.#m()}))}_onTranslating(t,e){this.parent?.drawLayer.updateProperties(this._drawId,{bbox:this.#m()})}_onTranslated(){this.parent?.drawLayer.updateProperties(this._drawId,tt._mergeSVGProperties(this.#t.getPathTranslatedSVGProperties(this.#g(),this.parentDimensions),{bbox:this.#m()}))}_onStartDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,this.#e&&(this.#e=!1,this.commit(),this.parent.setSelected(this),t&&this.isOnScreen&&this.div.focus())}remove(){this.#h(),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#f(),this.#c(this.#t.box),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){let e=!1;this.parent&&!t?(this._uiManager.removeShouldRescale(this),this.#h()):t&&(this._uiManager.addShouldRescale(this),this.#f(t),e=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(t),e&&this.select()}#h(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())}#f(t=this.parent){if(!(this._drawId!==null&&this.parent===t)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,t.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=this.#d(this.#t,t)}}#p([t,e,s,n]){const{parentDimensions:[r,o],rotation:a}=this;switch(a){case 90:return[e,1-t,s*(o/r),n*(r/o)];case 180:return[1-t,1-e,s,n];case 270:return[1-e,t,s*(o/r),n*(r/o)];default:return[t,e,s,n]}}#g(){const{x:t,y:e,width:s,height:n,parentDimensions:[r,o],rotation:a}=this;switch(a){case 90:return[1-e,t,s*(r/o),n*(o/r)];case 180:return[1-t,1-e,s,n];case 270:return[e,1-t,s*(r/o),n*(o/r)];default:return[t,e,s,n]}}#c(t){if([this.x,this.y,this.width,this.height]=this.#p(t),this.div){this.fixAndSetPosition();const[e,s]=this.parentDimensions;this.setDims(this.width*e,this.height*s)}this._onResized()}#m(){const{x:t,y:e,width:s,height:n,rotation:r,parentRotation:o,parentDimensions:[a,l]}=this;switch((r*4+o)/90){case 1:return[1-e-n,t,n,s];case 2:return[1-t-s,1-e-n,s,n];case 3:return[e,1-t-s,n,s];case 4:return[t,e-s*(a/l),n*(l/a),s*(a/l)];case 5:return[1-e,t,s*(a/l),n*(l/a)];case 6:return[1-t-n*(l/a),1-e,n*(l/a),s*(a/l)];case 7:return[e-s*(a/l),1-t-n*(l/a),s*(a/l),n*(l/a)];case 8:return[t-s,e-n,s,n];case 9:return[1-e,t-s,n,s];case 10:return[1-t,1-e,s,n];case 11:return[e-n,1-t,n,s];case 12:return[t-n*(l/a),e,n*(l/a),s*(a/l)];case 13:return[1-e-s*(a/l),t-n*(l/a),s*(a/l),n*(l/a)];case 14:return[1-t,1-e-s*(a/l),n*(l/a),s*(a/l)];case 15:return[e,1-t,s*(a/l),n*(l/a)];default:return[t,e,s,n]}}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,tt._mergeSVGProperties({bbox:this.#m()},this.#t.updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&this.#c(this.#t.updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let t,e;this._isCopy&&(t=this.x,e=this.y);const s=super.render();s.classList.add("draw");const n=document.createElement("div");s.append(n),n.setAttribute("aria-hidden","true"),n.className="internal";const[r,o]=this.parentDimensions;return this.setDims(this.width*r,this.height*o),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(t,e),s}static createDrawerInstance(t,e,s,n,r){At("Not implemented")}static startDrawing(t,e,s,n){const{target:r,offsetX:o,offsetY:a,pointerId:l,pointerType:h}=n;if(tt.#a&&tt.#a!==h)return;const{viewport:{rotation:c}}=t,{width:u,height:d}=r.getBoundingClientRect(),f=tt.#i=new AbortController,g=t.combinedSignal(f);if(tt.#n||=l,tt.#a??=h,window.addEventListener("pointerup",p=>{tt.#n===p.pointerId?this._endDraw(p):tt.#o?.delete(p.pointerId)},{signal:g}),window.addEventListener("pointercancel",p=>{tt.#n===p.pointerId?this._currentParent.endDrawingSession():tt.#o?.delete(p.pointerId)},{signal:g}),window.addEventListener("pointerdown",p=>{tt.#a===p.pointerType&&((tt.#o||=new Set).add(p.pointerId),tt.#s.isCancellable()&&(tt.#s.removeLastElement(),tt.#s.isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:g}),window.addEventListener("contextmenu",Be,{signal:g}),r.addEventListener("pointermove",this._drawMove.bind(this),{signal:g}),r.addEventListener("touchmove",p=>{p.timeStamp===tt.#u&&Bt(p)},{signal:g}),t.toggleDrawing(),e._editorUndoBar?.hide(),tt.#s){t.drawLayer.updateProperties(this._currentDrawId,tt.#s.startNew(o,a,u,d,c));return}e.updateUIForDefaultProperties(this),tt.#s=this.createDrawerInstance(o,a,u,d,c),tt.#r=this.getDefaultDrawingOptions(),this._currentParent=t,{id:this._currentDrawId}=t.drawLayer.draw(this._mergeSVGProperties(tt.#r.toSVGProperties(),tt.#s.defaultSVGProperties),!0,!1)}static _drawMove(t){if(tt.#u=-1,!tt.#s)return;const{offsetX:e,offsetY:s,pointerId:n}=t;if(tt.#n===n){if(tt.#o?.size>=1){this._endDraw(t);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,tt.#s.add(e,s)),tt.#u=t.timeStamp,Bt(t)}}static _cleanup(t){t&&(this._currentDrawId=-1,this._currentParent=null,tt.#s=null,tt.#r=null,tt.#a=null,tt.#u=NaN),tt.#i&&(tt.#i.abort(),tt.#i=null,tt.#n=NaN,tt.#o=null)}static _endDraw(t){const e=this._currentParent;if(e){if(e.toggleDrawing(!0),this._cleanup(!1),t?.target===e.div&&e.drawLayer.updateProperties(this._currentDrawId,tt.#s.end(t.offsetX,t.offsetY)),this.supportMultipleDrawings){const s=tt.#s,n=this._currentDrawId,r=s.getLastElement();e.addCommands({cmd:()=>{e.drawLayer.updateProperties(n,s.setLastElement(r))},undo:()=>{e.drawLayer.updateProperties(n,s.removeLastElement())},mustExec:!1,type:ft.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(t){const e=this._currentParent;if(!e)return null;if(e.toggleDrawing(!0),e.cleanUndoStack(ft.DRAW_STEP),!tt.#s.isEmpty()){const{pageDimensions:[s,n],scale:r}=e,o=e.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:tt.#s.getOutlines(s*r,n*r,r,this._INNER_MARGIN),drawingOptions:tt.#r,mustBeCommitted:!t});return this._cleanup(!0),o}return e.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(t){}static deserializeDraw(t,e,s,n,r,o){At("Not implemented")}static async deserialize(t,e,s){const{rawDims:{pageWidth:n,pageHeight:r,pageX:o,pageY:a}}=e.viewport,l=this.deserializeDraw(o,a,n,r,this._INNER_MARGIN,t),h=await super.deserialize(t,e,s);return h.createDrawingOptions(t),h.#l({drawOutlines:l}),h.#f(),h.onScaleChanging(),h.rotate(),h}serializeDraw(t){const[e,s]=this.pageTranslation,[n,r]=this.pageDimensions;return this.#t.serialize([e,s,n,r],t)}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}}class dv{#t=new Float64Array(6);#e;#s;#i;#r;#n;#a="";#o=0;#u=new Un;#l;#d;constructor(t,e,s,n,r,o){this.#l=s,this.#d=n,this.#i=r,this.#r=o,[t,e]=this.#h(t,e);const a=this.#e=[NaN,NaN,NaN,NaN,t,e];this.#n=[t,e],this.#s=[{line:a,points:this.#n}],this.#t.set(a,0)}updateProperty(t,e){t==="stroke-width"&&(this.#r=e)}#h(t,e){return z._normalizePoint(t,e,this.#l,this.#d,this.#i)}isEmpty(){return!this.#s||this.#s.length===0}isCancellable(){return this.#n.length<=10}add(t,e){[t,e]=this.#h(t,e);const[s,n,r,o]=this.#t.subarray(2,6),a=t-r,l=e-o;return Math.hypot(this.#l*a,this.#d*l)<=2?null:(this.#n.push(t,e),isNaN(s)?(this.#t.set([r,o,t,e],2),this.#e.push(NaN,NaN,NaN,NaN,t,e),{path:{d:this.toSVGPath()}}):(isNaN(this.#t[0])&&this.#e.splice(6,6),this.#t.set([s,n,r,o,t,e],0),this.#e.push(...z.createBezierPoints(s,n,r,o,t,e)),{path:{d:this.toSVGPath()}}))}end(t,e){const s=this.add(t,e);return s||(this.#n.length===2?{path:{d:this.toSVGPath()}}:null)}startNew(t,e,s,n,r){this.#l=s,this.#d=n,this.#i=r,[t,e]=this.#h(t,e);const o=this.#e=[NaN,NaN,NaN,NaN,t,e];this.#n=[t,e];const a=this.#s.at(-1);return a&&(a.line=new Float32Array(a.line),a.points=new Float32Array(a.points)),this.#s.push({line:o,points:this.#n}),this.#t.set(o,0),this.#o=0,this.toSVGPath(),null}getLastElement(){return this.#s.at(-1)}setLastElement(t){return this.#s?(this.#s.push(t),this.#e=t.line,this.#n=t.points,this.#o=0,{path:{d:this.toSVGPath()}}):this.#u.setLastElement(t)}removeLastElement(){if(!this.#s)return this.#u.removeLastElement();this.#s.pop(),this.#a="";for(let t=0,e=this.#s.length;t<e;t++){const{line:s,points:n}=this.#s[t];this.#e=s,this.#n=n,this.#o=0,this.toSVGPath()}return{path:{d:this.#a}}}toSVGPath(){const t=z.svgRound(this.#e[4]),e=z.svgRound(this.#e[5]);if(this.#n.length===2)return this.#a=`${this.#a} M ${t} ${e} Z`,this.#a;if(this.#n.length<=6){const n=this.#a.lastIndexOf("M");this.#a=`${this.#a.slice(0,n)} M ${t} ${e}`,this.#o=6}if(this.#n.length===4){const n=z.svgRound(this.#e[10]),r=z.svgRound(this.#e[11]);return this.#a=`${this.#a} L ${n} ${r}`,this.#o=12,this.#a}const s=[];this.#o===0&&(s.push(`M ${t} ${e}`),this.#o=6);for(let n=this.#o,r=this.#e.length;n<r;n+=6){const[o,a,l,h,c,u]=this.#e.slice(n,n+6).map(z.svgRound);s.push(`C${o} ${a} ${l} ${h} ${c} ${u}`)}return this.#a+=s.join(" "),this.#o=this.#e.length,this.#a}getOutlines(t,e,s,n){const r=this.#s.at(-1);return r.line=new Float32Array(r.line),r.points=new Float32Array(r.points),this.#u.build(this.#s,t,e,s,this.#i,this.#r,n),this.#t=null,this.#e=null,this.#s=null,this.#a=null,this.#u}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}class Un extends z{#t;#e=0;#s;#i;#r;#n;#a;#o;#u;build(t,e,s,n,r,o,a){this.#r=e,this.#n=s,this.#a=n,this.#o=r,this.#u=o,this.#s=a??0,this.#i=t,this.#h()}get thickness(){return this.#u}setLastElement(t){return this.#i.push(t),{path:{d:this.toSVGPath()}}}removeLastElement(){return this.#i.pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const t=[];for(const{line:e}of this.#i){if(t.push(`M${z.svgRound(e[4])} ${z.svgRound(e[5])}`),e.length===6){t.push("Z");continue}if(e.length===12&&isNaN(e[6])){t.push(`L${z.svgRound(e[10])} ${z.svgRound(e[11])}`);continue}for(let s=6,n=e.length;s<n;s+=6){const[r,o,a,l,h,c]=e.subarray(s,s+6).map(z.svgRound);t.push(`C${r} ${o} ${a} ${l} ${h} ${c}`)}}return t.join("")}serialize([t,e,s,n],r){const o=[],a=[],[l,h,c,u]=this.#d();let d,f,g,p,_,m,y,v,b;switch(this.#o){case 0:b=z._rescale,d=t,f=e+n,g=s,p=-n,_=t+l*s,m=e+(1-h-u)*n,y=t+(l+c)*s,v=e+(1-h)*n;break;case 90:b=z._rescaleAndSwap,d=t,f=e,g=s,p=n,_=t+h*s,m=e+l*n,y=t+(h+u)*s,v=e+(l+c)*n;break;case 180:b=z._rescale,d=t+s,f=e,g=-s,p=n,_=t+(1-l-c)*s,m=e+h*n,y=t+(1-l)*s,v=e+(h+u)*n;break;case 270:b=z._rescaleAndSwap,d=t+s,f=e+n,g=-s,p=-n,_=t+(1-h-u)*s,m=e+(1-l-c)*n,y=t+(1-h)*s,v=e+(1-l)*n;break}for(const{line:E,points:S}of this.#i)o.push(b(E,d,f,g,p,r?new Array(E.length):null)),a.push(b(S,d,f,g,p,r?new Array(S.length):null));return{lines:o,points:a,rect:[_,m,y,v]}}static deserialize(t,e,s,n,r,{paths:{lines:o,points:a},rotation:l,thickness:h}){const c=[];let u,d,f,g,p;switch(l){case 0:p=z._rescale,u=-t/s,d=e/n+1,f=1/s,g=-1/n;break;case 90:p=z._rescaleAndSwap,u=-e/n,d=-t/s,f=1/n,g=1/s;break;case 180:p=z._rescale,u=t/s+1,d=-e/n,f=-1/s,g=1/n;break;case 270:p=z._rescaleAndSwap,u=e/n+1,d=t/s+1,f=-1/n,g=-1/s;break}if(!o){o=[];for(const m of a){const y=m.length;if(y===2){o.push(new Float32Array([NaN,NaN,NaN,NaN,m[0],m[1]]));continue}if(y===4){o.push(new Float32Array([NaN,NaN,NaN,NaN,m[0],m[1],NaN,NaN,NaN,NaN,m[2],m[3]]));continue}const v=new Float32Array(3*(y-2));o.push(v);let[b,E,S,T]=m.subarray(0,4);v.set([NaN,NaN,NaN,NaN,b,E],0);for(let I=4;I<y;I+=2){const k=m[I],$=m[I+1];v.set(z.createBezierPoints(b,E,S,T,k,$),(I-2)*3),[b,E,S,T]=[S,T,k,$]}}}for(let m=0,y=o.length;m<y;m++)c.push({line:p(o[m].map(v=>v??NaN),u,d,f,g),points:p(a[m].map(v=>v??NaN),u,d,f,g)});const _=new this.prototype.constructor;return _.build(c,s,n,1,l,h,r),_}#l(t=this.#u){const e=this.#s+t/2*this.#a;return this.#o%180===0?[e/this.#r,e/this.#n]:[e/this.#n,e/this.#r]}#d(){const[t,e,s,n]=this.#t,[r,o]=this.#l(0);return[t+r,e+o,s-2*r,n-2*o]}#h(){const t=this.#t=new Float32Array([1/0,1/0,-1/0,-1/0]);for(const{line:n}of this.#i){if(n.length<=12){for(let a=4,l=n.length;a<l;a+=6)Y.pointBoundingBox(n[a],n[a+1],t);continue}let r=n[4],o=n[5];for(let a=6,l=n.length;a<l;a+=6){const[h,c,u,d,f,g]=n.subarray(a,a+6);Y.bezierBoundingBox(r,o,h,c,u,d,f,g,t),r=f,o=g}}const[e,s]=this.#l();t[0]=re(t[0]-e,0,1),t[1]=re(t[1]-s,0,1),t[2]=re(t[2]+e,0,1),t[3]=re(t[3]+s,0,1),t[2]-=t[0],t[3]-=t[1]}get box(){return this.#t}updateProperty(t,e){return t==="stroke-width"?this.#f(e):null}#f(t){const[e,s]=this.#l();this.#u=t;const[n,r]=this.#l(),[o,a]=[n-e,r-s],l=this.#t;return l[0]-=o,l[1]-=a,l[2]+=2*o,l[3]+=2*a,l}updateParentDimensions([t,e],s){const[n,r]=this.#l();this.#r=t,this.#n=e,this.#a=s;const[o,a]=this.#l(),l=o-n,h=a-r,c=this.#t;return c[0]-=l,c[1]-=h,c[2]+=2*l,c[3]+=2*h,c}updateRotation(t){return this.#e=t,{path:{transform:this.rotationTransform}}}get viewBox(){return this.#t.map(z.svgRound).join(" ")}get defaultProperties(){const[t,e]=this.#t;return{root:{viewBox:this.viewBox},path:{"transform-origin":`${z.svgRound(t)} ${z.svgRound(e)}`}}}get rotationTransform(){const[,,t,e]=this.#t;let s=0,n=0,r=0,o=0,a=0,l=0;switch(this.#e){case 90:n=e/t,r=-t/e,a=t;break;case 180:s=-1,o=-1,a=t,l=e;break;case 270:n=-e/t,r=t/e,l=e;break;default:return""}return`matrix(${s} ${n} ${r} ${o} ${z.svgRound(a)} ${z.svgRound(l)})`}getPathResizingSVGProperties([t,e,s,n]){const[r,o]=this.#l(),[a,l,h,c]=this.#t;if(Math.abs(h-r)<=z.PRECISION||Math.abs(c-o)<=z.PRECISION){const p=t+s/2-(a+h/2),_=e+n/2-(l+c/2);return{path:{"transform-origin":`${z.svgRound(t)} ${z.svgRound(e)}`,transform:`${this.rotationTransform} translate(${p} ${_})`}}}const u=(s-2*r)/(h-2*r),d=(n-2*o)/(c-2*o),f=h/s,g=c/n;return{path:{"transform-origin":`${z.svgRound(a)} ${z.svgRound(l)}`,transform:`${this.rotationTransform} scale(${f} ${g}) translate(${z.svgRound(r)} ${z.svgRound(o)}) scale(${u} ${d}) translate(${z.svgRound(-r)} ${z.svgRound(-o)})`}}}getPathResizedSVGProperties([t,e,s,n]){const[r,o]=this.#l(),a=this.#t,[l,h,c,u]=a;if(a[0]=t,a[1]=e,a[2]=s,a[3]=n,Math.abs(c-r)<=z.PRECISION||Math.abs(u-o)<=z.PRECISION){const _=t+s/2-(l+c/2),m=e+n/2-(h+u/2);for(const{line:y,points:v}of this.#i)z._translate(y,_,m,y),z._translate(v,_,m,v);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${z.svgRound(t)} ${z.svgRound(e)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const d=(s-2*r)/(c-2*r),f=(n-2*o)/(u-2*o),g=-d*(l+r)+t+r,p=-f*(h+o)+e+o;if(d!==1||f!==1||g!==0||p!==0)for(const{line:_,points:m}of this.#i)z._rescale(_,g,p,d,f,_),z._rescale(m,g,p,d,f,m);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${z.svgRound(t)} ${z.svgRound(e)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([t,e],s){const[n,r]=s,o=this.#t,a=t-o[0],l=e-o[1];if(this.#r===n&&this.#n===r)for(const{line:h,points:c}of this.#i)z._translate(h,a,l,h),z._translate(c,a,l,c);else{const h=this.#r/n,c=this.#n/r;this.#r=n,this.#n=r;for(const{line:u,points:d}of this.#i)z._rescale(u,a,l,h,c,u),z._rescale(d,a,l,h,c,d);o[2]*=h,o[3]*=c}return o[0]=t,o[1]=e,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${z.svgRound(t)} ${z.svgRound(e)}`}}}get defaultSVGProperties(){const t=this.#t;return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${z.svgRound(t[0])} ${z.svgRound(t[1])}`,transform:this.rotationTransform||null},bbox:t}}}class no extends Fd{constructor(t){super(),this._viewParameters=t,super.updateProperties({fill:"none",stroke:J._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(t,e){t==="stroke-width"&&(e??=this["stroke-width"],e*=this._viewParameters.realScale),super.updateSVGProperty(t,e)}clone(){const t=new no(this._viewParameters);return t.updateAll(this),t}}class pl extends tt{static _type="ink";static _editorType=rt.INK;static _defaultDrawingOptions=null;constructor(t){super({...t,name:"inkEditor"}),this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(t,e){J.initialize(t,e),this._defaultDrawingOptions=new no(e.viewParameters)}static getDefaultDrawingOptions(t){const e=this._defaultDrawingOptions.clone();return e.updateProperties(t),e}static get supportMultipleDrawings(){return!0}static get typesMap(){return ut(this,"typesMap",new Map([[ft.INK_THICKNESS,"stroke-width"],[ft.INK_COLOR,"stroke"],[ft.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(t,e,s,n,r){return new dv(t,e,s,n,r,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(t,e,s,n,r,o){return Un.deserialize(t,e,s,n,r,o)}static async deserialize(t,e,s){let n=null;if(t instanceof dl){const{data:{inkLists:o,rect:a,rotation:l,id:h,color:c,opacity:u,borderStyle:{rawWidth:d},popupRef:f},parent:{page:{pageNumber:g}}}=t;n=t={annotationType:rt.INK,color:Array.from(c),thickness:d,opacity:u,paths:{points:o},boxes:null,pageIndex:g-1,rect:a.slice(0),rotation:l,annotationElementId:h,id:h,deleted:!1,popupRef:f}}const r=await super.deserialize(t,e,s);return r._initialData=n,r}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:t,_drawingOptions:e,parent:s}=this;e.updateSVGProperty("stroke-width"),s.drawLayer.updateProperties(t,e.toSVGProperties())}static onScaleChangingWhenDrawing(){const t=this._currentParent;t&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),t.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:t,thickness:e,opacity:s}){this._drawingOptions=pl.getDefaultDrawingOptions({stroke:Y.makeHexColor(...t),"stroke-width":e,"stroke-opacity":s})}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:e,points:s,rect:n}=this.serializeDraw(t),{_drawingOptions:{stroke:r,"stroke-opacity":o,"stroke-width":a}}=this,l={annotationType:rt.INK,color:J._colorManager.convert(r),opacity:o,thickness:a,paths:{lines:e,points:s},pageIndex:this.pageIndex,rect:n,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return t?(l.isCopy=!0,l):this.annotationElementId&&!this.#t(l)?null:(l.id=this.annotationElementId,l)}#t(t){const{color:e,thickness:s,opacity:n,pageIndex:r}=this._initialData;return this._hasBeenMoved||this._hasBeenResized||t.color.some((o,a)=>o!==e[a])||t.thickness!==s||t.opacity!==n||t.pageIndex!==r}renderAnnotationElement(t){const{points:e,rect:s}=this.serializeDraw(!1);return t.updateEdited({rect:s,thickness:this._drawingOptions["stroke-width"],points:e}),null}}class Ra extends Un{toSVGPath(){let t=super.toSVGPath();return t.endsWith("Z")||(t+="Z"),t}}const or=8,en=3;class mi{static#t={maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16};static#e(t,e,s,n){return s-=t,n-=e,s===0?n>0?0:4:s===1?n+6:2-n}static#s=new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]);static#i(t,e,s,n,r,o,a){const l=this.#e(s,n,r,o);for(let h=0;h<8;h++){const c=(-h+l-a+16)%8,u=this.#s[2*c],d=this.#s[2*c+1];if(t[(s+u)*e+(n+d)]!==0)return c}return-1}static#r(t,e,s,n,r,o,a){const l=this.#e(s,n,r,o);for(let h=0;h<8;h++){const c=(h+l+a+16)%8,u=this.#s[2*c],d=this.#s[2*c+1];if(t[(s+u)*e+(n+d)]!==0)return c}return-1}static#n(t,e,s,n){const r=t.length,o=new Int32Array(r);for(let c=0;c<r;c++)o[c]=t[c]<=n?1:0;for(let c=1;c<s-1;c++)o[c*e]=o[c*e+e-1]=0;for(let c=0;c<e;c++)o[c]=o[e*s-1-c]=0;let a=1,l;const h=[];for(let c=1;c<s-1;c++){l=1;for(let u=1;u<e-1;u++){const d=c*e+u,f=o[d];if(f===0)continue;let g=c,p=u;if(f===1&&o[d-1]===0)a+=1,p-=1;else if(f>=1&&o[d+1]===0)a+=1,p+=1,f>1&&(l=f);else{f!==1&&(l=Math.abs(f));continue}const _=[u,c],m=p===u+1,y={isHole:m,points:_,id:a,parent:0};h.push(y);let v;for(const B of h)if(B.id===l){v=B;break}v?v.isHole?y.parent=m?v.parent:l:y.parent=m?l:v.parent:y.parent=m?l:0;const b=this.#i(o,e,c,u,g,p,0);if(b===-1){o[d]=-a,o[d]!==1&&(l=Math.abs(o[d]));continue}let E=this.#s[2*b],S=this.#s[2*b+1];const T=c+E,I=u+S;g=T,p=I;let k=c,$=u;for(;;){const B=this.#r(o,e,k,$,g,p,1);E=this.#s[2*B],S=this.#s[2*B+1];const Z=k+E,X=$+S;_.push(X,Z);const it=k*e+$;if(o[it+1]===0?o[it]=-a:o[it]===1&&(o[it]=a),Z===c&&X===u&&k===T&&$===I){o[d]!==1&&(l=Math.abs(o[d]));break}else g=k,p=$,k=Z,$=X}}}return h}static#a(t,e,s,n){if(s-e<=4){for(let T=e;T<s-2;T+=2)n.push(t[T],t[T+1]);return}const r=t[e],o=t[e+1],a=t[s-4]-r,l=t[s-3]-o,h=Math.hypot(a,l),c=a/h,u=l/h,d=c*o-u*r,f=l/a,g=1/h,p=Math.atan(f),_=Math.cos(p),m=Math.sin(p),y=g*(Math.abs(_)+Math.abs(m)),v=g*(1-y+y**2),b=Math.max(Math.atan(Math.abs(m+_)*v),Math.atan(Math.abs(m-_)*v));let E=0,S=e;for(let T=e+2;T<s-2;T+=2){const I=Math.abs(d-c*t[T+1]+u*t[T]);I>E&&(S=T,E=I)}E>(h*b)**2?(this.#a(t,e,S+2,n),this.#a(t,S,s,n)):n.push(r,o)}static#o(t){const e=[],s=t.length;return this.#a(t,0,s,e),e.push(t[s-2],t[s-1]),e.length<=4?null:e}static#u(t,e,s,n,r,o){const a=new Float32Array(o**2),l=-2*n**2,h=o>>1;for(let p=0;p<o;p++){const _=(p-h)**2;for(let m=0;m<o;m++)a[p*o+m]=Math.exp((_+(m-h)**2)/l)}const c=new Float32Array(256),u=-2*r**2;for(let p=0;p<256;p++)c[p]=Math.exp(p**2/u);const d=t.length,f=new Uint8Array(d),g=new Uint32Array(256);for(let p=0;p<s;p++)for(let _=0;_<e;_++){const m=p*e+_,y=t[m];let v=0,b=0;for(let S=0;S<o;S++){const T=p+S-h;if(!(T<0||T>=s))for(let I=0;I<o;I++){const k=_+I-h;if(k<0||k>=e)continue;const $=t[T*e+k],B=a[S*o+I]*c[Math.abs($-y)];v+=$*B,b+=B}}const E=f[m]=Math.round(v/b);g[E]++}return[f,g]}static#l(t){const e=new Uint32Array(256);for(const s of t)e[s]++;return e}static#d(t){const e=t.length,s=new Uint8ClampedArray(e>>2);let n=-1/0,r=1/0;for(let a=0,l=s.length;a<l;a++){if(t[(a<<2)+3]===0){n=s[a]=255;continue}const c=s[a]=t[a<<2];c>n&&(n=c),c<r&&(r=c)}const o=255/(n-r);for(let a=0;a<e;a++)s[a]=(s[a]-r)*o;return s}static#h(t){let e,s=-1/0,n=-1/0;const r=t.findIndex(l=>l!==0);let o=r,a=r;for(e=r;e<256;e++){const l=t[e];l>s&&(e-o>n&&(n=e-o,a=e-1),s=l,o=e)}for(e=a-1;e>=0&&!(t[e]>t[e+1]);e--);return e}static#f(t){const e=t,{width:s,height:n}=t,{maxDim:r}=this.#t;let o=s,a=n;if(s>r||n>r){let d=s,f=n,g=Math.log2(Math.max(s,n)/r);const p=Math.floor(g);g=g===p?p-1:p;for(let m=0;m<g;m++){o=Math.ceil(d/2),a=Math.ceil(f/2);const y=new OffscreenCanvas(o,a);y.getContext("2d").drawImage(t,0,0,d,f,0,0,o,a),d=o,f=a,t!==e&&t.close(),t=y.transferToImageBitmap()}const _=Math.min(r/o,r/a);o=Math.round(o*_),a=Math.round(a*_)}const h=new OffscreenCanvas(o,a).getContext("2d",{willReadFrequently:!0});h.filter="grayscale(1)",h.drawImage(t,0,0,t.width,t.height,0,0,o,a);const c=h.getImageData(0,0,o,a).data;return[this.#d(c),o,a]}static extractContoursFromText(t,{fontFamily:e,fontStyle:s,fontWeight:n},r,o,a,l){let h=new OffscreenCanvas(1,1),c=h.getContext("2d",{alpha:!1});const u=200,d=c.font=`${s} ${n} ${u}px ${e}`,{actualBoundingBoxLeft:f,actualBoundingBoxRight:g,actualBoundingBoxAscent:p,actualBoundingBoxDescent:_,fontBoundingBoxAscent:m,fontBoundingBoxDescent:y,width:v}=c.measureText(t),b=1.5,E=Math.ceil(Math.max(Math.abs(f)+Math.abs(g)||0,v)*b),S=Math.ceil(Math.max(Math.abs(p)+Math.abs(_)||u,Math.abs(m)+Math.abs(y)||u)*b);h=new OffscreenCanvas(E,S),c=h.getContext("2d",{alpha:!0,willReadFrequently:!0}),c.font=d,c.filter="grayscale(1)",c.fillStyle="white",c.fillRect(0,0,E,S),c.fillStyle="black",c.fillText(t,E*(b-1)/2,S*(3-b)/2);const T=this.#d(c.getImageData(0,0,E,S).data),I=this.#l(T),k=this.#h(I),$=this.#n(T,E,S,k);return this.processDrawnLines({lines:{curves:$,width:E,height:S},pageWidth:r,pageHeight:o,rotation:a,innerMargin:l,mustSmooth:!0,areContours:!0})}static process(t,e,s,n,r){const[o,a,l]=this.#f(t),[h,c]=this.#u(o,a,l,Math.hypot(a,l)*this.#t.sigmaSFactor,this.#t.sigmaR,this.#t.kernelSize),u=this.#h(c),d=this.#n(h,a,l,u);return this.processDrawnLines({lines:{curves:d,width:a,height:l},pageWidth:e,pageHeight:s,rotation:n,innerMargin:r,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:t,pageWidth:e,pageHeight:s,rotation:n,innerMargin:r,mustSmooth:o,areContours:a}){n%180!==0&&([e,s]=[s,e]);const{curves:l,width:h,height:c}=t,u=t.thickness??0,d=[],f=Math.min(e/h,s/c),g=f/e,p=f/s,_=[];for(const{points:y}of l){const v=o?this.#o(y):y;if(!v)continue;_.push(v);const b=v.length,E=new Float32Array(b),S=new Float32Array(3*(b===2?2:b-2));if(d.push({line:S,points:E}),b===2){E[0]=v[0]*g,E[1]=v[1]*p,S.set([NaN,NaN,NaN,NaN,E[0],E[1]],0);continue}let[T,I,k,$]=v;T*=g,I*=p,k*=g,$*=p,E.set([T,I,k,$],0),S.set([NaN,NaN,NaN,NaN,T,I],0);for(let B=4;B<b;B+=2){const Z=E[B]=v[B]*g,X=E[B+1]=v[B+1]*p;S.set(z.createBezierPoints(T,I,k,$,Z,X),(B-2)*3),[T,I,k,$]=[k,$,Z,X]}}if(d.length===0)return null;const m=a?new Ra:new Un;return m.build(d,e,s,1,n,a?0:u,r),{outline:m,newCurves:_,areContours:a,thickness:u,width:h,height:c}}static async compressSignature({outlines:t,areContours:e,thickness:s,width:n,height:r}){let o=1/0,a=-1/0,l=0;for(const v of t){l+=v.length;for(let b=2,E=v.length;b<E;b++){const S=v[b]-v[b-2];o=Math.min(o,S),a=Math.max(a,S)}}let h;o>=-128&&a<=127?h=Int8Array:o>=-32768&&a<=32767?h=Int16Array:h=Int32Array;const c=t.length,u=or+en*c,d=new Uint32Array(u);let f=0;d[f++]=u*Uint32Array.BYTES_PER_ELEMENT+(l-2*c)*h.BYTES_PER_ELEMENT,d[f++]=0,d[f++]=n,d[f++]=r,d[f++]=e?0:1,d[f++]=Math.max(0,Math.floor(s??0)),d[f++]=c,d[f++]=h.BYTES_PER_ELEMENT;for(const v of t)d[f++]=v.length-2,d[f++]=v[0],d[f++]=v[1];const g=new CompressionStream("deflate-raw"),p=g.writable.getWriter();await p.ready,p.write(d);const _=h.prototype.constructor;for(const v of t){const b=new _(v.length-2);for(let E=2,S=v.length;E<S;E++)b[E-2]=v[E]-v[E-2];p.write(b)}p.close();const m=await new Response(g.readable).arrayBuffer(),y=new Uint8Array(m);return ld(y)}static async decompressSignature(t){try{const e=N_(t),{readable:s,writable:n}=new DecompressionStream("deflate-raw"),r=n.getWriter();await r.ready,r.write(e).then(async()=>{await r.ready,await r.close()}).catch(()=>{});let o=null,a=0;for await(const v of s)o||=new Uint8Array(new Uint32Array(v.buffer,0,4)[0]),o.set(v,a),a+=v.length;const l=new Uint32Array(o.buffer,0,o.length>>2),h=l[1];if(h!==0)throw new Error(`Invalid version: ${h}`);const c=l[2],u=l[3],d=l[4]===0,f=l[5],g=l[6],p=l[7],_=[],m=(or+en*g)*Uint32Array.BYTES_PER_ELEMENT;let y;switch(p){case Int8Array.BYTES_PER_ELEMENT:y=new Int8Array(o.buffer,m);break;case Int16Array.BYTES_PER_ELEMENT:y=new Int16Array(o.buffer,m);break;case Int32Array.BYTES_PER_ELEMENT:y=new Int32Array(o.buffer,m);break}a=0;for(let v=0;v<g;v++){const b=l[en*v+or],E=new Float32Array(b+2);_.push(E);for(let S=0;S<en-1;S++)E[S]=l[en*v+or+S+1];for(let S=0;S<b;S++)E[S+2]=E[S]+y[a++]}return{areContours:d,thickness:f,outlines:_,width:c,height:u}}catch(e){return ot(`decompressSignature: ${e}`),null}}}class gl extends Fd{constructor(){super(),super.updateProperties({fill:J._defaultLineColor,"stroke-width":0})}clone(){const t=new gl;return t.updateAll(this),t}}class ml extends no{constructor(t){super(t),super.updateProperties({stroke:J._defaultLineColor,"stroke-width":1})}clone(){const t=new ml(this._viewParameters);return t.updateAll(this),t}}class Ye extends tt{#t=!1;#e=null;#s=null;#i=null;static _type="signature";static _editorType=rt.SIGNATURE;static _defaultDrawingOptions=null;constructor(t){super({...t,mustBeCommitted:!0,name:"signatureEditor"}),this._willKeepAspectRatio=!0,this.#s=t.signatureData||null,this.#e=null,this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(t,e){J.initialize(t,e),this._defaultDrawingOptions=new gl,this._defaultDrawnSignatureOptions=new ml(e.viewParameters)}static getDefaultDrawingOptions(t){const e=this._defaultDrawingOptions.clone();return e.updateProperties(t),e}static get supportMultipleDrawings(){return!1}static get typesMap(){return ut(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!this.#e}}static computeTelemetryFinalData(t){const e=t.get("hasDescription");return{hasAltText:e.get(!0)??0,hasNoAltText:e.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let t,e;const{_isCopy:s}=this;if(s&&(this._isCopy=!1,t=this.x,e=this.y),super.render(),this._drawId===null)if(this.#s){const{lines:n,mustSmooth:r,areContours:o,description:a,uuid:l,heightInPage:h}=this.#s,{rawDims:{pageWidth:c,pageHeight:u},rotation:d}=this.parent.viewport,f=mi.processDrawnLines({lines:n,pageWidth:c,pageHeight:u,rotation:d,innerMargin:Ye._INNER_MARGIN,mustSmooth:r,areContours:o});this.addSignature(f,h,a,l)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);return s&&(this._isCopy=!0,this._moveAfterPaste(t,e)),this.div}setUuid(t){this.#i=t,this.addEditToolbar()}getUuid(){return this.#i}get description(){return this.#e}set description(t){this.#e=t,super.addEditToolbar().then(e=>{e?.updateEditSignatureButton(t)})}getSignaturePreview(){const{newCurves:t,areContours:e,thickness:s,width:n,height:r}=this.#s,o=Math.max(n,r),a=mi.processDrawnLines({lines:{curves:t.map(l=>({points:l})),thickness:s,width:n,height:r},pageWidth:o,pageHeight:o,rotation:0,innerMargin:0,mustSmooth:!1,areContours:e});return{areContours:e,outline:a.outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(t,e,s,n){const{x:r,y:o}=this,{outline:a}=this.#s=t;this.#t=a instanceof Ra,this.description=s,this.div.setAttribute("data-l10n-args",JSON.stringify({description:s}));let l;this.#t?l=Ye.getDefaultDrawingOptions():(l=Ye._defaultDrawnSignatureOptions.clone(),l.updateProperties({"stroke-width":a.thickness})),this._addOutlines({drawOutlines:a,drawingOptions:l});const[h,c]=this.parentDimensions,[,u]=this.pageDimensions;let d=e/u;d=d>=1?.5:d,this.width*=d/this.height,this.width>=1&&(d*=.9/this.width,this.width=.9),this.height=d,this.setDims(h*this.width,c*this.height),this.x=r,this.y=o,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(n),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!n,hasDescription:!!s}}),this.div.hidden=!1}getFromImage(t){const{rawDims:{pageWidth:e,pageHeight:s},rotation:n}=this.parent.viewport;return mi.process(t,e,s,n,Ye._INNER_MARGIN)}getFromText(t,e){const{rawDims:{pageWidth:s,pageHeight:n},rotation:r}=this.parent.viewport;return mi.extractContoursFromText(t,e,s,n,r,Ye._INNER_MARGIN)}getDrawnSignature(t){const{rawDims:{pageWidth:e,pageHeight:s},rotation:n}=this.parent.viewport;return mi.processDrawnLines({lines:t,pageWidth:e,pageHeight:s,rotation:n,innerMargin:Ye._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:t,thickness:e}){t?this._drawingOptions=Ye.getDefaultDrawingOptions():(this._drawingOptions=Ye._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":e}))}serialize(t=!1){if(this.isEmpty())return null;const{lines:e,points:s,rect:n}=this.serializeDraw(t),{_drawingOptions:{"stroke-width":r}}=this,o={annotationType:rt.SIGNATURE,isSignature:!0,areContours:this.#t,color:[0,0,0],thickness:this.#t?0:r,pageIndex:this.pageIndex,rect:n,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return t?(o.paths={lines:e,points:s},o.uuid=this.#i,o.isCopy=!0):o.lines=e,this.#e&&(o.accessibilityData={type:"Figure",alt:this.#e}),o}static deserializeDraw(t,e,s,n,r,o){return o.areContours?Ra.deserialize(t,e,s,n,r,o):Un.deserialize(t,e,s,n,r,o)}static async deserialize(t,e,s){const n=await super.deserialize(t,e,s);return n.#t=t.areContours,n.#e=t.accessibilityData?.alt||"",n.#i=t.uuid,n}}class fv extends J{#t=null;#e=null;#s=null;#i=null;#r=null;#n="";#a=null;#o=!1;#u=null;#l=!1;#d=!1;static _type="stamp";static _editorType=rt.STAMP;constructor(t){super({...t,name:"stampEditor"}),this.#i=t.bitmapUrl,this.#r=t.bitmapFile,this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(t,e){J.initialize(t,e)}static isHandlingMimeForPasting(t){return Aa.includes(t)}static paste(t,e){e.pasteEditor({mode:rt.STAMP},{bitmapFile:t.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){return{type:"stamp",hasAltText:!!this.altTextData?.altText}}static computeTelemetryFinalData(t){const e=t.get("hasAltText");return{hasAltText:e.get(!0)??0,hasNoAltText:e.get(!1)??0}}#h(t,e=!1){if(!t){this.remove();return}this.#t=t.bitmap,e||(this.#e=t.id,this.#l=t.isSvg),t.file&&(this.#n=t.file.name),this.#g()}#f(){if(this.#s=null,this._uiManager.enableWaiting(!1),!!this.#a){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#t){this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#t){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}}async mlGuessAltText(t=null,e=!0){if(this.hasAltTextData())return null;const{mlManager:s}=this._uiManager;if(!s)throw new Error("No ML.");if(!await s.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:n,width:r,height:o}=t||this.copyCanvas(null,null,!0).imageData,a=await s.guess({name:"altText",request:{data:n,width:r,height:o,channels:n.length/(r*o)}});if(!a)throw new Error("No response from the AI service.");if(a.error)throw new Error("Error from the AI service.");if(a.cancel)return null;if(!a.output)throw new Error("No valid response from the AI service.");const l=a.output;return await this.setGuessedAltText(l),e&&!this.hasAltTextData()&&(this.altTextData={alt:l,decorative:!1}),l}#p(){if(this.#e){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(this.#e).then(s=>this.#h(s,!0)).finally(()=>this.#f());return}if(this.#i){const s=this.#i;this.#i=null,this._uiManager.enableWaiting(!0),this.#s=this._uiManager.imageManager.getFromUrl(s).then(n=>this.#h(n)).finally(()=>this.#f());return}if(this.#r){const s=this.#r;this.#r=null,this._uiManager.enableWaiting(!0),this.#s=this._uiManager.imageManager.getFromFile(s).then(n=>this.#h(n)).finally(()=>this.#f());return}const t=document.createElement("input");t.type="file",t.accept=Aa.join(",");const e=this._uiManager._signal;this.#s=new Promise(s=>{t.addEventListener("change",async()=>{if(!t.files||t.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const n=await this._uiManager.imageManager.getFromFile(t.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),this.#h(n)}s()},{signal:e}),t.addEventListener("cancel",()=>{this.remove(),s()},{signal:e})}).finally(()=>this.#f()),t.click()}remove(){this.#e&&(this.#t=null,this._uiManager.imageManager.deleteId(this.#e),this.#a?.remove(),this.#a=null,this.#u&&(clearTimeout(this.#u),this.#u=null)),super.remove()}rebuild(){if(!this.parent){this.#e&&this.#p();return}super.rebuild(),this.div!==null&&(this.#e&&this.#a===null&&this.#p(),this.isAttachedToDOM||this.parent.add(this))}onceAdded(t){this._isDraggable=!0,t&&this.div.focus()}isEmpty(){return!(this.#s||this.#t||this.#i||this.#r||this.#e||this.#o)}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let t,e;return this._isCopy&&(t=this.x,e=this.y),super.render(),this.div.hidden=!0,this.createAltText(),this.#o||(this.#t?this.#g():this.#p()),this._isCopy&&this._moveAfterPaste(t,e),this._uiManager.addShouldRescale(this),this.div}setCanvas(t,e){const{id:s,bitmap:n}=this._uiManager.imageManager.getFromCanvas(t,e);e.remove(),s&&this._uiManager.imageManager.isValidId(s)&&(this.#e=s,n&&(this.#t=n),this.#o=!1,this.#g())}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;this.#u!==null&&clearTimeout(this.#u);const t=200;this.#u=setTimeout(()=>{this.#u=null,this.#m()},t)}#g(){const{div:t}=this;let{width:e,height:s}=this.#t;const[n,r]=this.pageDimensions,o=.75;if(this.width)e=this.width*n,s=this.height*r;else if(e>o*n||s>o*r){const c=Math.min(o*n/e,o*r/s);e*=c,s*=c}const[a,l]=this.parentDimensions;this.setDims(e*a/n,s*l/r),this._uiManager.enableWaiting(!1);const h=this.#a=document.createElement("canvas");h.setAttribute("role","img"),this.addContainer(h),this.width=e/n,this.height=s/r,this._initialOptions?.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(t.hidden=!1),this.#m(),this.#d||(this.parent.addUndoableEditor(this),this.#d=!0),this._reportTelemetry({action:"inserted_image"}),this.#n&&this.div.setAttribute("aria-description",this.#n),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")}copyCanvas(t,e,s=!1){t||(t=224);const{width:n,height:r}=this.#t,o=new ss;let a=this.#t,l=n,h=r,c=null;if(e){if(n>e||r>e){const S=Math.min(e/n,e/r);l=Math.floor(n*S),h=Math.floor(r*S)}c=document.createElement("canvas");const d=c.width=Math.ceil(l*o.sx),f=c.height=Math.ceil(h*o.sy);this.#l||(a=this.#c(d,f));const g=c.getContext("2d");g.filter=this._uiManager.hcmFilter;let p="white",_="#cfcfd8";this._uiManager.hcmFilter!=="none"?_="black":window.matchMedia?.("(prefers-color-scheme: dark)").matches&&(p="#8f8f9d",_="#42414d");const m=15,y=m*o.sx,v=m*o.sy,b=new OffscreenCanvas(y*2,v*2),E=b.getContext("2d");E.fillStyle=p,E.fillRect(0,0,y*2,v*2),E.fillStyle=_,E.fillRect(0,0,y,v),E.fillRect(y,v,y,v),g.fillStyle=g.createPattern(b,"repeat"),g.fillRect(0,0,d,f),g.drawImage(a,0,0,a.width,a.height,0,0,d,f)}let u=null;if(s){let d,f;if(o.symmetric&&a.width<t&&a.height<t)d=a.width,f=a.height;else if(a=this.#t,n>t||r>t){const _=Math.min(t/n,t/r);d=Math.floor(n*_),f=Math.floor(r*_),this.#l||(a=this.#c(d,f))}const p=new OffscreenCanvas(d,f).getContext("2d",{willReadFrequently:!0});p.drawImage(a,0,0,a.width,a.height,0,0,d,f),u={width:d,height:f,data:p.getImageData(0,0,d,f).data}}return{canvas:c,width:l,height:h,imageData:u}}#c(t,e){const{width:s,height:n}=this.#t;let r=s,o=n,a=this.#t;for(;r>2*t||o>2*e;){const l=r,h=o;r>2*t&&(r=r>=16384?Math.floor(r/2)-1:Math.ceil(r/2)),o>2*e&&(o=o>=16384?Math.floor(o/2)-1:Math.ceil(o/2));const c=new OffscreenCanvas(r,o);c.getContext("2d").drawImage(a,0,0,l,h,0,0,r,o),a=c.transferToImageBitmap()}return a}#m(){const[t,e]=this.parentDimensions,{width:s,height:n}=this,r=new ss,o=Math.ceil(s*t*r.sx),a=Math.ceil(n*e*r.sy),l=this.#a;if(!l||l.width===o&&l.height===a)return;l.width=o,l.height=a;const h=this.#l?this.#t:this.#c(o,a),c=l.getContext("2d");c.filter=this._uiManager.hcmFilter,c.drawImage(h,0,0,h.width,h.height,0,0,o,a)}#_(t){if(t){if(this.#l){const n=this._uiManager.imageManager.getSvgUrl(this.#e);if(n)return n}const e=document.createElement("canvas");return{width:e.width,height:e.height}=this.#t,e.getContext("2d").drawImage(this.#t,0,0),e.toDataURL()}if(this.#l){const[e,s]=this.pageDimensions,n=Math.round(this.width*e*Fi.PDF_TO_CSS_UNITS),r=Math.round(this.height*s*Fi.PDF_TO_CSS_UNITS),o=new OffscreenCanvas(n,r);return o.getContext("2d").drawImage(this.#t,0,0,this.#t.width,this.#t.height,0,0,n,r),o.transferToImageBitmap()}return structuredClone(this.#t)}static async deserialize(t,e,s){let n=null,r=!1;if(t instanceof Dd){const{data:{rect:p,rotation:_,id:m,structParent:y,popupRef:v},container:b,parent:{page:{pageNumber:E}},canvas:S}=t;let T,I;S?(delete t.canvas,{id:T,bitmap:I}=s.imageManager.getFromCanvas(b.id,S),S.remove()):(r=!0,t._hasNoCanvas=!0);const k=(await e._structTree.getAriaAttributes(`${el}${m}`))?.get("aria-label")||"";n=t={annotationType:rt.STAMP,bitmapId:T,bitmap:I,pageIndex:E-1,rect:p.slice(0),rotation:_,annotationElementId:m,id:m,deleted:!1,accessibilityData:{decorative:!1,altText:k},isSvg:!1,structParent:y,popupRef:v}}const o=await super.deserialize(t,e,s),{rect:a,bitmap:l,bitmapUrl:h,bitmapId:c,isSvg:u,accessibilityData:d}=t;r?(s.addMissingCanvas(t.id,o),o.#o=!0):c&&s.imageManager.isValidId(c)?(o.#e=c,l&&(o.#t=l)):o.#i=h,o.#l=u;const[f,g]=o.pageDimensions;return o.width=(a[2]-a[0])/f,o.height=(a[3]-a[1])/g,d&&(o.altTextData=d),o._initialData=n,o.#d=!!n,o}serialize(t=!1,e=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const s={annotationType:rt.STAMP,bitmapId:this.#e,pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:this.#l,structTreeParentId:this._structTreeParentId};if(t)return s.bitmapUrl=this.#_(!0),s.accessibilityData=this.serializeAltText(!0),s.isCopy=!0,s;const{decorative:n,altText:r}=this.serializeAltText(!1);if(!n&&r&&(s.accessibilityData={type:"Figure",alt:r}),this.annotationElementId){const a=this.#b(s);if(a.isSame)return null;a.isSameAltText?delete s.accessibilityData:s.accessibilityData.structParent=this._initialData.structParent??-1}if(s.id=this.annotationElementId,e===null)return s;e.stamps||=new Map;const o=this.#l?(s.rect[2]-s.rect[0])*(s.rect[3]-s.rect[1]):null;if(!e.stamps.has(this.#e))e.stamps.set(this.#e,{area:o,serialized:s}),s.bitmap=this.#_(!1);else if(this.#l){const a=e.stamps.get(this.#e);o>a.area&&(a.area=o,a.serialized.bitmap.close(),a.serialized.bitmap=this.#_(!1))}return s}#b(t){const{pageIndex:e,accessibilityData:{altText:s}}=this._initialData,n=t.pageIndex===e,r=(t.accessibilityData?.alt||"")===s;return{isSame:!this._hasBeenMoved&&!this._hasBeenResized&&n&&r,isSameAltText:r}}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}}class ls{#t;#e=!1;#s=null;#i=null;#r=null;#n=new Map;#a=!1;#o=!1;#u=!1;#l=null;#d=null;#h=null;#f=null;#p=null;#g=-1;#c;static _initialized=!1;static#m=new Map([Vt,pl,fv,Ot,Ye].map(t=>[t._editorType,t]));constructor({uiManager:t,pageIndex:e,div:s,structTreeLayer:n,accessibilityManager:r,annotationLayer:o,drawLayer:a,textLayer:l,viewport:h,l10n:c}){const u=[...ls.#m.values()];if(!ls._initialized){ls._initialized=!0;for(const d of u)d.initialize(c,t)}t.registerEditorTypes(u),this.#c=t,this.pageIndex=e,this.div=s,this.#t=r,this.#s=o,this.viewport=h,this.#h=l,this.drawLayer=a,this._structTree=n,this.#c.addLayer(this)}get isEmpty(){return this.#n.size===0}get isInvisible(){return this.isEmpty&&this.#c.getMode()===rt.NONE}updateToolbar(t){this.#c.updateToolbar(t)}updateMode(t=this.#c.getMode()){switch(this.#w(),t){case rt.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case rt.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case rt.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:e}=this.div;for(const s of ls.#m.values())e.toggle(`${s._type}Editing`,t===s._editorType);this.div.hidden=!1}hasTextLayer(t){return t===this.#h?.div}setEditingState(t){this.#c.setEditingState(t)}addCommands(t){this.#c.addCommands(t)}cleanUndoStack(t){this.#c.cleanUndoStack(t)}toggleDrawing(t=!1){this.div.classList.toggle("drawing",!t)}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}toggleAnnotationLayerPointerEvents(t=!1){this.#s?.div.classList.toggle("disabled",!t)}async enable(){this.#u=!0,this.div.tabIndex=0,this.togglePointerEvents(!0),this.#p?.abort(),this.#p=null;const t=new Set;for(const s of this.#n.values())s.enableEditing(),s.show(!0),s.annotationElementId&&(this.#c.removeChangedExistingAnnotation(s),t.add(s.annotationElementId));if(!this.#s){this.#u=!1;return}const e=this.#s.getEditableAnnotations();for(const s of e){if(s.hide(),this.#c.isDeletedAnnotationElement(s.data.id)||t.has(s.data.id))continue;const n=await this.deserialize(s);n&&(this.addOrRebuild(n),n.enableEditing())}this.#u=!1}disable(){if(this.#o=!0,this.div.tabIndex=-1,this.togglePointerEvents(!1),this.#h&&!this.#p){this.#p=new AbortController;const n=this.#c.combinedSignal(this.#p);this.#h.div.addEventListener("pointerdown",r=>{const{clientX:a,clientY:l,timeStamp:h}=r,c=this.#g;if(h-c>500){this.#g=h;return}this.#g=-1;const{classList:u}=this.div;u.toggle("getElements",!0);const d=document.elementsFromPoint(a,l);if(u.toggle("getElements",!1),!this.div.contains(d[0]))return;let f;const g=new RegExp(`^${id}[0-9]+$`);for(const _ of d)if(g.test(_.id)){f=_.id;break}if(!f)return;const p=this.#n.get(f);p?.annotationElementId===null&&(r.stopPropagation(),r.preventDefault(),p.dblclick())},{signal:n,capture:!0})}const t=new Map,e=new Map;for(const n of this.#n.values())if(n.disableEditing(),!!n.annotationElementId){if(n.serialize()!==null){t.set(n.annotationElementId,n);continue}else e.set(n.annotationElementId,n);this.getEditableAnnotation(n.annotationElementId)?.show(),n.remove()}if(this.#s){const n=this.#s.getEditableAnnotations();for(const r of n){const{id:o}=r.data;if(this.#c.isDeletedAnnotationElement(o))continue;let a=e.get(o);if(a){a.resetAnnotationElement(r),a.show(!1),r.show();continue}a=t.get(o),a&&(this.#c.addChangedExistingAnnotation(a),a.renderAnnotationElement(r)&&a.show(!1)),r.show()}}this.#w(),this.isEmpty&&(this.div.hidden=!0);const{classList:s}=this.div;for(const n of ls.#m.values())s.remove(`${n._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),this.#o=!1}getEditableAnnotation(t){return this.#s?.getEditableAnnotation(t)||null}setActiveEditor(t){this.#c.getActive()!==t&&this.#c.setActiveEditor(t)}enableTextSelection(){if(this.div.tabIndex=-1,this.#h?.div&&!this.#f){this.#f=new AbortController;const t=this.#c.combinedSignal(this.#f);this.#h.div.addEventListener("pointerdown",this.#_.bind(this),{signal:t}),this.#h.div.classList.add("highlighting")}}disableTextSelection(){this.div.tabIndex=0,this.#h?.div&&this.#f&&(this.#f.abort(),this.#f=null,this.#h.div.classList.remove("highlighting"))}#_(t){this.#c.unselectAll();const{target:e}=t;if(e===this.#h.div||(e.getAttribute("role")==="img"||e.classList.contains("endOfContent"))&&this.#h.div.contains(e)){const{isMac:s}=Yt.platform;if(t.button!==0||t.ctrlKey&&s)return;this.#c.showAllEditors("highlight",!0,!0),this.#h.div.classList.add("free"),this.toggleDrawing(),Ot.startHighlighting(this,this.#c.direction==="ltr",{target:this.#h.div,x:t.x,y:t.y}),this.#h.div.addEventListener("pointerup",()=>{this.#h.div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:this.#c._signal}),t.preventDefault()}}enableClick(){if(this.#i)return;this.#i=new AbortController;const t=this.#c.combinedSignal(this.#i);this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:t});const e=this.pointerup.bind(this);this.div.addEventListener("pointerup",e,{signal:t}),this.div.addEventListener("pointercancel",e,{signal:t})}disableClick(){this.#i?.abort(),this.#i=null}attach(t){this.#n.set(t.id,t);const{annotationElementId:e}=t;e&&this.#c.isDeletedAnnotationElement(e)&&this.#c.removeDeletedAnnotationElement(t)}detach(t){this.#n.delete(t.id),this.#t?.removePointerInTextLayer(t.contentDiv),!this.#o&&t.annotationElementId&&this.#c.addDeletedAnnotationElement(t)}remove(t){this.detach(t),this.#c.removeEditor(t),t.div.remove(),t.isAttachedToDOM=!1}changeParent(t){t.parent!==this&&(t.parent&&t.annotationElementId&&(this.#c.addDeletedAnnotationElement(t.annotationElementId),J.deleteAnnotationElement(t),t.annotationElementId=null),this.attach(t),t.parent?.detach(t),t.setParent(this),t.div&&t.isAttachedToDOM&&(t.div.remove(),this.div.append(t.div)))}add(t){if(!(t.parent===this&&t.isAttachedToDOM)){if(this.changeParent(t),this.#c.addEditor(t),this.attach(t),!t.isAttachedToDOM){const e=t.render();this.div.append(e),t.isAttachedToDOM=!0}t.fixAndSetPosition(),t.onceAdded(!this.#u),this.#c.addToAnnotationStorage(t),t._reportTelemetry(t.telemetryInitialData)}}moveEditorInDOM(t){if(!t.isAttachedToDOM)return;const{activeElement:e}=document;t.div.contains(e)&&!this.#r&&(t._focusEventsAllowed=!1,this.#r=setTimeout(()=>{this.#r=null,t.div.contains(document.activeElement)?t._focusEventsAllowed=!0:(t.div.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this.#c._signal}),e.focus())},0)),t._structTreeParentId=this.#t?.moveElementInDOM(this.div,t.div,t.contentDiv,!0)}addOrRebuild(t){t.needsToBeRebuilt()?(t.parent||=this,t.rebuild(),t.show()):this.add(t)}addUndoableEditor(t){const e=()=>t._uiManager.rebuild(t),s=()=>{t.remove()};this.addCommands({cmd:e,undo:s,mustExec:!1})}getNextId(){return this.#c.getId()}get#b(){return ls.#m.get(this.#c.getMode())}combinedSignal(t){return this.#c.combinedSignal(t)}#y(t){const e=this.#b;return e?new e.prototype.constructor(t):null}canCreateNewEmptyEditor(){return this.#b?.canCreateNewEmptyEditor()}async pasteEditor(t,e){this.updateToolbar(t),await this.#c.updateMode(t.mode);const{offsetX:s,offsetY:n}=this.#A(),r=this.getNextId(),o=this.#y({parent:this,id:r,x:s,y:n,uiManager:this.#c,isCentered:!0,...e});o&&this.add(o)}async deserialize(t){return await ls.#m.get(t.annotationType??t.annotationEditorType)?.deserialize(t,this,this.#c)||null}createAndAddNewEditor(t,e,s={}){const n=this.getNextId(),r=this.#y({parent:this,id:n,x:t.offsetX,y:t.offsetY,uiManager:this.#c,isCentered:e,...s});return r&&this.add(r),r}#A(){const{x:t,y:e,width:s,height:n}=this.div.getBoundingClientRect(),r=Math.max(0,t),o=Math.max(0,e),a=Math.min(window.innerWidth,t+s),l=Math.min(window.innerHeight,e+n),h=(r+a)/2-t,c=(o+l)/2-e,[u,d]=this.viewport.rotation%180===0?[h,c]:[c,h];return{offsetX:u,offsetY:d}}addNewEditor(t={}){this.createAndAddNewEditor(this.#A(),!0,t)}setSelected(t){this.#c.setSelected(t)}toggleSelected(t){this.#c.toggleSelected(t)}unselect(t){this.#c.unselect(t)}pointerup(t){const{isMac:e}=Yt.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div||!this.#a||(this.#a=!1,this.#b?.isDrawer&&this.#b.supportMultipleDrawings))return;if(!this.#e){this.#e=!0;return}const s=this.#c.getMode();if(s===rt.STAMP||s===rt.SIGNATURE){this.#c.unselectAll();return}this.createAndAddNewEditor(t,!1)}pointerdown(t){if(this.#c.getMode()===rt.HIGHLIGHT&&this.enableTextSelection(),this.#a){this.#a=!1;return}const{isMac:e}=Yt.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div)return;if(this.#a=!0,this.#b?.isDrawer){this.startDrawingSession(t);return}const s=this.#c.getActive();this.#e=!s||s.isEmpty()}startDrawingSession(t){if(this.div.focus({preventScroll:!0}),this.#l){this.#b.startDrawing(this,this.#c,!1,t);return}this.#c.setCurrentDrawingSession(this),this.#l=new AbortController;const e=this.#c.combinedSignal(this.#l);this.div.addEventListener("blur",({relatedTarget:s})=>{s&&!this.div.contains(s)&&(this.#d=null,this.commitOrRemove())},{signal:e}),this.#b.startDrawing(this,this.#c,!1,t)}pause(t){if(t){const{activeElement:e}=document;this.div.contains(e)&&(this.#d=e);return}this.#d&&setTimeout(()=>{this.#d?.focus(),this.#d=null},0)}endDrawingSession(t=!1){return this.#l?(this.#c.setCurrentDrawingSession(null),this.#l.abort(),this.#l=null,this.#d=null,this.#b.endDrawing(t)):null}findNewParent(t,e,s){const n=this.#c.findParent(e,s);return n===null||n===this?!1:(n.changeParent(t),!0)}commitOrRemove(){return this.#l?(this.endDrawingSession(),!0):!1}onScaleChanging(){this.#l&&this.#b.onScaleChangingWhenDrawing(this)}destroy(){this.commitOrRemove(),this.#c.getActive()?.parent===this&&(this.#c.commitOrRemove(),this.#c.setActiveEditor(null)),this.#r&&(clearTimeout(this.#r),this.#r=null);for(const t of this.#n.values())this.#t?.removePointerInTextLayer(t.contentDiv),t.setParent(null),t.isAttachedToDOM=!1,t.div.remove();this.div=null,this.#n.clear(),this.#c.removeLayer(this)}#w(){for(const t of this.#n.values())t.isEmpty()&&t.remove()}render({viewport:t}){this.viewport=t,Zs(this.div,t);for(const e of this.#c.getEditors(this.pageIndex))this.add(e),e.rebuild();this.updateMode()}update({viewport:t}){this.#c.commitOrRemove(),this.#w();const e=this.viewport.rotation,s=t.rotation;if(this.viewport=t,Zs(this.div,{rotation:s}),e!==s)for(const n of this.#n.values())n.rotate(s)}get pageDimensions(){const{pageWidth:t,pageHeight:e}=this.viewport.rawDims;return[t,e]}get scale(){return this.#c.viewParameters.realScale}}class Wt{#t=null;#e=new Map;#s=new Map;static#i=0;constructor({pageIndex:t}){this.pageIndex=t}setParent(t){if(!this.#t){this.#t=t;return}if(this.#t!==t){if(this.#e.size>0)for(const e of this.#e.values())e.remove(),t.append(e);this.#t=t}}static get _svgFactory(){return ut(this,"_svgFactory",new Or)}static#r(t,[e,s,n,r]){const{style:o}=t;o.top=`${100*s}%`,o.left=`${100*e}%`,o.width=`${100*n}%`,o.height=`${100*r}%`}#n(){const t=Wt._svgFactory.create(1,1,!0);return this.#t.append(t),t.setAttribute("aria-hidden",!0),t}#a(t,e){const s=Wt._svgFactory.createElement("clipPath");t.append(s);const n=`clip_${e}`;s.setAttribute("id",n),s.setAttribute("clipPathUnits","objectBoundingBox");const r=Wt._svgFactory.createElement("use");return s.append(r),r.setAttribute("href",`#${e}`),r.classList.add("clip"),n}#o(t,e){for(const[s,n]of Object.entries(e))n===null?t.removeAttribute(s):t.setAttribute(s,n)}draw(t,e=!1,s=!1){const n=Wt.#i++,r=this.#n(),o=Wt._svgFactory.createElement("defs");r.append(o);const a=Wt._svgFactory.createElement("path");o.append(a);const l=`path_p${this.pageIndex}_${n}`;a.setAttribute("id",l),a.setAttribute("vector-effect","non-scaling-stroke"),e&&this.#s.set(n,a);const h=s?this.#a(o,l):null,c=Wt._svgFactory.createElement("use");return r.append(c),c.setAttribute("href",`#${l}`),this.updateProperties(r,t),this.#e.set(n,r),{id:n,clipPathId:`url(#${h})`}}drawOutline(t,e){const s=Wt.#i++,n=this.#n(),r=Wt._svgFactory.createElement("defs");n.append(r);const o=Wt._svgFactory.createElement("path");r.append(o);const a=`path_p${this.pageIndex}_${s}`;o.setAttribute("id",a),o.setAttribute("vector-effect","non-scaling-stroke");let l;if(e){const u=Wt._svgFactory.createElement("mask");r.append(u),l=`mask_p${this.pageIndex}_${s}`,u.setAttribute("id",l),u.setAttribute("maskUnits","objectBoundingBox");const d=Wt._svgFactory.createElement("rect");u.append(d),d.setAttribute("width","1"),d.setAttribute("height","1"),d.setAttribute("fill","white");const f=Wt._svgFactory.createElement("use");u.append(f),f.setAttribute("href",`#${a}`),f.setAttribute("stroke","none"),f.setAttribute("fill","black"),f.setAttribute("fill-rule","nonzero"),f.classList.add("mask")}const h=Wt._svgFactory.createElement("use");n.append(h),h.setAttribute("href",`#${a}`),l&&h.setAttribute("mask",`url(#${l})`);const c=h.cloneNode();return n.append(c),h.classList.add("mainOutline"),c.classList.add("secondaryOutline"),this.updateProperties(n,t),this.#e.set(s,n),s}finalizeDraw(t,e){this.#s.delete(t),this.updateProperties(t,e)}updateProperties(t,e){if(!e)return;const{root:s,bbox:n,rootClass:r,path:o}=e,a=typeof t=="number"?this.#e.get(t):t;if(a){if(s&&this.#o(a,s),n&&Wt.#r(a,n),r){const{classList:l}=a;for(const[h,c]of Object.entries(r))l.toggle(h,c)}if(o){const h=a.firstChild.firstChild;this.#o(h,o)}}}updateParent(t,e){if(e===this)return;const s=this.#e.get(t);s&&(e.#t.append(s),this.#e.delete(t),e.#e.set(t,s))}remove(t){this.#s.delete(t),this.#t!==null&&(this.#e.get(t).remove(),this.#e.delete(t))}destroy(){this.#t=null;for(const t of this.#e.values())t.remove();this.#e.clear(),this.#s.clear()}}globalThis._pdfjsTestingUtils={HighlightOutliner:Ta};globalThis.pdfjsLib={AbortException:Is,AnnotationEditorLayer:ls,AnnotationEditorParamsType:ft,AnnotationEditorType:rt,AnnotationEditorUIManager:Ls,AnnotationLayer:fl,AnnotationMode:Ts,AnnotationType:$t,build:zb,ColorPicker:Re,createValidAbsoluteUrl:nd,DOMSVGFactory:Or,DrawLayer:Wt,FeatureTest:Yt,fetchData:Bn,getDocument:Cd,getFilenameFromUrl:F_,getPdfFilenameFromUrl:$_,getUuid:ad,getXfaPageViewport:H_,GlobalWorkerOptions:Mi,ImageKind:_r,InvalidPDFException:ya,isDataScheme:eo,isPdfFile:il,isValidExplicitDest:Q_,MathClamp:re,noContextMenu:Be,normalizeUnicode:O_,OPS:Mr,OutputScale:ss,PasswordResponses:C_,PDFDataRangeTransport:Td,PDFDateString:cd,PDFWorker:Ln,PermissionFlag:S_,PixelsPerInch:Fi,RenderingCancelledException:sl,ResponseException:kr,setLayerDimensions:Zs,shadow:ut,SignatureExtractor:mi,stopEvent:Bt,SupportedImageMimeTypes:Aa,TextLayer:ie,TouchManager:so,updateUrlHash:rd,Util:Y,VerbosityLevel:Jr,version:Wb,XfaLayer:Pd};function pv(i){return new Worker("/sora/assets/pdf.worker.min-BycW1Glc.js",{type:"module",name:i?.name})}const gv=Dn({__name:"PdfViewer",props:{url:{},dark:{type:Boolean}},setup(i){Mi.workerPort=new pv;const t=i,e=Ys(null);async function s(){const n=e.value;if(!n)return;n.innerHTML="";const o=await Cd(t.url).promise;for(let a=1;a<=o.numPages;a++){const l=await o.getPage(a),c=l.getViewport({scale:2}),u=document.createElement("canvas"),d=u.getContext("2d");u.width=c.width,u.height=c.height,u.style.width="100%",u.style.height="auto";const f={canvasContext:d,viewport:c};await l.render(f).promise,n.appendChild(u)}}return Nn(s),Ii(()=>t.url,s),(n,r)=>(jt(),Qt("div",{class:Oi(["pdf-canvas-wrapper",{dark:t.dark}])},[lt("div",{ref_key:"container",ref:e,class:"pdf-container"},null,512)],2))}}),mv={class:"container"},_v={class:"keywords"},bv={class:"keyword-group"},vv=["onClick"],yv={class:"documents"},Av=["onClick"],wv={class:"document-title"},Ev={class:"doc-keywords"},Sv=["onClick"],Cv={key:1,class:"no-results"},Tv={key:0,class:"pdf-overlay"},xv={class:"pdf-header-bar bg-jessa-top d-flex justify-content-between align-items-center px-3 py-2"},Rv={key:0},Pv={key:1},Iv={style:{"flex-grow":"1","overflow-y":"auto"}},Lv={class:"pdf-wrapper"},Mv=Dn({__name:"SoraHome",setup(i){const t=Ys([]),e=Ys(new Set);Nn(()=>{const c="/sora/";t.value=E_.map(u=>({...u,url:c.replace(/\/$/,"")+u.url}))}),_e(()=>{const c=new Set;return t.value.forEach(u=>{u.keywords.forEach(d=>c.add(d))}),Array.from(c).sort((u,d)=>u.localeCompare(d))});const s=_e(()=>e.value.size===0?t.value:t.value.filter(c=>Array.from(e.value).every(u=>c.keywords.includes(u))));function n(c){e.value.has(c)?e.value.delete(c):e.value.add(c),e.value=new Set(e.value)}const r=_e(()=>{const c=s.value,u=new Set;return c.forEach(d=>{d.keywords.forEach(f=>u.add(f))}),Array.from(u).sort((d,f)=>d.localeCompare(f))});function o(){e.value.clear(),e.value=new Set}const a=Ys(null);function l(c){a.value=c,console.log("doc url: ",a.value.url)}function h(){a.value=null}return(c,u)=>(jt(),Qt(me,null,[lt("div",mv,[lt("div",_v,[u[1]||(u[1]=lt("h2",null,"Sleutelwoorden",-1)),e.value.size>0&&r.value.length>1?(jt(),Qt("button",{key:0,class:"keyword clear",onClick:o}," Wis selectie ")):Zl("",!0),lt("div",bv,[(jt(!0),Qt(me,null,Ao(r.value,d=>(jt(),Qt("button",{key:d,class:Oi(["keyword",{active:e.value.has(d)}]),onClick:f=>n(d)},Ci(d),11,vv))),128))])]),lt("div",yv,[u[2]||(u[2]=lt("h2",null,"Bestanden",-1)),s.value.length>0?(jt(!0),Qt(me,{key:0},Ao(s.value,d=>(jt(),Qt("div",{key:d.naam,class:"document"},[lt("div",{class:"document-card",onClick:f=>l(d),role:"button",tabindex:"0"},[lt("div",wv,Ci(d.naam),1),lt("div",Ev,[(jt(!0),Qt(me,null,Ao([...d.keywords].sort((f,g)=>f.localeCompare(g)),f=>(jt(),Qt("span",{class:Oi(["keyword",{active:e.value.has(f)}]),key:f,onClick:fc(g=>n(f),["stop"])},Ci(f),11,Sv))),128))])],8,Av)]))),128)):(jt(),Qt("p",Cv,"Geen resultaten gevonden."))])]),a.value?(jt(),Qt("div",Tv,[lt("div",xv,[lt("a",{class:"navbar-brand text-white m-0",href:"#",onClick:fc(h,["prevent"])},"SORA"),lt("button",{class:"btn btn-light",onClick:u[0]||(u[0]=(...d)=>Ut(Lr)&&Ut(Lr)(...d))},[Ut(Xs)?(jt(),Qt("span",Rv,"Lichte modus")):(jt(),Qt("span",Pv,"Donkere modus"))]),lt("button",{class:"btn btn-danger",onClick:h},"Sluit")]),lt("div",Iv,[lt("div",Lv,[Zt(gv,{url:a.value.url,dark:Ut(Xs)},null,8,["url","dark"])])])])):Zl("",!0)],64))}}),kv=(i,t)=>{const e=i.__vccOpts||i;for(const[s,n]of t)e[s]=n;return e},Ov=kv(Mv,[["__scopeId","data-v-f720b5a6"]]),Dv=[{path:"/",name:"home",component:Ov}],Nv=A_({history:Xm("/sora/"),routes:Dv});var le="top",Ee="bottom",Se="right",ce="left",ro="auto",zi=[le,Ee,Se,ce],ei="start",$i="end",$d="clippingParents",_l="viewport",_i="popper",Bd="reference",Pa=zi.reduce(function(i,t){return i.concat([t+"-"+ei,t+"-"+$i])},[]),bl=[].concat(zi,[ro]).reduce(function(i,t){return i.concat([t,t+"-"+ei,t+"-"+$i])},[]),Hd="beforeRead",Vd="read",jd="afterRead",Ud="beforeMain",Wd="main",zd="afterMain",Gd="beforeWrite",Kd="write",qd="afterWrite",Yd=[Hd,Vd,jd,Ud,Wd,zd,Gd,Kd,qd];function is(i){return i?(i.nodeName||"").toLowerCase():null}function Ce(i){if(i==null)return window;if(i.toString()!=="[object Window]"){var t=i.ownerDocument;return t&&t.defaultView||window}return i}function si(i){var t=Ce(i).Element;return i instanceof t||i instanceof Element}function Le(i){var t=Ce(i).HTMLElement;return i instanceof t||i instanceof HTMLElement}function vl(i){if(typeof ShadowRoot>"u")return!1;var t=Ce(i).ShadowRoot;return i instanceof t||i instanceof ShadowRoot}function Fv(i){var t=i.state;Object.keys(t.elements).forEach(function(e){var s=t.styles[e]||{},n=t.attributes[e]||{},r=t.elements[e];!Le(r)||!is(r)||(Object.assign(r.style,s),Object.keys(n).forEach(function(o){var a=n[o];a===!1?r.removeAttribute(o):r.setAttribute(o,a===!0?"":a)}))})}function $v(i){var t=i.state,e={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,e.popper),t.styles=e,t.elements.arrow&&Object.assign(t.elements.arrow.style,e.arrow),function(){Object.keys(t.elements).forEach(function(s){var n=t.elements[s],r=t.attributes[s]||{},o=Object.keys(t.styles.hasOwnProperty(s)?t.styles[s]:e[s]),a=o.reduce(function(l,h){return l[h]="",l},{});!Le(n)||!is(n)||(Object.assign(n.style,a),Object.keys(r).forEach(function(l){n.removeAttribute(l)}))})}}const yl={name:"applyStyles",enabled:!0,phase:"write",fn:Fv,effect:$v,requires:["computeStyles"]};function Ze(i){return i.split("-")[0]}var Qs=Math.max,Dr=Math.min,Bi=Math.round;function Ia(){var i=navigator.userAgentData;return i!=null&&i.brands&&Array.isArray(i.brands)?i.brands.map(function(t){return t.brand+"/"+t.version}).join(" "):navigator.userAgent}function Xd(){return!/^((?!chrome|android).)*safari/i.test(Ia())}function Hi(i,t,e){t===void 0&&(t=!1),e===void 0&&(e=!1);var s=i.getBoundingClientRect(),n=1,r=1;t&&Le(i)&&(n=i.offsetWidth>0&&Bi(s.width)/i.offsetWidth||1,r=i.offsetHeight>0&&Bi(s.height)/i.offsetHeight||1);var o=si(i)?Ce(i):window,a=o.visualViewport,l=!Xd()&&e,h=(s.left+(l&&a?a.offsetLeft:0))/n,c=(s.top+(l&&a?a.offsetTop:0))/r,u=s.width/n,d=s.height/r;return{width:u,height:d,top:c,right:h+u,bottom:c+d,left:h,x:h,y:c}}function Al(i){var t=Hi(i),e=i.offsetWidth,s=i.offsetHeight;return Math.abs(t.width-e)<=1&&(e=t.width),Math.abs(t.height-s)<=1&&(s=t.height),{x:i.offsetLeft,y:i.offsetTop,width:e,height:s}}function Qd(i,t){var e=t.getRootNode&&t.getRootNode();if(i.contains(t))return!0;if(e&&vl(e)){var s=t;do{if(s&&i.isSameNode(s))return!0;s=s.parentNode||s.host}while(s)}return!1}function _s(i){return Ce(i).getComputedStyle(i)}function Bv(i){return["table","td","th"].indexOf(is(i))>=0}function Ns(i){return((si(i)?i.ownerDocument:i.document)||window.document).documentElement}function oo(i){return is(i)==="html"?i:i.assignedSlot||i.parentNode||(vl(i)?i.host:null)||Ns(i)}function Zc(i){return!Le(i)||_s(i).position==="fixed"?null:i.offsetParent}function Hv(i){var t=/firefox/i.test(Ia()),e=/Trident/i.test(Ia());if(e&&Le(i)){var s=_s(i);if(s.position==="fixed")return null}var n=oo(i);for(vl(n)&&(n=n.host);Le(n)&&["html","body"].indexOf(is(n))<0;){var r=_s(n);if(r.transform!=="none"||r.perspective!=="none"||r.contain==="paint"||["transform","perspective"].indexOf(r.willChange)!==-1||t&&r.willChange==="filter"||t&&r.filter&&r.filter!=="none")return n;n=n.parentNode}return null}function Wn(i){for(var t=Ce(i),e=Zc(i);e&&Bv(e)&&_s(e).position==="static";)e=Zc(e);return e&&(is(e)==="html"||is(e)==="body"&&_s(e).position==="static")?t:e||Hv(i)||t}function wl(i){return["top","bottom"].indexOf(i)>=0?"x":"y"}function yn(i,t,e){return Qs(i,Dr(t,e))}function Vv(i,t,e){var s=yn(i,t,e);return s>e?e:s}function Jd(){return{top:0,right:0,bottom:0,left:0}}function Zd(i){return Object.assign({},Jd(),i)}function tf(i,t){return t.reduce(function(e,s){return e[s]=i,e},{})}var jv=function(t,e){return t=typeof t=="function"?t(Object.assign({},e.rects,{placement:e.placement})):t,Zd(typeof t!="number"?t:tf(t,zi))};function Uv(i){var t,e=i.state,s=i.name,n=i.options,r=e.elements.arrow,o=e.modifiersData.popperOffsets,a=Ze(e.placement),l=wl(a),h=[ce,Se].indexOf(a)>=0,c=h?"height":"width";if(!(!r||!o)){var u=jv(n.padding,e),d=Al(r),f=l==="y"?le:ce,g=l==="y"?Ee:Se,p=e.rects.reference[c]+e.rects.reference[l]-o[l]-e.rects.popper[c],_=o[l]-e.rects.reference[l],m=Wn(r),y=m?l==="y"?m.clientHeight||0:m.clientWidth||0:0,v=p/2-_/2,b=u[f],E=y-d[c]-u[g],S=y/2-d[c]/2+v,T=yn(b,S,E),I=l;e.modifiersData[s]=(t={},t[I]=T,t.centerOffset=T-S,t)}}function Wv(i){var t=i.state,e=i.options,s=e.element,n=s===void 0?"[data-popper-arrow]":s;n!=null&&(typeof n=="string"&&(n=t.elements.popper.querySelector(n),!n)||Qd(t.elements.popper,n)&&(t.elements.arrow=n))}const ef={name:"arrow",enabled:!0,phase:"main",fn:Uv,effect:Wv,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Vi(i){return i.split("-")[1]}var zv={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Gv(i,t){var e=i.x,s=i.y,n=t.devicePixelRatio||1;return{x:Bi(e*n)/n||0,y:Bi(s*n)/n||0}}function th(i){var t,e=i.popper,s=i.popperRect,n=i.placement,r=i.variation,o=i.offsets,a=i.position,l=i.gpuAcceleration,h=i.adaptive,c=i.roundOffsets,u=i.isFixed,d=o.x,f=d===void 0?0:d,g=o.y,p=g===void 0?0:g,_=typeof c=="function"?c({x:f,y:p}):{x:f,y:p};f=_.x,p=_.y;var m=o.hasOwnProperty("x"),y=o.hasOwnProperty("y"),v=ce,b=le,E=window;if(h){var S=Wn(e),T="clientHeight",I="clientWidth";if(S===Ce(e)&&(S=Ns(e),_s(S).position!=="static"&&a==="absolute"&&(T="scrollHeight",I="scrollWidth")),S=S,n===le||(n===ce||n===Se)&&r===$i){b=Ee;var k=u&&S===E&&E.visualViewport?E.visualViewport.height:S[T];p-=k-s.height,p*=l?1:-1}if(n===ce||(n===le||n===Ee)&&r===$i){v=Se;var $=u&&S===E&&E.visualViewport?E.visualViewport.width:S[I];f-=$-s.width,f*=l?1:-1}}var B=Object.assign({position:a},h&&zv),Z=c===!0?Gv({x:f,y:p},Ce(e)):{x:f,y:p};if(f=Z.x,p=Z.y,l){var X;return Object.assign({},B,(X={},X[b]=y?"0":"",X[v]=m?"0":"",X.transform=(E.devicePixelRatio||1)<=1?"translate("+f+"px, "+p+"px)":"translate3d("+f+"px, "+p+"px, 0)",X))}return Object.assign({},B,(t={},t[b]=y?p+"px":"",t[v]=m?f+"px":"",t.transform="",t))}function Kv(i){var t=i.state,e=i.options,s=e.gpuAcceleration,n=s===void 0?!0:s,r=e.adaptive,o=r===void 0?!0:r,a=e.roundOffsets,l=a===void 0?!0:a,h={placement:Ze(t.placement),variation:Vi(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:n,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,th(Object.assign({},h,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:o,roundOffsets:l})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,th(Object.assign({},h,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}const El={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:Kv,data:{}};var ar={passive:!0};function qv(i){var t=i.state,e=i.instance,s=i.options,n=s.scroll,r=n===void 0?!0:n,o=s.resize,a=o===void 0?!0:o,l=Ce(t.elements.popper),h=[].concat(t.scrollParents.reference,t.scrollParents.popper);return r&&h.forEach(function(c){c.addEventListener("scroll",e.update,ar)}),a&&l.addEventListener("resize",e.update,ar),function(){r&&h.forEach(function(c){c.removeEventListener("scroll",e.update,ar)}),a&&l.removeEventListener("resize",e.update,ar)}}const Sl={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:qv,data:{}};var Yv={left:"right",right:"left",bottom:"top",top:"bottom"};function yr(i){return i.replace(/left|right|bottom|top/g,function(t){return Yv[t]})}var Xv={start:"end",end:"start"};function eh(i){return i.replace(/start|end/g,function(t){return Xv[t]})}function Cl(i){var t=Ce(i),e=t.pageXOffset,s=t.pageYOffset;return{scrollLeft:e,scrollTop:s}}function Tl(i){return Hi(Ns(i)).left+Cl(i).scrollLeft}function Qv(i,t){var e=Ce(i),s=Ns(i),n=e.visualViewport,r=s.clientWidth,o=s.clientHeight,a=0,l=0;if(n){r=n.width,o=n.height;var h=Xd();(h||!h&&t==="fixed")&&(a=n.offsetLeft,l=n.offsetTop)}return{width:r,height:o,x:a+Tl(i),y:l}}function Jv(i){var t,e=Ns(i),s=Cl(i),n=(t=i.ownerDocument)==null?void 0:t.body,r=Qs(e.scrollWidth,e.clientWidth,n?n.scrollWidth:0,n?n.clientWidth:0),o=Qs(e.scrollHeight,e.clientHeight,n?n.scrollHeight:0,n?n.clientHeight:0),a=-s.scrollLeft+Tl(i),l=-s.scrollTop;return _s(n||e).direction==="rtl"&&(a+=Qs(e.clientWidth,n?n.clientWidth:0)-r),{width:r,height:o,x:a,y:l}}function xl(i){var t=_s(i),e=t.overflow,s=t.overflowX,n=t.overflowY;return/auto|scroll|overlay|hidden/.test(e+n+s)}function sf(i){return["html","body","#document"].indexOf(is(i))>=0?i.ownerDocument.body:Le(i)&&xl(i)?i:sf(oo(i))}function An(i,t){var e;t===void 0&&(t=[]);var s=sf(i),n=s===((e=i.ownerDocument)==null?void 0:e.body),r=Ce(s),o=n?[r].concat(r.visualViewport||[],xl(s)?s:[]):s,a=t.concat(o);return n?a:a.concat(An(oo(o)))}function La(i){return Object.assign({},i,{left:i.x,top:i.y,right:i.x+i.width,bottom:i.y+i.height})}function Zv(i,t){var e=Hi(i,!1,t==="fixed");return e.top=e.top+i.clientTop,e.left=e.left+i.clientLeft,e.bottom=e.top+i.clientHeight,e.right=e.left+i.clientWidth,e.width=i.clientWidth,e.height=i.clientHeight,e.x=e.left,e.y=e.top,e}function sh(i,t,e){return t===_l?La(Qv(i,e)):si(t)?Zv(t,e):La(Jv(Ns(i)))}function ty(i){var t=An(oo(i)),e=["absolute","fixed"].indexOf(_s(i).position)>=0,s=e&&Le(i)?Wn(i):i;return si(s)?t.filter(function(n){return si(n)&&Qd(n,s)&&is(n)!=="body"}):[]}function ey(i,t,e,s){var n=t==="clippingParents"?ty(i):[].concat(t),r=[].concat(n,[e]),o=r[0],a=r.reduce(function(l,h){var c=sh(i,h,s);return l.top=Qs(c.top,l.top),l.right=Dr(c.right,l.right),l.bottom=Dr(c.bottom,l.bottom),l.left=Qs(c.left,l.left),l},sh(i,o,s));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function nf(i){var t=i.reference,e=i.element,s=i.placement,n=s?Ze(s):null,r=s?Vi(s):null,o=t.x+t.width/2-e.width/2,a=t.y+t.height/2-e.height/2,l;switch(n){case le:l={x:o,y:t.y-e.height};break;case Ee:l={x:o,y:t.y+t.height};break;case Se:l={x:t.x+t.width,y:a};break;case ce:l={x:t.x-e.width,y:a};break;default:l={x:t.x,y:t.y}}var h=n?wl(n):null;if(h!=null){var c=h==="y"?"height":"width";switch(r){case ei:l[h]=l[h]-(t[c]/2-e[c]/2);break;case $i:l[h]=l[h]+(t[c]/2-e[c]/2);break}}return l}function ji(i,t){t===void 0&&(t={});var e=t,s=e.placement,n=s===void 0?i.placement:s,r=e.strategy,o=r===void 0?i.strategy:r,a=e.boundary,l=a===void 0?$d:a,h=e.rootBoundary,c=h===void 0?_l:h,u=e.elementContext,d=u===void 0?_i:u,f=e.altBoundary,g=f===void 0?!1:f,p=e.padding,_=p===void 0?0:p,m=Zd(typeof _!="number"?_:tf(_,zi)),y=d===_i?Bd:_i,v=i.rects.popper,b=i.elements[g?y:d],E=ey(si(b)?b:b.contextElement||Ns(i.elements.popper),l,c,o),S=Hi(i.elements.reference),T=nf({reference:S,element:v,placement:n}),I=La(Object.assign({},v,T)),k=d===_i?I:S,$={top:E.top-k.top+m.top,bottom:k.bottom-E.bottom+m.bottom,left:E.left-k.left+m.left,right:k.right-E.right+m.right},B=i.modifiersData.offset;if(d===_i&&B){var Z=B[n];Object.keys($).forEach(function(X){var it=[Se,Ee].indexOf(X)>=0?1:-1,mt=[le,Ee].indexOf(X)>=0?"y":"x";$[X]+=Z[mt]*it})}return $}function sy(i,t){t===void 0&&(t={});var e=t,s=e.placement,n=e.boundary,r=e.rootBoundary,o=e.padding,a=e.flipVariations,l=e.allowedAutoPlacements,h=l===void 0?bl:l,c=Vi(s),u=c?a?Pa:Pa.filter(function(g){return Vi(g)===c}):zi,d=u.filter(function(g){return h.indexOf(g)>=0});d.length===0&&(d=u);var f=d.reduce(function(g,p){return g[p]=ji(i,{placement:p,boundary:n,rootBoundary:r,padding:o})[Ze(p)],g},{});return Object.keys(f).sort(function(g,p){return f[g]-f[p]})}function iy(i){if(Ze(i)===ro)return[];var t=yr(i);return[eh(i),t,eh(t)]}function ny(i){var t=i.state,e=i.options,s=i.name;if(!t.modifiersData[s]._skip){for(var n=e.mainAxis,r=n===void 0?!0:n,o=e.altAxis,a=o===void 0?!0:o,l=e.fallbackPlacements,h=e.padding,c=e.boundary,u=e.rootBoundary,d=e.altBoundary,f=e.flipVariations,g=f===void 0?!0:f,p=e.allowedAutoPlacements,_=t.options.placement,m=Ze(_),y=m===_,v=l||(y||!g?[yr(_)]:iy(_)),b=[_].concat(v).reduce(function(Nt,Lt){return Nt.concat(Ze(Lt)===ro?sy(t,{placement:Lt,boundary:c,rootBoundary:u,padding:h,flipVariations:g,allowedAutoPlacements:p}):Lt)},[]),E=t.rects.reference,S=t.rects.popper,T=new Map,I=!0,k=b[0],$=0;$<b.length;$++){var B=b[$],Z=Ze(B),X=Vi(B)===ei,it=[le,Ee].indexOf(Z)>=0,mt=it?"width":"height",N=ji(t,{placement:B,boundary:c,rootBoundary:u,altBoundary:d,padding:h}),O=it?X?Se:ce:X?Ee:le;E[mt]>S[mt]&&(O=yr(O));var et=yr(O),wt=[];if(r&&wt.push(N[Z]<=0),a&&wt.push(N[O]<=0,N[et]<=0),wt.every(function(Nt){return Nt})){k=B,I=!1;break}T.set(B,wt)}if(I)for(var kt=g?3:1,Tt=function(Lt){var Et=b.find(function(x){var H=T.get(x);if(H)return H.slice(0,Lt).every(function(j){return j})});if(Et)return k=Et,"break"},ct=kt;ct>0;ct--){var pt=Tt(ct);if(pt==="break")break}t.placement!==k&&(t.modifiersData[s]._skip=!0,t.placement=k,t.reset=!0)}}const rf={name:"flip",enabled:!0,phase:"main",fn:ny,requiresIfExists:["offset"],data:{_skip:!1}};function ih(i,t,e){return e===void 0&&(e={x:0,y:0}),{top:i.top-t.height-e.y,right:i.right-t.width+e.x,bottom:i.bottom-t.height+e.y,left:i.left-t.width-e.x}}function nh(i){return[le,Se,Ee,ce].some(function(t){return i[t]>=0})}function ry(i){var t=i.state,e=i.name,s=t.rects.reference,n=t.rects.popper,r=t.modifiersData.preventOverflow,o=ji(t,{elementContext:"reference"}),a=ji(t,{altBoundary:!0}),l=ih(o,s),h=ih(a,n,r),c=nh(l),u=nh(h);t.modifiersData[e]={referenceClippingOffsets:l,popperEscapeOffsets:h,isReferenceHidden:c,hasPopperEscaped:u},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":c,"data-popper-escaped":u})}const of={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:ry};function oy(i,t,e){var s=Ze(i),n=[ce,le].indexOf(s)>=0?-1:1,r=typeof e=="function"?e(Object.assign({},t,{placement:i})):e,o=r[0],a=r[1];return o=o||0,a=(a||0)*n,[ce,Se].indexOf(s)>=0?{x:a,y:o}:{x:o,y:a}}function ay(i){var t=i.state,e=i.options,s=i.name,n=e.offset,r=n===void 0?[0,0]:n,o=bl.reduce(function(c,u){return c[u]=oy(u,t.rects,r),c},{}),a=o[t.placement],l=a.x,h=a.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=l,t.modifiersData.popperOffsets.y+=h),t.modifiersData[s]=o}const af={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:ay};function ly(i){var t=i.state,e=i.name;t.modifiersData[e]=nf({reference:t.rects.reference,element:t.rects.popper,placement:t.placement})}const Rl={name:"popperOffsets",enabled:!0,phase:"read",fn:ly,data:{}};function cy(i){return i==="x"?"y":"x"}function hy(i){var t=i.state,e=i.options,s=i.name,n=e.mainAxis,r=n===void 0?!0:n,o=e.altAxis,a=o===void 0?!1:o,l=e.boundary,h=e.rootBoundary,c=e.altBoundary,u=e.padding,d=e.tether,f=d===void 0?!0:d,g=e.tetherOffset,p=g===void 0?0:g,_=ji(t,{boundary:l,rootBoundary:h,padding:u,altBoundary:c}),m=Ze(t.placement),y=Vi(t.placement),v=!y,b=wl(m),E=cy(b),S=t.modifiersData.popperOffsets,T=t.rects.reference,I=t.rects.popper,k=typeof p=="function"?p(Object.assign({},t.rects,{placement:t.placement})):p,$=typeof k=="number"?{mainAxis:k,altAxis:k}:Object.assign({mainAxis:0,altAxis:0},k),B=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,Z={x:0,y:0};if(S){if(r){var X,it=b==="y"?le:ce,mt=b==="y"?Ee:Se,N=b==="y"?"height":"width",O=S[b],et=O+_[it],wt=O-_[mt],kt=f?-I[N]/2:0,Tt=y===ei?T[N]:I[N],ct=y===ei?-I[N]:-T[N],pt=t.elements.arrow,Nt=f&&pt?Al(pt):{width:0,height:0},Lt=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:Jd(),Et=Lt[it],x=Lt[mt],H=yn(0,T[N],Nt[N]),j=v?T[N]/2-kt-H-Et-$.mainAxis:Tt-H-Et-$.mainAxis,G=v?-T[N]/2+kt+H+x+$.mainAxis:ct+H+x+$.mainAxis,dt=t.elements.arrow&&Wn(t.elements.arrow),A=dt?b==="y"?dt.clientTop||0:dt.clientLeft||0:0,w=(X=B?.[b])!=null?X:0,C=O+j-w-A,R=O+G-w,L=yn(f?Dr(et,C):et,O,f?Qs(wt,R):wt);S[b]=L,Z[b]=L-O}if(a){var P,U=b==="x"?le:ce,V=b==="x"?Ee:Se,F=S[E],D=E==="y"?"height":"width",q=F+_[U],W=F-_[V],K=[le,ce].indexOf(m)!==-1,st=(P=B?.[E])!=null?P:0,ht=K?q:F-T[D]-I[D]-st+$.altAxis,yt=K?F+T[D]+I[D]-st-$.altAxis:W,gt=f&&K?Vv(ht,F,yt):yn(f?ht:q,F,f?yt:W);S[E]=gt,Z[E]=gt-F}t.modifiersData[s]=Z}}const lf={name:"preventOverflow",enabled:!0,phase:"main",fn:hy,requiresIfExists:["offset"]};function uy(i){return{scrollLeft:i.scrollLeft,scrollTop:i.scrollTop}}function dy(i){return i===Ce(i)||!Le(i)?Cl(i):uy(i)}function fy(i){var t=i.getBoundingClientRect(),e=Bi(t.width)/i.offsetWidth||1,s=Bi(t.height)/i.offsetHeight||1;return e!==1||s!==1}function py(i,t,e){e===void 0&&(e=!1);var s=Le(t),n=Le(t)&&fy(t),r=Ns(t),o=Hi(i,n,e),a={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(s||!s&&!e)&&((is(t)!=="body"||xl(r))&&(a=dy(t)),Le(t)?(l=Hi(t,!0),l.x+=t.clientLeft,l.y+=t.clientTop):r&&(l.x=Tl(r))),{x:o.left+a.scrollLeft-l.x,y:o.top+a.scrollTop-l.y,width:o.width,height:o.height}}function gy(i){var t=new Map,e=new Set,s=[];i.forEach(function(r){t.set(r.name,r)});function n(r){e.add(r.name);var o=[].concat(r.requires||[],r.requiresIfExists||[]);o.forEach(function(a){if(!e.has(a)){var l=t.get(a);l&&n(l)}}),s.push(r)}return i.forEach(function(r){e.has(r.name)||n(r)}),s}function my(i){var t=gy(i);return Yd.reduce(function(e,s){return e.concat(t.filter(function(n){return n.phase===s}))},[])}function _y(i){var t;return function(){return t||(t=new Promise(function(e){Promise.resolve().then(function(){t=void 0,e(i())})})),t}}function by(i){var t=i.reduce(function(e,s){var n=e[s.name];return e[s.name]=n?Object.assign({},n,s,{options:Object.assign({},n.options,s.options),data:Object.assign({},n.data,s.data)}):s,e},{});return Object.keys(t).map(function(e){return t[e]})}var rh={placement:"bottom",modifiers:[],strategy:"absolute"};function oh(){for(var i=arguments.length,t=new Array(i),e=0;e<i;e++)t[e]=arguments[e];return!t.some(function(s){return!(s&&typeof s.getBoundingClientRect=="function")})}function ao(i){i===void 0&&(i={});var t=i,e=t.defaultModifiers,s=e===void 0?[]:e,n=t.defaultOptions,r=n===void 0?rh:n;return function(a,l,h){h===void 0&&(h=r);var c={placement:"bottom",orderedModifiers:[],options:Object.assign({},rh,r),modifiersData:{},elements:{reference:a,popper:l},attributes:{},styles:{}},u=[],d=!1,f={state:c,setOptions:function(m){var y=typeof m=="function"?m(c.options):m;p(),c.options=Object.assign({},r,c.options,y),c.scrollParents={reference:si(a)?An(a):a.contextElement?An(a.contextElement):[],popper:An(l)};var v=my(by([].concat(s,c.options.modifiers)));return c.orderedModifiers=v.filter(function(b){return b.enabled}),g(),f.update()},forceUpdate:function(){if(!d){var m=c.elements,y=m.reference,v=m.popper;if(oh(y,v)){c.rects={reference:py(y,Wn(v),c.options.strategy==="fixed"),popper:Al(v)},c.reset=!1,c.placement=c.options.placement,c.orderedModifiers.forEach(function($){return c.modifiersData[$.name]=Object.assign({},$.data)});for(var b=0;b<c.orderedModifiers.length;b++){if(c.reset===!0){c.reset=!1,b=-1;continue}var E=c.orderedModifiers[b],S=E.fn,T=E.options,I=T===void 0?{}:T,k=E.name;typeof S=="function"&&(c=S({state:c,options:I,name:k,instance:f})||c)}}}},update:_y(function(){return new Promise(function(_){f.forceUpdate(),_(c)})}),destroy:function(){p(),d=!0}};if(!oh(a,l))return f;f.setOptions(h).then(function(_){!d&&h.onFirstUpdate&&h.onFirstUpdate(_)});function g(){c.orderedModifiers.forEach(function(_){var m=_.name,y=_.options,v=y===void 0?{}:y,b=_.effect;if(typeof b=="function"){var E=b({state:c,name:m,instance:f,options:v}),S=function(){};u.push(E||S)}})}function p(){u.forEach(function(_){return _()}),u=[]}return f}}var vy=ao(),yy=[Sl,Rl,El,yl],Ay=ao({defaultModifiers:yy}),wy=[Sl,Rl,El,yl,af,rf,lf,ef,of],Pl=ao({defaultModifiers:wy});const cf=Object.freeze(Object.defineProperty({__proto__:null,afterMain:zd,afterRead:jd,afterWrite:qd,applyStyles:yl,arrow:ef,auto:ro,basePlacements:zi,beforeMain:Ud,beforeRead:Hd,beforeWrite:Gd,bottom:Ee,clippingParents:$d,computeStyles:El,createPopper:Pl,createPopperBase:vy,createPopperLite:Ay,detectOverflow:ji,end:$i,eventListeners:Sl,flip:rf,hide:of,left:ce,main:Wd,modifierPhases:Yd,offset:af,placements:bl,popper:_i,popperGenerator:ao,popperOffsets:Rl,preventOverflow:lf,read:Vd,reference:Bd,right:Se,start:ei,top:le,variationPlacements:Pa,viewport:_l,write:Kd},Symbol.toStringTag,{value:"Module"}));/*!
  * Bootstrap v5.3.7 (https://getbootstrap.com/)
  * Copyright 2011-2025 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */const As=new Map,$o={set(i,t,e){As.has(i)||As.set(i,new Map);const s=As.get(i);if(!s.has(t)&&s.size!==0){console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(s.keys())[0]}.`);return}s.set(t,e)},get(i,t){return As.has(i)&&As.get(i).get(t)||null},remove(i,t){if(!As.has(i))return;const e=As.get(i);e.delete(t),e.size===0&&As.delete(i)}},Ey=1e6,Sy=1e3,Ma="transitionend",hf=i=>(i&&window.CSS&&window.CSS.escape&&(i=i.replace(/#([^\s"#']+)/g,(t,e)=>`#${CSS.escape(e)}`)),i),Cy=i=>i==null?`${i}`:Object.prototype.toString.call(i).match(/\s([a-z]+)/i)[1].toLowerCase(),Ty=i=>{do i+=Math.floor(Math.random()*Ey);while(document.getElementById(i));return i},xy=i=>{if(!i)return 0;let{transitionDuration:t,transitionDelay:e}=window.getComputedStyle(i);const s=Number.parseFloat(t),n=Number.parseFloat(e);return!s&&!n?0:(t=t.split(",")[0],e=e.split(",")[0],(Number.parseFloat(t)+Number.parseFloat(e))*Sy)},uf=i=>{i.dispatchEvent(new Event(Ma))},ds=i=>!i||typeof i!="object"?!1:(typeof i.jquery<"u"&&(i=i[0]),typeof i.nodeType<"u"),Ms=i=>ds(i)?i.jquery?i[0]:i:typeof i=="string"&&i.length>0?document.querySelector(hf(i)):null,Gi=i=>{if(!ds(i)||i.getClientRects().length===0)return!1;const t=getComputedStyle(i).getPropertyValue("visibility")==="visible",e=i.closest("details:not([open])");if(!e)return t;if(e!==i){const s=i.closest("summary");if(s&&s.parentNode!==e||s===null)return!1}return t},ks=i=>!i||i.nodeType!==Node.ELEMENT_NODE||i.classList.contains("disabled")?!0:typeof i.disabled<"u"?i.disabled:i.hasAttribute("disabled")&&i.getAttribute("disabled")!=="false",df=i=>{if(!document.documentElement.attachShadow)return null;if(typeof i.getRootNode=="function"){const t=i.getRootNode();return t instanceof ShadowRoot?t:null}return i instanceof ShadowRoot?i:i.parentNode?df(i.parentNode):null},Nr=()=>{},zn=i=>{i.offsetHeight},ff=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,Bo=[],Ry=i=>{document.readyState==="loading"?(Bo.length||document.addEventListener("DOMContentLoaded",()=>{for(const t of Bo)t()}),Bo.push(i)):i()},ke=()=>document.documentElement.dir==="rtl",De=i=>{Ry(()=>{const t=ff();if(t){const e=i.NAME,s=t.fn[e];t.fn[e]=i.jQueryInterface,t.fn[e].Constructor=i,t.fn[e].noConflict=()=>(t.fn[e]=s,i.jQueryInterface)}})},be=(i,t=[],e=i)=>typeof i=="function"?i.call(...t):e,pf=(i,t,e=!0)=>{if(!e){be(i);return}const n=xy(t)+5;let r=!1;const o=({target:a})=>{a===t&&(r=!0,t.removeEventListener(Ma,o),be(i))};t.addEventListener(Ma,o),setTimeout(()=>{r||uf(t)},n)},Il=(i,t,e,s)=>{const n=i.length;let r=i.indexOf(t);return r===-1?!e&&s?i[n-1]:i[0]:(r+=e?1:-1,s&&(r=(r+n)%n),i[Math.max(0,Math.min(r,n-1))])},Py=/[^.]*(?=\..*)\.|.*/,Iy=/\..*/,Ly=/::\d+$/,Ho={};let ah=1;const gf={mouseenter:"mouseover",mouseleave:"mouseout"},My=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function mf(i,t){return t&&`${t}::${ah++}`||i.uidEvent||ah++}function _f(i){const t=mf(i);return i.uidEvent=t,Ho[t]=Ho[t]||{},Ho[t]}function ky(i,t){return function e(s){return Ll(s,{delegateTarget:i}),e.oneOff&&M.off(i,s.type,t),t.apply(i,[s])}}function Oy(i,t,e){return function s(n){const r=i.querySelectorAll(t);for(let{target:o}=n;o&&o!==this;o=o.parentNode)for(const a of r)if(a===o)return Ll(n,{delegateTarget:o}),s.oneOff&&M.off(i,n.type,t,e),e.apply(o,[n])}}function bf(i,t,e=null){return Object.values(i).find(s=>s.callable===t&&s.delegationSelector===e)}function vf(i,t,e){const s=typeof t=="string",n=s?e:t||e;let r=yf(i);return My.has(r)||(r=i),[s,n,r]}function lh(i,t,e,s,n){if(typeof t!="string"||!i)return;let[r,o,a]=vf(t,e,s);t in gf&&(o=(g=>function(p){if(!p.relatedTarget||p.relatedTarget!==p.delegateTarget&&!p.delegateTarget.contains(p.relatedTarget))return g.call(this,p)})(o));const l=_f(i),h=l[a]||(l[a]={}),c=bf(h,o,r?e:null);if(c){c.oneOff=c.oneOff&&n;return}const u=mf(o,t.replace(Py,"")),d=r?Oy(i,e,o):ky(i,o);d.delegationSelector=r?e:null,d.callable=o,d.oneOff=n,d.uidEvent=u,h[u]=d,i.addEventListener(a,d,r)}function ka(i,t,e,s,n){const r=bf(t[e],s,n);r&&(i.removeEventListener(e,r,!!n),delete t[e][r.uidEvent])}function Dy(i,t,e,s){const n=t[e]||{};for(const[r,o]of Object.entries(n))r.includes(s)&&ka(i,t,e,o.callable,o.delegationSelector)}function yf(i){return i=i.replace(Iy,""),gf[i]||i}const M={on(i,t,e,s){lh(i,t,e,s,!1)},one(i,t,e,s){lh(i,t,e,s,!0)},off(i,t,e,s){if(typeof t!="string"||!i)return;const[n,r,o]=vf(t,e,s),a=o!==t,l=_f(i),h=l[o]||{},c=t.startsWith(".");if(typeof r<"u"){if(!Object.keys(h).length)return;ka(i,l,o,r,n?e:null);return}if(c)for(const u of Object.keys(l))Dy(i,l,u,t.slice(1));for(const[u,d]of Object.entries(h)){const f=u.replace(Ly,"");(!a||t.includes(f))&&ka(i,l,o,d.callable,d.delegationSelector)}},trigger(i,t,e){if(typeof t!="string"||!i)return null;const s=ff(),n=yf(t),r=t!==n;let o=null,a=!0,l=!0,h=!1;r&&s&&(o=s.Event(t,e),s(i).trigger(o),a=!o.isPropagationStopped(),l=!o.isImmediatePropagationStopped(),h=o.isDefaultPrevented());const c=Ll(new Event(t,{bubbles:a,cancelable:!0}),e);return h&&c.preventDefault(),l&&i.dispatchEvent(c),c.defaultPrevented&&o&&o.preventDefault(),c}};function Ll(i,t={}){for(const[e,s]of Object.entries(t))try{i[e]=s}catch{Object.defineProperty(i,e,{configurable:!0,get(){return s}})}return i}function ch(i){if(i==="true")return!0;if(i==="false")return!1;if(i===Number(i).toString())return Number(i);if(i===""||i==="null")return null;if(typeof i!="string")return i;try{return JSON.parse(decodeURIComponent(i))}catch{return i}}function Vo(i){return i.replace(/[A-Z]/g,t=>`-${t.toLowerCase()}`)}const fs={setDataAttribute(i,t,e){i.setAttribute(`data-bs-${Vo(t)}`,e)},removeDataAttribute(i,t){i.removeAttribute(`data-bs-${Vo(t)}`)},getDataAttributes(i){if(!i)return{};const t={},e=Object.keys(i.dataset).filter(s=>s.startsWith("bs")&&!s.startsWith("bsConfig"));for(const s of e){let n=s.replace(/^bs/,"");n=n.charAt(0).toLowerCase()+n.slice(1),t[n]=ch(i.dataset[s])}return t},getDataAttribute(i,t){return ch(i.getAttribute(`data-bs-${Vo(t)}`))}};class Gn{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(t){return t=this._mergeConfigObj(t),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}_configAfterMerge(t){return t}_mergeConfigObj(t,e){const s=ds(e)?fs.getDataAttribute(e,"config"):{};return{...this.constructor.Default,...typeof s=="object"?s:{},...ds(e)?fs.getDataAttributes(e):{},...typeof t=="object"?t:{}}}_typeCheckConfig(t,e=this.constructor.DefaultType){for(const[s,n]of Object.entries(e)){const r=t[s],o=ds(r)?"element":Cy(r);if(!new RegExp(n).test(o))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${s}" provided type "${o}" but expected type "${n}".`)}}}const Ny="5.3.7";class He extends Gn{constructor(t,e){super(),t=Ms(t),t&&(this._element=t,this._config=this._getConfig(e),$o.set(this._element,this.constructor.DATA_KEY,this))}dispose(){$o.remove(this._element,this.constructor.DATA_KEY),M.off(this._element,this.constructor.EVENT_KEY);for(const t of Object.getOwnPropertyNames(this))this[t]=null}_queueCallback(t,e,s=!0){pf(t,e,s)}_getConfig(t){return t=this._mergeConfigObj(t,this._element),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}static getInstance(t){return $o.get(Ms(t),this.DATA_KEY)}static getOrCreateInstance(t,e={}){return this.getInstance(t)||new this(t,typeof e=="object"?e:null)}static get VERSION(){return Ny}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(t){return`${t}${this.EVENT_KEY}`}}const jo=i=>{let t=i.getAttribute("data-bs-target");if(!t||t==="#"){let e=i.getAttribute("href");if(!e||!e.includes("#")&&!e.startsWith("."))return null;e.includes("#")&&!e.startsWith("#")&&(e=`#${e.split("#")[1]}`),t=e&&e!=="#"?e.trim():null}return t?t.split(",").map(e=>hf(e)).join(","):null},Q={find(i,t=document.documentElement){return[].concat(...Element.prototype.querySelectorAll.call(t,i))},findOne(i,t=document.documentElement){return Element.prototype.querySelector.call(t,i)},children(i,t){return[].concat(...i.children).filter(e=>e.matches(t))},parents(i,t){const e=[];let s=i.parentNode.closest(t);for(;s;)e.push(s),s=s.parentNode.closest(t);return e},prev(i,t){let e=i.previousElementSibling;for(;e;){if(e.matches(t))return[e];e=e.previousElementSibling}return[]},next(i,t){let e=i.nextElementSibling;for(;e;){if(e.matches(t))return[e];e=e.nextElementSibling}return[]},focusableChildren(i){const t=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(e=>`${e}:not([tabindex^="-"])`).join(",");return this.find(t,i).filter(e=>!ks(e)&&Gi(e))},getSelectorFromElement(i){const t=jo(i);return t&&Q.findOne(t)?t:null},getElementFromSelector(i){const t=jo(i);return t?Q.findOne(t):null},getMultipleElementsFromSelector(i){const t=jo(i);return t?Q.find(t):[]}},lo=(i,t="hide")=>{const e=`click.dismiss${i.EVENT_KEY}`,s=i.NAME;M.on(document,e,`[data-bs-dismiss="${s}"]`,function(n){if(["A","AREA"].includes(this.tagName)&&n.preventDefault(),ks(this))return;const r=Q.getElementFromSelector(this)||this.closest(`.${s}`);i.getOrCreateInstance(r)[t]()})},Fy="alert",$y="bs.alert",Af=`.${$y}`,By=`close${Af}`,Hy=`closed${Af}`,Vy="fade",jy="show";class co extends He{static get NAME(){return Fy}close(){if(M.trigger(this._element,By).defaultPrevented)return;this._element.classList.remove(jy);const e=this._element.classList.contains(Vy);this._queueCallback(()=>this._destroyElement(),this._element,e)}_destroyElement(){this._element.remove(),M.trigger(this._element,Hy),this.dispose()}static jQueryInterface(t){return this.each(function(){const e=co.getOrCreateInstance(this);if(typeof t=="string"){if(e[t]===void 0||t.startsWith("_")||t==="constructor")throw new TypeError(`No method named "${t}"`);e[t](this)}})}}lo(co,"close");De(co);const Uy="button",Wy="bs.button",zy=`.${Wy}`,Gy=".data-api",Ky="active",hh='[data-bs-toggle="button"]',qy=`click${zy}${Gy}`;class ho extends He{static get NAME(){return Uy}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle(Ky))}static jQueryInterface(t){return this.each(function(){const e=ho.getOrCreateInstance(this);t==="toggle"&&e[t]()})}}M.on(document,qy,hh,i=>{i.preventDefault();const t=i.target.closest(hh);ho.getOrCreateInstance(t).toggle()});De(ho);const Yy="swipe",Ki=".bs.swipe",Xy=`touchstart${Ki}`,Qy=`touchmove${Ki}`,Jy=`touchend${Ki}`,Zy=`pointerdown${Ki}`,tA=`pointerup${Ki}`,eA="touch",sA="pen",iA="pointer-event",nA=40,rA={endCallback:null,leftCallback:null,rightCallback:null},oA={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class Fr extends Gn{constructor(t,e){super(),this._element=t,!(!t||!Fr.isSupported())&&(this._config=this._getConfig(e),this._deltaX=0,this._supportPointerEvents=!!window.PointerEvent,this._initEvents())}static get Default(){return rA}static get DefaultType(){return oA}static get NAME(){return Yy}dispose(){M.off(this._element,Ki)}_start(t){if(!this._supportPointerEvents){this._deltaX=t.touches[0].clientX;return}this._eventIsPointerPenTouch(t)&&(this._deltaX=t.clientX)}_end(t){this._eventIsPointerPenTouch(t)&&(this._deltaX=t.clientX-this._deltaX),this._handleSwipe(),be(this._config.endCallback)}_move(t){this._deltaX=t.touches&&t.touches.length>1?0:t.touches[0].clientX-this._deltaX}_handleSwipe(){const t=Math.abs(this._deltaX);if(t<=nA)return;const e=t/this._deltaX;this._deltaX=0,e&&be(e>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(M.on(this._element,Zy,t=>this._start(t)),M.on(this._element,tA,t=>this._end(t)),this._element.classList.add(iA)):(M.on(this._element,Xy,t=>this._start(t)),M.on(this._element,Qy,t=>this._move(t)),M.on(this._element,Jy,t=>this._end(t)))}_eventIsPointerPenTouch(t){return this._supportPointerEvents&&(t.pointerType===sA||t.pointerType===eA)}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const aA="carousel",lA="bs.carousel",Fs=`.${lA}`,wf=".data-api",cA="ArrowLeft",hA="ArrowRight",uA=500,sn="next",ci="prev",bi="left",Ar="right",dA=`slide${Fs}`,Uo=`slid${Fs}`,fA=`keydown${Fs}`,pA=`mouseenter${Fs}`,gA=`mouseleave${Fs}`,mA=`dragstart${Fs}`,_A=`load${Fs}${wf}`,bA=`click${Fs}${wf}`,Ef="carousel",lr="active",vA="slide",yA="carousel-item-end",AA="carousel-item-start",wA="carousel-item-next",EA="carousel-item-prev",Sf=".active",Cf=".carousel-item",SA=Sf+Cf,CA=".carousel-item img",TA=".carousel-indicators",xA="[data-bs-slide], [data-bs-slide-to]",RA='[data-bs-ride="carousel"]',PA={[cA]:Ar,[hA]:bi},IA={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},LA={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class Kn extends He{constructor(t,e){super(t,e),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=Q.findOne(TA,this._element),this._addEventListeners(),this._config.ride===Ef&&this.cycle()}static get Default(){return IA}static get DefaultType(){return LA}static get NAME(){return aA}next(){this._slide(sn)}nextWhenVisible(){!document.hidden&&Gi(this._element)&&this.next()}prev(){this._slide(ci)}pause(){this._isSliding&&uf(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval(()=>this.nextWhenVisible(),this._config.interval)}_maybeEnableCycle(){if(this._config.ride){if(this._isSliding){M.one(this._element,Uo,()=>this.cycle());return}this.cycle()}}to(t){const e=this._getItems();if(t>e.length-1||t<0)return;if(this._isSliding){M.one(this._element,Uo,()=>this.to(t));return}const s=this._getItemIndex(this._getActive());if(s===t)return;const n=t>s?sn:ci;this._slide(n,e[t])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(t){return t.defaultInterval=t.interval,t}_addEventListeners(){this._config.keyboard&&M.on(this._element,fA,t=>this._keydown(t)),this._config.pause==="hover"&&(M.on(this._element,pA,()=>this.pause()),M.on(this._element,gA,()=>this._maybeEnableCycle())),this._config.touch&&Fr.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const s of Q.find(CA,this._element))M.on(s,mA,n=>n.preventDefault());const e={leftCallback:()=>this._slide(this._directionToOrder(bi)),rightCallback:()=>this._slide(this._directionToOrder(Ar)),endCallback:()=>{this._config.pause==="hover"&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(()=>this._maybeEnableCycle(),uA+this._config.interval))}};this._swipeHelper=new Fr(this._element,e)}_keydown(t){if(/input|textarea/i.test(t.target.tagName))return;const e=PA[t.key];e&&(t.preventDefault(),this._slide(this._directionToOrder(e)))}_getItemIndex(t){return this._getItems().indexOf(t)}_setActiveIndicatorElement(t){if(!this._indicatorsElement)return;const e=Q.findOne(Sf,this._indicatorsElement);e.classList.remove(lr),e.removeAttribute("aria-current");const s=Q.findOne(`[data-bs-slide-to="${t}"]`,this._indicatorsElement);s&&(s.classList.add(lr),s.setAttribute("aria-current","true"))}_updateInterval(){const t=this._activeElement||this._getActive();if(!t)return;const e=Number.parseInt(t.getAttribute("data-bs-interval"),10);this._config.interval=e||this._config.defaultInterval}_slide(t,e=null){if(this._isSliding)return;const s=this._getActive(),n=t===sn,r=e||Il(this._getItems(),s,n,this._config.wrap);if(r===s)return;const o=this._getItemIndex(r),a=f=>M.trigger(this._element,f,{relatedTarget:r,direction:this._orderToDirection(t),from:this._getItemIndex(s),to:o});if(a(dA).defaultPrevented||!s||!r)return;const h=!!this._interval;this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(o),this._activeElement=r;const c=n?AA:yA,u=n?wA:EA;r.classList.add(u),zn(r),s.classList.add(c),r.classList.add(c);const d=()=>{r.classList.remove(c,u),r.classList.add(lr),s.classList.remove(lr,u,c),this._isSliding=!1,a(Uo)};this._queueCallback(d,s,this._isAnimated()),h&&this.cycle()}_isAnimated(){return this._element.classList.contains(vA)}_getActive(){return Q.findOne(SA,this._element)}_getItems(){return Q.find(Cf,this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(t){return ke()?t===bi?ci:sn:t===bi?sn:ci}_orderToDirection(t){return ke()?t===ci?bi:Ar:t===ci?Ar:bi}static jQueryInterface(t){return this.each(function(){const e=Kn.getOrCreateInstance(this,t);if(typeof t=="number"){e.to(t);return}if(typeof t=="string"){if(e[t]===void 0||t.startsWith("_")||t==="constructor")throw new TypeError(`No method named "${t}"`);e[t]()}})}}M.on(document,bA,xA,function(i){const t=Q.getElementFromSelector(this);if(!t||!t.classList.contains(Ef))return;i.preventDefault();const e=Kn.getOrCreateInstance(t),s=this.getAttribute("data-bs-slide-to");if(s){e.to(s),e._maybeEnableCycle();return}if(fs.getDataAttribute(this,"slide")==="next"){e.next(),e._maybeEnableCycle();return}e.prev(),e._maybeEnableCycle()});M.on(window,_A,()=>{const i=Q.find(RA);for(const t of i)Kn.getOrCreateInstance(t)});De(Kn);const MA="collapse",kA="bs.collapse",qn=`.${kA}`,OA=".data-api",DA=`show${qn}`,NA=`shown${qn}`,FA=`hide${qn}`,$A=`hidden${qn}`,BA=`click${qn}${OA}`,Wo="show",wi="collapse",cr="collapsing",HA="collapsed",VA=`:scope .${wi} .${wi}`,jA="collapse-horizontal",UA="width",WA="height",zA=".collapse.show, .collapse.collapsing",Oa='[data-bs-toggle="collapse"]',GA={parent:null,toggle:!0},KA={parent:"(null|element)",toggle:"boolean"};class Mn extends He{constructor(t,e){super(t,e),this._isTransitioning=!1,this._triggerArray=[];const s=Q.find(Oa);for(const n of s){const r=Q.getSelectorFromElement(n),o=Q.find(r).filter(a=>a===this._element);r!==null&&o.length&&this._triggerArray.push(n)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return GA}static get DefaultType(){return KA}static get NAME(){return MA}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let t=[];if(this._config.parent&&(t=this._getFirstLevelChildren(zA).filter(a=>a!==this._element).map(a=>Mn.getOrCreateInstance(a,{toggle:!1}))),t.length&&t[0]._isTransitioning||M.trigger(this._element,DA).defaultPrevented)return;for(const a of t)a.hide();const s=this._getDimension();this._element.classList.remove(wi),this._element.classList.add(cr),this._element.style[s]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const n=()=>{this._isTransitioning=!1,this._element.classList.remove(cr),this._element.classList.add(wi,Wo),this._element.style[s]="",M.trigger(this._element,NA)},o=`scroll${s[0].toUpperCase()+s.slice(1)}`;this._queueCallback(n,this._element,!0),this._element.style[s]=`${this._element[o]}px`}hide(){if(this._isTransitioning||!this._isShown()||M.trigger(this._element,FA).defaultPrevented)return;const e=this._getDimension();this._element.style[e]=`${this._element.getBoundingClientRect()[e]}px`,zn(this._element),this._element.classList.add(cr),this._element.classList.remove(wi,Wo);for(const n of this._triggerArray){const r=Q.getElementFromSelector(n);r&&!this._isShown(r)&&this._addAriaAndCollapsedClass([n],!1)}this._isTransitioning=!0;const s=()=>{this._isTransitioning=!1,this._element.classList.remove(cr),this._element.classList.add(wi),M.trigger(this._element,$A)};this._element.style[e]="",this._queueCallback(s,this._element,!0)}_isShown(t=this._element){return t.classList.contains(Wo)}_configAfterMerge(t){return t.toggle=!!t.toggle,t.parent=Ms(t.parent),t}_getDimension(){return this._element.classList.contains(jA)?UA:WA}_initializeChildren(){if(!this._config.parent)return;const t=this._getFirstLevelChildren(Oa);for(const e of t){const s=Q.getElementFromSelector(e);s&&this._addAriaAndCollapsedClass([e],this._isShown(s))}}_getFirstLevelChildren(t){const e=Q.find(VA,this._config.parent);return Q.find(t,this._config.parent).filter(s=>!e.includes(s))}_addAriaAndCollapsedClass(t,e){if(t.length)for(const s of t)s.classList.toggle(HA,!e),s.setAttribute("aria-expanded",e)}static jQueryInterface(t){const e={};return typeof t=="string"&&/show|hide/.test(t)&&(e.toggle=!1),this.each(function(){const s=Mn.getOrCreateInstance(this,e);if(typeof t=="string"){if(typeof s[t]>"u")throw new TypeError(`No method named "${t}"`);s[t]()}})}}M.on(document,BA,Oa,function(i){(i.target.tagName==="A"||i.delegateTarget&&i.delegateTarget.tagName==="A")&&i.preventDefault();for(const t of Q.getMultipleElementsFromSelector(this))Mn.getOrCreateInstance(t,{toggle:!1}).toggle()});De(Mn);const uh="dropdown",qA="bs.dropdown",oi=`.${qA}`,Ml=".data-api",YA="Escape",dh="Tab",XA="ArrowUp",fh="ArrowDown",QA=2,JA=`hide${oi}`,ZA=`hidden${oi}`,tw=`show${oi}`,ew=`shown${oi}`,Tf=`click${oi}${Ml}`,xf=`keydown${oi}${Ml}`,sw=`keyup${oi}${Ml}`,vi="show",iw="dropup",nw="dropend",rw="dropstart",ow="dropup-center",aw="dropdown-center",Us='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',lw=`${Us}.${vi}`,wr=".dropdown-menu",cw=".navbar",hw=".navbar-nav",uw=".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",dw=ke()?"top-end":"top-start",fw=ke()?"top-start":"top-end",pw=ke()?"bottom-end":"bottom-start",gw=ke()?"bottom-start":"bottom-end",mw=ke()?"left-start":"right-start",_w=ke()?"right-start":"left-start",bw="top",vw="bottom",yw={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},Aw={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class ts extends He{constructor(t,e){super(t,e),this._popper=null,this._parent=this._element.parentNode,this._menu=Q.next(this._element,wr)[0]||Q.prev(this._element,wr)[0]||Q.findOne(wr,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return yw}static get DefaultType(){return Aw}static get NAME(){return uh}toggle(){return this._isShown()?this.hide():this.show()}show(){if(ks(this._element)||this._isShown())return;const t={relatedTarget:this._element};if(!M.trigger(this._element,tw,t).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(hw))for(const s of[].concat(...document.body.children))M.on(s,"mouseover",Nr);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(vi),this._element.classList.add(vi),M.trigger(this._element,ew,t)}}hide(){if(ks(this._element)||!this._isShown())return;const t={relatedTarget:this._element};this._completeHide(t)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(t){if(!M.trigger(this._element,JA,t).defaultPrevented){if("ontouchstart"in document.documentElement)for(const s of[].concat(...document.body.children))M.off(s,"mouseover",Nr);this._popper&&this._popper.destroy(),this._menu.classList.remove(vi),this._element.classList.remove(vi),this._element.setAttribute("aria-expanded","false"),fs.removeDataAttribute(this._menu,"popper"),M.trigger(this._element,ZA,t),this._element.focus()}}_getConfig(t){if(t=super._getConfig(t),typeof t.reference=="object"&&!ds(t.reference)&&typeof t.reference.getBoundingClientRect!="function")throw new TypeError(`${uh.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return t}_createPopper(){if(typeof cf>"u")throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org/docs/v2/)");let t=this._element;this._config.reference==="parent"?t=this._parent:ds(this._config.reference)?t=Ms(this._config.reference):typeof this._config.reference=="object"&&(t=this._config.reference);const e=this._getPopperConfig();this._popper=Pl(t,this._menu,e)}_isShown(){return this._menu.classList.contains(vi)}_getPlacement(){const t=this._parent;if(t.classList.contains(nw))return mw;if(t.classList.contains(rw))return _w;if(t.classList.contains(ow))return bw;if(t.classList.contains(aw))return vw;const e=getComputedStyle(this._menu).getPropertyValue("--bs-position").trim()==="end";return t.classList.contains(iw)?e?fw:dw:e?gw:pw}_detectNavbar(){return this._element.closest(cw)!==null}_getOffset(){const{offset:t}=this._config;return typeof t=="string"?t.split(",").map(e=>Number.parseInt(e,10)):typeof t=="function"?e=>t(e,this._element):t}_getPopperConfig(){const t={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||this._config.display==="static")&&(fs.setDataAttribute(this._menu,"popper","static"),t.modifiers=[{name:"applyStyles",enabled:!1}]),{...t,...be(this._config.popperConfig,[void 0,t])}}_selectMenuItem({key:t,target:e}){const s=Q.find(uw,this._menu).filter(n=>Gi(n));s.length&&Il(s,e,t===fh,!s.includes(e)).focus()}static jQueryInterface(t){return this.each(function(){const e=ts.getOrCreateInstance(this,t);if(typeof t=="string"){if(typeof e[t]>"u")throw new TypeError(`No method named "${t}"`);e[t]()}})}static clearMenus(t){if(t.button===QA||t.type==="keyup"&&t.key!==dh)return;const e=Q.find(lw);for(const s of e){const n=ts.getInstance(s);if(!n||n._config.autoClose===!1)continue;const r=t.composedPath(),o=r.includes(n._menu);if(r.includes(n._element)||n._config.autoClose==="inside"&&!o||n._config.autoClose==="outside"&&o||n._menu.contains(t.target)&&(t.type==="keyup"&&t.key===dh||/input|select|option|textarea|form/i.test(t.target.tagName)))continue;const a={relatedTarget:n._element};t.type==="click"&&(a.clickEvent=t),n._completeHide(a)}}static dataApiKeydownHandler(t){const e=/input|textarea/i.test(t.target.tagName),s=t.key===YA,n=[XA,fh].includes(t.key);if(!n&&!s||e&&!s)return;t.preventDefault();const r=this.matches(Us)?this:Q.prev(this,Us)[0]||Q.next(this,Us)[0]||Q.findOne(Us,t.delegateTarget.parentNode),o=ts.getOrCreateInstance(r);if(n){t.stopPropagation(),o.show(),o._selectMenuItem(t);return}o._isShown()&&(t.stopPropagation(),o.hide(),r.focus())}}M.on(document,xf,Us,ts.dataApiKeydownHandler);M.on(document,xf,wr,ts.dataApiKeydownHandler);M.on(document,Tf,ts.clearMenus);M.on(document,sw,ts.clearMenus);M.on(document,Tf,Us,function(i){i.preventDefault(),ts.getOrCreateInstance(this).toggle()});De(ts);const Rf="backdrop",ww="fade",ph="show",gh=`mousedown.bs.${Rf}`,Ew={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},Sw={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class Pf extends Gn{constructor(t){super(),this._config=this._getConfig(t),this._isAppended=!1,this._element=null}static get Default(){return Ew}static get DefaultType(){return Sw}static get NAME(){return Rf}show(t){if(!this._config.isVisible){be(t);return}this._append();const e=this._getElement();this._config.isAnimated&&zn(e),e.classList.add(ph),this._emulateAnimation(()=>{be(t)})}hide(t){if(!this._config.isVisible){be(t);return}this._getElement().classList.remove(ph),this._emulateAnimation(()=>{this.dispose(),be(t)})}dispose(){this._isAppended&&(M.off(this._element,gh),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const t=document.createElement("div");t.className=this._config.className,this._config.isAnimated&&t.classList.add(ww),this._element=t}return this._element}_configAfterMerge(t){return t.rootElement=Ms(t.rootElement),t}_append(){if(this._isAppended)return;const t=this._getElement();this._config.rootElement.append(t),M.on(t,gh,()=>{be(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(t){pf(t,this._getElement(),this._config.isAnimated)}}const Cw="focustrap",Tw="bs.focustrap",$r=`.${Tw}`,xw=`focusin${$r}`,Rw=`keydown.tab${$r}`,Pw="Tab",Iw="forward",mh="backward",Lw={autofocus:!0,trapElement:null},Mw={autofocus:"boolean",trapElement:"element"};class If extends Gn{constructor(t){super(),this._config=this._getConfig(t),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return Lw}static get DefaultType(){return Mw}static get NAME(){return Cw}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),M.off(document,$r),M.on(document,xw,t=>this._handleFocusin(t)),M.on(document,Rw,t=>this._handleKeydown(t)),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,M.off(document,$r))}_handleFocusin(t){const{trapElement:e}=this._config;if(t.target===document||t.target===e||e.contains(t.target))return;const s=Q.focusableChildren(e);s.length===0?e.focus():this._lastTabNavDirection===mh?s[s.length-1].focus():s[0].focus()}_handleKeydown(t){t.key===Pw&&(this._lastTabNavDirection=t.shiftKey?mh:Iw)}}const _h=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",bh=".sticky-top",hr="padding-right",vh="margin-right";class Da{constructor(){this._element=document.body}getWidth(){const t=document.documentElement.clientWidth;return Math.abs(window.innerWidth-t)}hide(){const t=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,hr,e=>e+t),this._setElementAttributes(_h,hr,e=>e+t),this._setElementAttributes(bh,vh,e=>e-t)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,hr),this._resetElementAttributes(_h,hr),this._resetElementAttributes(bh,vh)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(t,e,s){const n=this.getWidth(),r=o=>{if(o!==this._element&&window.innerWidth>o.clientWidth+n)return;this._saveInitialAttribute(o,e);const a=window.getComputedStyle(o).getPropertyValue(e);o.style.setProperty(e,`${s(Number.parseFloat(a))}px`)};this._applyManipulationCallback(t,r)}_saveInitialAttribute(t,e){const s=t.style.getPropertyValue(e);s&&fs.setDataAttribute(t,e,s)}_resetElementAttributes(t,e){const s=n=>{const r=fs.getDataAttribute(n,e);if(r===null){n.style.removeProperty(e);return}fs.removeDataAttribute(n,e),n.style.setProperty(e,r)};this._applyManipulationCallback(t,s)}_applyManipulationCallback(t,e){if(ds(t)){e(t);return}for(const s of Q.find(t,this._element))e(s)}}const kw="modal",Ow="bs.modal",Oe=`.${Ow}`,Dw=".data-api",Nw="Escape",Fw=`hide${Oe}`,$w=`hidePrevented${Oe}`,Lf=`hidden${Oe}`,Mf=`show${Oe}`,Bw=`shown${Oe}`,Hw=`resize${Oe}`,Vw=`click.dismiss${Oe}`,jw=`mousedown.dismiss${Oe}`,Uw=`keydown.dismiss${Oe}`,Ww=`click${Oe}${Dw}`,yh="modal-open",zw="fade",Ah="show",zo="modal-static",Gw=".modal.show",Kw=".modal-dialog",qw=".modal-body",Yw='[data-bs-toggle="modal"]',Xw={backdrop:!0,focus:!0,keyboard:!0},Qw={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class Ui extends He{constructor(t,e){super(t,e),this._dialog=Q.findOne(Kw,this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new Da,this._addEventListeners()}static get Default(){return Xw}static get DefaultType(){return Qw}static get NAME(){return kw}toggle(t){return this._isShown?this.hide():this.show(t)}show(t){this._isShown||this._isTransitioning||M.trigger(this._element,Mf,{relatedTarget:t}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(yh),this._adjustDialog(),this._backdrop.show(()=>this._showElement(t)))}hide(){!this._isShown||this._isTransitioning||M.trigger(this._element,Fw).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(Ah),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated()))}dispose(){M.off(window,Oe),M.off(this._dialog,Oe),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new Pf({isVisible:!!this._config.backdrop,isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new If({trapElement:this._element})}_showElement(t){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const e=Q.findOne(qw,this._dialog);e&&(e.scrollTop=0),zn(this._element),this._element.classList.add(Ah);const s=()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,M.trigger(this._element,Bw,{relatedTarget:t})};this._queueCallback(s,this._dialog,this._isAnimated())}_addEventListeners(){M.on(this._element,Uw,t=>{if(t.key===Nw){if(this._config.keyboard){this.hide();return}this._triggerBackdropTransition()}}),M.on(window,Hw,()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),M.on(this._element,jw,t=>{M.one(this._element,Vw,e=>{if(!(this._element!==t.target||this._element!==e.target)){if(this._config.backdrop==="static"){this._triggerBackdropTransition();return}this._config.backdrop&&this.hide()}})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(yh),this._resetAdjustments(),this._scrollBar.reset(),M.trigger(this._element,Lf)})}_isAnimated(){return this._element.classList.contains(zw)}_triggerBackdropTransition(){if(M.trigger(this._element,$w).defaultPrevented)return;const e=this._element.scrollHeight>document.documentElement.clientHeight,s=this._element.style.overflowY;s==="hidden"||this._element.classList.contains(zo)||(e||(this._element.style.overflowY="hidden"),this._element.classList.add(zo),this._queueCallback(()=>{this._element.classList.remove(zo),this._queueCallback(()=>{this._element.style.overflowY=s},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){const t=this._element.scrollHeight>document.documentElement.clientHeight,e=this._scrollBar.getWidth(),s=e>0;if(s&&!t){const n=ke()?"paddingLeft":"paddingRight";this._element.style[n]=`${e}px`}if(!s&&t){const n=ke()?"paddingRight":"paddingLeft";this._element.style[n]=`${e}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(t,e){return this.each(function(){const s=Ui.getOrCreateInstance(this,t);if(typeof t=="string"){if(typeof s[t]>"u")throw new TypeError(`No method named "${t}"`);s[t](e)}})}}M.on(document,Ww,Yw,function(i){const t=Q.getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&i.preventDefault(),M.one(t,Mf,n=>{n.defaultPrevented||M.one(t,Lf,()=>{Gi(this)&&this.focus()})});const e=Q.findOne(Gw);e&&Ui.getInstance(e).hide(),Ui.getOrCreateInstance(t).toggle(this)});lo(Ui);De(Ui);const Jw="offcanvas",Zw="bs.offcanvas",vs=`.${Zw}`,kf=".data-api",tE=`load${vs}${kf}`,eE="Escape",wh="show",Eh="showing",Sh="hiding",sE="offcanvas-backdrop",Of=".offcanvas.show",iE=`show${vs}`,nE=`shown${vs}`,rE=`hide${vs}`,Ch=`hidePrevented${vs}`,Df=`hidden${vs}`,oE=`resize${vs}`,aE=`click${vs}${kf}`,lE=`keydown.dismiss${vs}`,cE='[data-bs-toggle="offcanvas"]',hE={backdrop:!0,keyboard:!0,scroll:!1},uE={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class Os extends He{constructor(t,e){super(t,e),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return hE}static get DefaultType(){return uE}static get NAME(){return Jw}toggle(t){return this._isShown?this.hide():this.show(t)}show(t){if(this._isShown||M.trigger(this._element,iE,{relatedTarget:t}).defaultPrevented)return;this._isShown=!0,this._backdrop.show(),this._config.scroll||new Da().hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(Eh);const s=()=>{(!this._config.scroll||this._config.backdrop)&&this._focustrap.activate(),this._element.classList.add(wh),this._element.classList.remove(Eh),M.trigger(this._element,nE,{relatedTarget:t})};this._queueCallback(s,this._element,!0)}hide(){if(!this._isShown||M.trigger(this._element,rE).defaultPrevented)return;this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add(Sh),this._backdrop.hide();const e=()=>{this._element.classList.remove(wh,Sh),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||new Da().reset(),M.trigger(this._element,Df)};this._queueCallback(e,this._element,!0)}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const t=()=>{if(this._config.backdrop==="static"){M.trigger(this._element,Ch);return}this.hide()},e=!!this._config.backdrop;return new Pf({className:sE,isVisible:e,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:e?t:null})}_initializeFocusTrap(){return new If({trapElement:this._element})}_addEventListeners(){M.on(this._element,lE,t=>{if(t.key===eE){if(this._config.keyboard){this.hide();return}M.trigger(this._element,Ch)}})}static jQueryInterface(t){return this.each(function(){const e=Os.getOrCreateInstance(this,t);if(typeof t=="string"){if(e[t]===void 0||t.startsWith("_")||t==="constructor")throw new TypeError(`No method named "${t}"`);e[t](this)}})}}M.on(document,aE,cE,function(i){const t=Q.getElementFromSelector(this);if(["A","AREA"].includes(this.tagName)&&i.preventDefault(),ks(this))return;M.one(t,Df,()=>{Gi(this)&&this.focus()});const e=Q.findOne(Of);e&&e!==t&&Os.getInstance(e).hide(),Os.getOrCreateInstance(t).toggle(this)});M.on(window,tE,()=>{for(const i of Q.find(Of))Os.getOrCreateInstance(i).show()});M.on(window,oE,()=>{for(const i of Q.find("[aria-modal][class*=show][class*=offcanvas-]"))getComputedStyle(i).position!=="fixed"&&Os.getOrCreateInstance(i).hide()});lo(Os);De(Os);const dE=/^aria-[\w-]*$/i,Nf={"*":["class","dir","id","lang","role",dE],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],dd:[],div:[],dl:[],dt:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},fE=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),pE=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:/?#]*(?:[/?#]|$))/i,gE=(i,t)=>{const e=i.nodeName.toLowerCase();return t.includes(e)?fE.has(e)?!!pE.test(i.nodeValue):!0:t.filter(s=>s instanceof RegExp).some(s=>s.test(e))};function mE(i,t,e){if(!i.length)return i;if(e&&typeof e=="function")return e(i);const n=new window.DOMParser().parseFromString(i,"text/html"),r=[].concat(...n.body.querySelectorAll("*"));for(const o of r){const a=o.nodeName.toLowerCase();if(!Object.keys(t).includes(a)){o.remove();continue}const l=[].concat(...o.attributes),h=[].concat(t["*"]||[],t[a]||[]);for(const c of l)gE(c,h)||o.removeAttribute(c.nodeName)}return n.body.innerHTML}const _E="TemplateFactory",bE={allowList:Nf,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},vE={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},yE={entry:"(string|element|function|null)",selector:"(string|element)"};class AE extends Gn{constructor(t){super(),this._config=this._getConfig(t)}static get Default(){return bE}static get DefaultType(){return vE}static get NAME(){return _E}getContent(){return Object.values(this._config.content).map(t=>this._resolvePossibleFunction(t)).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(t){return this._checkContent(t),this._config.content={...this._config.content,...t},this}toHtml(){const t=document.createElement("div");t.innerHTML=this._maybeSanitize(this._config.template);for(const[n,r]of Object.entries(this._config.content))this._setContent(t,r,n);const e=t.children[0],s=this._resolvePossibleFunction(this._config.extraClass);return s&&e.classList.add(...s.split(" ")),e}_typeCheckConfig(t){super._typeCheckConfig(t),this._checkContent(t.content)}_checkContent(t){for(const[e,s]of Object.entries(t))super._typeCheckConfig({selector:e,entry:s},yE)}_setContent(t,e,s){const n=Q.findOne(s,t);if(n){if(e=this._resolvePossibleFunction(e),!e){n.remove();return}if(ds(e)){this._putElementInTemplate(Ms(e),n);return}if(this._config.html){n.innerHTML=this._maybeSanitize(e);return}n.textContent=e}}_maybeSanitize(t){return this._config.sanitize?mE(t,this._config.allowList,this._config.sanitizeFn):t}_resolvePossibleFunction(t){return be(t,[void 0,this])}_putElementInTemplate(t,e){if(this._config.html){e.innerHTML="",e.append(t);return}e.textContent=t.textContent}}const wE="tooltip",EE=new Set(["sanitize","allowList","sanitizeFn"]),Go="fade",SE="modal",ur="show",CE=".tooltip-inner",Th=`.${SE}`,xh="hide.bs.modal",nn="hover",Ko="focus",qo="click",TE="manual",xE="hide",RE="hidden",PE="show",IE="shown",LE="inserted",ME="click",kE="focusin",OE="focusout",DE="mouseenter",NE="mouseleave",FE={AUTO:"auto",TOP:"top",RIGHT:ke()?"left":"right",BOTTOM:"bottom",LEFT:ke()?"right":"left"},$E={allowList:Nf,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,6],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},BE={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class qi extends He{constructor(t,e){if(typeof cf>"u")throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org/docs/v2/)");super(t,e),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return $E}static get DefaultType(){return BE}static get NAME(){return wE}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){if(this._isEnabled){if(this._isShown()){this._leave();return}this._enter()}}dispose(){clearTimeout(this._timeout),M.off(this._element.closest(Th),xh,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if(this._element.style.display==="none")throw new Error("Please use show on visible elements");if(!(this._isWithContent()&&this._isEnabled))return;const t=M.trigger(this._element,this.constructor.eventName(PE)),s=(df(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(t.defaultPrevented||!s)return;this._disposePopper();const n=this._getTipElement();this._element.setAttribute("aria-describedby",n.getAttribute("id"));const{container:r}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(r.append(n),M.trigger(this._element,this.constructor.eventName(LE))),this._popper=this._createPopper(n),n.classList.add(ur),"ontouchstart"in document.documentElement)for(const a of[].concat(...document.body.children))M.on(a,"mouseover",Nr);const o=()=>{M.trigger(this._element,this.constructor.eventName(IE)),this._isHovered===!1&&this._leave(),this._isHovered=!1};this._queueCallback(o,this.tip,this._isAnimated())}hide(){if(!this._isShown()||M.trigger(this._element,this.constructor.eventName(xE)).defaultPrevented)return;if(this._getTipElement().classList.remove(ur),"ontouchstart"in document.documentElement)for(const n of[].concat(...document.body.children))M.off(n,"mouseover",Nr);this._activeTrigger[qo]=!1,this._activeTrigger[Ko]=!1,this._activeTrigger[nn]=!1,this._isHovered=null;const s=()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),M.trigger(this._element,this.constructor.eventName(RE)))};this._queueCallback(s,this.tip,this._isAnimated())}update(){this._popper&&this._popper.update()}_isWithContent(){return!!this._getTitle()}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(t){const e=this._getTemplateFactory(t).toHtml();if(!e)return null;e.classList.remove(Go,ur),e.classList.add(`bs-${this.constructor.NAME}-auto`);const s=Ty(this.constructor.NAME).toString();return e.setAttribute("id",s),this._isAnimated()&&e.classList.add(Go),e}setContent(t){this._newContent=t,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(t){return this._templateFactory?this._templateFactory.changeContent(t):this._templateFactory=new AE({...this._config,content:t,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{[CE]:this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(t){return this.constructor.getOrCreateInstance(t.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(Go)}_isShown(){return this.tip&&this.tip.classList.contains(ur)}_createPopper(t){const e=be(this._config.placement,[this,t,this._element]),s=FE[e.toUpperCase()];return Pl(this._element,t,this._getPopperConfig(s))}_getOffset(){const{offset:t}=this._config;return typeof t=="string"?t.split(",").map(e=>Number.parseInt(e,10)):typeof t=="function"?e=>t(e,this._element):t}_resolvePossibleFunction(t){return be(t,[this._element,this._element])}_getPopperConfig(t){const e={placement:t,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:s=>{this._getTipElement().setAttribute("data-popper-placement",s.state.placement)}}]};return{...e,...be(this._config.popperConfig,[void 0,e])}}_setListeners(){const t=this._config.trigger.split(" ");for(const e of t)if(e==="click")M.on(this._element,this.constructor.eventName(ME),this._config.selector,s=>{const n=this._initializeOnDelegatedTarget(s);n._activeTrigger[qo]=!(n._isShown()&&n._activeTrigger[qo]),n.toggle()});else if(e!==TE){const s=e===nn?this.constructor.eventName(DE):this.constructor.eventName(kE),n=e===nn?this.constructor.eventName(NE):this.constructor.eventName(OE);M.on(this._element,s,this._config.selector,r=>{const o=this._initializeOnDelegatedTarget(r);o._activeTrigger[r.type==="focusin"?Ko:nn]=!0,o._enter()}),M.on(this._element,n,this._config.selector,r=>{const o=this._initializeOnDelegatedTarget(r);o._activeTrigger[r.type==="focusout"?Ko:nn]=o._element.contains(r.relatedTarget),o._leave()})}this._hideModalHandler=()=>{this._element&&this.hide()},M.on(this._element.closest(Th),xh,this._hideModalHandler)}_fixTitle(){const t=this._element.getAttribute("title");t&&(!this._element.getAttribute("aria-label")&&!this._element.textContent.trim()&&this._element.setAttribute("aria-label",t),this._element.setAttribute("data-bs-original-title",t),this._element.removeAttribute("title"))}_enter(){if(this._isShown()||this._isHovered){this._isHovered=!0;return}this._isHovered=!0,this._setTimeout(()=>{this._isHovered&&this.show()},this._config.delay.show)}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout(()=>{this._isHovered||this.hide()},this._config.delay.hide))}_setTimeout(t,e){clearTimeout(this._timeout),this._timeout=setTimeout(t,e)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(t){const e=fs.getDataAttributes(this._element);for(const s of Object.keys(e))EE.has(s)&&delete e[s];return t={...e,...typeof t=="object"&&t?t:{}},t=this._mergeConfigObj(t),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}_configAfterMerge(t){return t.container=t.container===!1?document.body:Ms(t.container),typeof t.delay=="number"&&(t.delay={show:t.delay,hide:t.delay}),typeof t.title=="number"&&(t.title=t.title.toString()),typeof t.content=="number"&&(t.content=t.content.toString()),t}_getDelegateConfig(){const t={};for(const[e,s]of Object.entries(this._config))this.constructor.Default[e]!==s&&(t[e]=s);return t.selector=!1,t.trigger="manual",t}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(t){return this.each(function(){const e=qi.getOrCreateInstance(this,t);if(typeof t=="string"){if(typeof e[t]>"u")throw new TypeError(`No method named "${t}"`);e[t]()}})}}De(qi);const HE="popover",VE=".popover-header",jE=".popover-body",UE={...qi.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},WE={...qi.DefaultType,content:"(null|string|element|function)"};class kl extends qi{static get Default(){return UE}static get DefaultType(){return WE}static get NAME(){return HE}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{[VE]:this._getTitle(),[jE]:this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(t){return this.each(function(){const e=kl.getOrCreateInstance(this,t);if(typeof t=="string"){if(typeof e[t]>"u")throw new TypeError(`No method named "${t}"`);e[t]()}})}}De(kl);const zE="scrollspy",GE="bs.scrollspy",Ol=`.${GE}`,KE=".data-api",qE=`activate${Ol}`,Rh=`click${Ol}`,YE=`load${Ol}${KE}`,XE="dropdown-item",hi="active",QE='[data-bs-spy="scroll"]',Yo="[href]",JE=".nav, .list-group",Ph=".nav-link",ZE=".nav-item",t0=".list-group-item",e0=`${Ph}, ${ZE} > ${Ph}, ${t0}`,s0=".dropdown",i0=".dropdown-toggle",n0={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},r0={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class uo extends He{constructor(t,e){super(t,e),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement=getComputedStyle(this._element).overflowY==="visible"?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return n0}static get DefaultType(){return r0}static get NAME(){return zE}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const t of this._observableSections.values())this._observer.observe(t)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(t){return t.target=Ms(t.target)||document.body,t.rootMargin=t.offset?`${t.offset}px 0px -30%`:t.rootMargin,typeof t.threshold=="string"&&(t.threshold=t.threshold.split(",").map(e=>Number.parseFloat(e))),t}_maybeEnableSmoothScroll(){this._config.smoothScroll&&(M.off(this._config.target,Rh),M.on(this._config.target,Rh,Yo,t=>{const e=this._observableSections.get(t.target.hash);if(e){t.preventDefault();const s=this._rootElement||window,n=e.offsetTop-this._element.offsetTop;if(s.scrollTo){s.scrollTo({top:n,behavior:"smooth"});return}s.scrollTop=n}}))}_getNewObserver(){const t={root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin};return new IntersectionObserver(e=>this._observerCallback(e),t)}_observerCallback(t){const e=o=>this._targetLinks.get(`#${o.target.id}`),s=o=>{this._previousScrollData.visibleEntryTop=o.target.offsetTop,this._process(e(o))},n=(this._rootElement||document.documentElement).scrollTop,r=n>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=n;for(const o of t){if(!o.isIntersecting){this._activeTarget=null,this._clearActiveClass(e(o));continue}const a=o.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(r&&a){if(s(o),!n)return;continue}!r&&!a&&s(o)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const t=Q.find(Yo,this._config.target);for(const e of t){if(!e.hash||ks(e))continue;const s=Q.findOne(decodeURI(e.hash),this._element);Gi(s)&&(this._targetLinks.set(decodeURI(e.hash),e),this._observableSections.set(e.hash,s))}}_process(t){this._activeTarget!==t&&(this._clearActiveClass(this._config.target),this._activeTarget=t,t.classList.add(hi),this._activateParents(t),M.trigger(this._element,qE,{relatedTarget:t}))}_activateParents(t){if(t.classList.contains(XE)){Q.findOne(i0,t.closest(s0)).classList.add(hi);return}for(const e of Q.parents(t,JE))for(const s of Q.prev(e,e0))s.classList.add(hi)}_clearActiveClass(t){t.classList.remove(hi);const e=Q.find(`${Yo}.${hi}`,t);for(const s of e)s.classList.remove(hi)}static jQueryInterface(t){return this.each(function(){const e=uo.getOrCreateInstance(this,t);if(typeof t=="string"){if(e[t]===void 0||t.startsWith("_")||t==="constructor")throw new TypeError(`No method named "${t}"`);e[t]()}})}}M.on(window,YE,()=>{for(const i of Q.find(QE))uo.getOrCreateInstance(i)});De(uo);const o0="tab",a0="bs.tab",ai=`.${a0}`,l0=`hide${ai}`,c0=`hidden${ai}`,h0=`show${ai}`,u0=`shown${ai}`,d0=`click${ai}`,f0=`keydown${ai}`,p0=`load${ai}`,g0="ArrowLeft",Ih="ArrowRight",m0="ArrowUp",Lh="ArrowDown",Xo="Home",Mh="End",Ws="active",kh="fade",Qo="show",_0="dropdown",Ff=".dropdown-toggle",b0=".dropdown-menu",Jo=`:not(${Ff})`,v0='.list-group, .nav, [role="tablist"]',y0=".nav-item, .list-group-item",A0=`.nav-link${Jo}, .list-group-item${Jo}, [role="tab"]${Jo}`,$f='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',Zo=`${A0}, ${$f}`,w0=`.${Ws}[data-bs-toggle="tab"], .${Ws}[data-bs-toggle="pill"], .${Ws}[data-bs-toggle="list"]`;class Wi extends He{constructor(t){super(t),this._parent=this._element.closest(v0),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),M.on(this._element,f0,e=>this._keydown(e)))}static get NAME(){return o0}show(){const t=this._element;if(this._elemIsActive(t))return;const e=this._getActiveElem(),s=e?M.trigger(e,l0,{relatedTarget:t}):null;M.trigger(t,h0,{relatedTarget:e}).defaultPrevented||s&&s.defaultPrevented||(this._deactivate(e,t),this._activate(t,e))}_activate(t,e){if(!t)return;t.classList.add(Ws),this._activate(Q.getElementFromSelector(t));const s=()=>{if(t.getAttribute("role")!=="tab"){t.classList.add(Qo);return}t.removeAttribute("tabindex"),t.setAttribute("aria-selected",!0),this._toggleDropDown(t,!0),M.trigger(t,u0,{relatedTarget:e})};this._queueCallback(s,t,t.classList.contains(kh))}_deactivate(t,e){if(!t)return;t.classList.remove(Ws),t.blur(),this._deactivate(Q.getElementFromSelector(t));const s=()=>{if(t.getAttribute("role")!=="tab"){t.classList.remove(Qo);return}t.setAttribute("aria-selected",!1),t.setAttribute("tabindex","-1"),this._toggleDropDown(t,!1),M.trigger(t,c0,{relatedTarget:e})};this._queueCallback(s,t,t.classList.contains(kh))}_keydown(t){if(![g0,Ih,m0,Lh,Xo,Mh].includes(t.key))return;t.stopPropagation(),t.preventDefault();const e=this._getChildren().filter(n=>!ks(n));let s;if([Xo,Mh].includes(t.key))s=e[t.key===Xo?0:e.length-1];else{const n=[Ih,Lh].includes(t.key);s=Il(e,t.target,n,!0)}s&&(s.focus({preventScroll:!0}),Wi.getOrCreateInstance(s).show())}_getChildren(){return Q.find(Zo,this._parent)}_getActiveElem(){return this._getChildren().find(t=>this._elemIsActive(t))||null}_setInitialAttributes(t,e){this._setAttributeIfNotExists(t,"role","tablist");for(const s of e)this._setInitialAttributesOnChild(s)}_setInitialAttributesOnChild(t){t=this._getInnerElement(t);const e=this._elemIsActive(t),s=this._getOuterElement(t);t.setAttribute("aria-selected",e),s!==t&&this._setAttributeIfNotExists(s,"role","presentation"),e||t.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(t,"role","tab"),this._setInitialAttributesOnTargetPanel(t)}_setInitialAttributesOnTargetPanel(t){const e=Q.getElementFromSelector(t);e&&(this._setAttributeIfNotExists(e,"role","tabpanel"),t.id&&this._setAttributeIfNotExists(e,"aria-labelledby",`${t.id}`))}_toggleDropDown(t,e){const s=this._getOuterElement(t);if(!s.classList.contains(_0))return;const n=(r,o)=>{const a=Q.findOne(r,s);a&&a.classList.toggle(o,e)};n(Ff,Ws),n(b0,Qo),s.setAttribute("aria-expanded",e)}_setAttributeIfNotExists(t,e,s){t.hasAttribute(e)||t.setAttribute(e,s)}_elemIsActive(t){return t.classList.contains(Ws)}_getInnerElement(t){return t.matches(Zo)?t:Q.findOne(Zo,t)}_getOuterElement(t){return t.closest(y0)||t}static jQueryInterface(t){return this.each(function(){const e=Wi.getOrCreateInstance(this);if(typeof t=="string"){if(e[t]===void 0||t.startsWith("_")||t==="constructor")throw new TypeError(`No method named "${t}"`);e[t]()}})}}M.on(document,d0,$f,function(i){["A","AREA"].includes(this.tagName)&&i.preventDefault(),!ks(this)&&Wi.getOrCreateInstance(this).show()});M.on(window,p0,()=>{for(const i of Q.find(w0))Wi.getOrCreateInstance(i)});De(Wi);const E0="toast",S0="bs.toast",$s=`.${S0}`,C0=`mouseover${$s}`,T0=`mouseout${$s}`,x0=`focusin${$s}`,R0=`focusout${$s}`,P0=`hide${$s}`,I0=`hidden${$s}`,L0=`show${$s}`,M0=`shown${$s}`,k0="fade",Oh="hide",dr="show",fr="showing",O0={animation:"boolean",autohide:"boolean",delay:"number"},D0={animation:!0,autohide:!0,delay:5e3};class fo extends He{constructor(t,e){super(t,e),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return D0}static get DefaultType(){return O0}static get NAME(){return E0}show(){if(M.trigger(this._element,L0).defaultPrevented)return;this._clearTimeout(),this._config.animation&&this._element.classList.add(k0);const e=()=>{this._element.classList.remove(fr),M.trigger(this._element,M0),this._maybeScheduleHide()};this._element.classList.remove(Oh),zn(this._element),this._element.classList.add(dr,fr),this._queueCallback(e,this._element,this._config.animation)}hide(){if(!this.isShown()||M.trigger(this._element,P0).defaultPrevented)return;const e=()=>{this._element.classList.add(Oh),this._element.classList.remove(fr,dr),M.trigger(this._element,I0)};this._element.classList.add(fr),this._queueCallback(e,this._element,this._config.animation)}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(dr),super.dispose()}isShown(){return this._element.classList.contains(dr)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay)))}_onInteraction(t,e){switch(t.type){case"mouseover":case"mouseout":{this._hasMouseInteraction=e;break}case"focusin":case"focusout":{this._hasKeyboardInteraction=e;break}}if(e){this._clearTimeout();return}const s=t.relatedTarget;this._element===s||this._element.contains(s)||this._maybeScheduleHide()}_setListeners(){M.on(this._element,C0,t=>this._onInteraction(t,!0)),M.on(this._element,T0,t=>this._onInteraction(t,!1)),M.on(this._element,x0,t=>this._onInteraction(t,!0)),M.on(this._element,R0,t=>this._onInteraction(t,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(t){return this.each(function(){const e=fo.getOrCreateInstance(this,t);if(typeof t=="string"){if(typeof e[t]>"u")throw new TypeError(`No method named "${t}"`);e[t](this)}})}}lo(fo);De(fo);em(vm).use(Nv).mount("#app");
